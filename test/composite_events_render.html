<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style type="text/css">
      body {
        font-family:monospace; white-space:pre;
      }
    </style>
    <script src="../sources/composite.js"></script>
    <script src="../sources/test.js"></script>
    <script type="text/javascript">
    
        var TestBean = {};
        TestBean.ticks = 0;
        TestBean.ping = function() {
            return ++TestBean.ticks;
        };

        TestBean.events = new Array();
        TestBean.onEvent = function(event, variants) {
            if (TestBean.events[event] === undefined)
                TestBean.events[event] = 0;
            TestBean.events[event]++;
        };
        Composite.listen(Composite.EVENT_RENDER_START, TestBean.onEvent);
        Composite.listen(Composite.EVENT_RENDER_NEXT, TestBean.onEvent);
        Composite.listen(Composite.EVENT_RENDER_END, TestBean.onEvent); 
        
        Test.create({test:function() {
            var events = TestBean.events[Composite.EVENT_RENDER_START];
            Assert.assertTrue(events !== undefined);
            Assert.assertEquals(1, events);            
        }});
        Test.create({test:function() {
            var events = TestBean.events[Composite.EVENT_RENDER_NEXT];
            Assert.assertTrue(events !== undefined);
            Assert.assertEquals(74, events);            
        }});
        Test.create({test:function() {
            var events = TestBean.events[Composite.EVENT_RENDER_END];
            Assert.assertTrue(events !== undefined);
            Assert.assertEquals(1, events);          
        }});        
        Composite.listen(Composite.EVENT_RENDER_END, function() {
            Test.start();
        }); 
    </script>
  </head>
  <body>
    <span>
      A-1:{{TestBean.ping()}} 
      A-2:{{TestBean.ping()}} 
      A-3:{{TestBean.ping()}}
      <span>
        <span>
          A-A-A-1:{{TestBean.ping()}} 
          A-A-A-2:{{TestBean.ping()}} 
          A-A-A-3:{{TestBean.ping()}}
          <span>
            A-A-A-A-1:{{TestBean.ping()}} 
            A-A-A-A-2:{{TestBean.ping()}} 
            A-A-A-A-3:{{TestBean.ping()}}
            <span>
              A-A-A-A-A-1:{{TestBean.ping()}} 
              A-A-A-A-A-2:{{TestBean.ping()}} 
              A-A-A-A-A-3:{{TestBean.ping()}}        
            </span>
            <span>
              A-A-A-A-B-1:{{TestBean.ping()}} 
              A-A-A-A-B-2:{{TestBean.ping()}} 
              A-A-A-A-B-3:{{TestBean.ping()}}        
            </span>
          </span>
          <span>
            A-A-A-B-1:{{TestBean.ping()}} 
            A-A-A-B-2:{{TestBean.ping()}} 
            A-A-A-B-3:{{TestBean.ping()}}        
          </span>
          <span>
            A-A-A-C-1:{{TestBean.ping()}} 
            A-A-A-C-2:{{TestBean.ping()}} 
            A-A-A-C-3:{{TestBean.ping()}}        
          </span>
        </span>
      </span>
    </span>
    <span>
      B-1:{{TestBean.ping()}} 
      B-2:{{TestBean.ping()}} 
      B-3:{{TestBean.ping()}}
      <span>
        <span>
          B-A-A-1:{{TestBean.ping()}} 
          B-A-A-2:{{TestBean.ping()}} 
          B-A-A-3:{{TestBean.ping()}}
          <span>
            B-A-A-A-1:{{TestBean.ping()}} 
            B-A-A-A-2:{{TestBean.ping()}} 
            B-A-A-A-3:{{TestBean.ping()}}
            <span>
              B-A-A-A-A-1:{{TestBean.ping()}} 
              B-A-A-A-A-2:{{TestBean.ping()}} 
              B-A-A-A-A-3:{{TestBean.ping()}}        
            </span>
            <span>
              B-A-A-A-B-1:{{TestBean.ping()}} 
              B-A-A-A-B-2:{{TestBean.ping()}} 
              B-A-A-A-B-3:{{TestBean.ping()}}        
            </span>
          </span>
          <span>
            B-A-A-B-1:{{TestBean.ping()}} 
            B-A-A-B-2:{{TestBean.ping()}} 
            B-A-A-B-3:{{TestBean.ping()}}        
          </span>
          <span>
            B-A-A-C-1:{{TestBean.ping()}} 
            B-A-A-C-2:{{TestBean.ping()}} 
            B-A-A-C-3:{{TestBean.ping()}}        
          </span>
        </span>
      </span>
    </span>
    <span>
      C-1:{{TestBean.ping()}} 
      C-2:{{TestBean.ping()}} 
      C-3:{{TestBean.ping()}}
      <span>
        <span>
          C-A-A-1:{{TestBean.ping()}} 
          C-A-A-2:{{TestBean.ping()}} 
          C-A-A-3:{{TestBean.ping()}}
          <span>
            C-A-A-A-1:{{TestBean.ping()}} 
            C-A-A-A-2:{{TestBean.ping()}} 
            C-A-A-A-3:{{TestBean.ping()}}
            <span>
              C-A-A-A-A-1:{{TestBean.ping()}} 
              C-A-A-A-A-2:{{TestBean.ping()}} 
              C-A-A-A-A-3:{{TestBean.ping()}}        
            </span>
            <span>
              C-A-A-A-B-1:{{TestBean.ping()}} 
              C-A-A-A-B-2:{{TestBean.ping()}} 
              C-A-A-A-B-3:{{TestBean.ping()}}        
            </span>
          </span>
          <span>
            C-A-A-B-1:{{TestBean.ping()}} 
            C-A-A-B-2:{{TestBean.ping()}} 
            C-A-A-B-3:{{TestBean.ping()}}        
          </span>
          <span>
            C-A-A-C-1:{{TestBean.ping()}} 
            C-A-A-C-2:{{TestBean.ping()}} 
            C-A-A-C-3:{{TestBean.ping()}}        
          </span>
        </span>
      </span>
    </span>
  </body>
</html>