<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style>
      body {
        font-family: monospace;
        white-space: pre;
      }
    </style>
    <script src="aspect-js.js"></script>
    <script src="scripts/capture.js"></script>
    <script type="text/javascript">

        Test.activate();

        Composite.include("syntax");

        const capture = new Capture();
        Composite.listen(Composite.EVENT_RENDER_END, () => {
            capture.snap();
            const count = capture.patterns().length;
            if (capture.size() === count)
                Test.start();
            if (capture.size() > count)
                Assert.assertEquals("expected {1} steps but was {2}", count, capture.size());
        });

        Test.create({test() {
            capture.validate();
        }});
    </script>
    <script type="text/test">
      false
      false
      false
      false
      false
      false
      false
      false
      b1 is not defined in String(b1)
      b2 is not defined in String(b2)
      c1 is not defined in String(c1)
      c2 is not defined in String(c2)
      d1 is not defined in String(d1)
      d2 is not defined in String(d2)
      #import syntaxC;
      Composite.render("body");
    </script>
    <script type="text/test">
      false
      false
      false
      false
      false
      false
      false
      false
      false
      false
      false
      false
      false
      false
      #import syntaxC;
      Composite.render("body");
    </script>
  </head>
  <body>
    {{String(_1)}}
    {{String(_2)}}
    {{String(_3)}}
    {{String(_4)}}
    {{String(_5)}}
    {{String(_6)}}

    {{String(a1)}}
    {{String(a2)}}
    {{String(b1)}}
    {{String(b2)}}
    {{String(c1)}}
    {{String(c2)}}
    {{String(d1)}}
    {{String(d2)}}
    <script type="composite/javascript">
      #import syntaxC;
      Composite.render("body");
    </script>
  </body>
</html>