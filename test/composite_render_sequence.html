<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style type="text/css">
      body {
        font-family:monospace;
        white-space:pre;
      }
    </style>
    <script src="../sources/extension.js"></script>
    <script src="../sources/composite.js"></script>
    <script src="../sources/test.js"></script>
    <script type="text/javascript"> 
    
        var TestModel = {};
        TestModel.ticks = 0;
        TestModel.ping = function() {
            return ++TestModel.ticks;
        };
        
        Test.create({test:function() {
            var expected = document.querySelector("script[type='text/test']");
            expected = expected.innerHTML.trim();
            expected = expected.replace(/\t/g, '    ');
            var actual = document.body;
            actual = actual.innerHTML.trim();
            actual = actual.replace(/\t/g, '    ');
            Assert.assertEquals(expected, actual);            
        }});
        
        Composite.listen(Composite.EVENT_RENDER_END, function() {
            Test.start();
        });         
    </script>
    <script type="text/test">
    <span>
      A-1:22 
      A-2:23 
      A-3:24
      <span>
        <span>
          A-A-A-1:28 
          A-A-A-2:29 
          A-A-A-3:30
          <span>
            A-A-A-A-1:34 
            A-A-A-A-2:35 
            A-A-A-A-3:36
            <span>
              A-A-A-A-A-1:52 
              A-A-A-A-A-2:53 
              A-A-A-A-A-3:54        
            </span>
            <span>
              A-A-A-A-B-1:55 
              A-A-A-A-B-2:56 
              A-A-A-A-B-3:57        
            </span>
          </span>
          <span>
            A-A-A-B-1:37 
            A-A-A-B-2:38 
            A-A-A-B-3:39        
          </span>
          <span>
            A-A-A-C-1:40 
            A-A-A-C-2:41 
            A-A-A-C-3:42        
          </span>
        </span>
      </span>
    </span>
    <span>
      B-1:1 
      B-2:2 
      B-3:3
      <span>
        <span>
          B-A-A-1:4 
          B-A-A-2:5 
          B-A-A-3:6
          <span>
            B-A-A-A-1:7 
            B-A-A-A-2:8 
            B-A-A-A-3:9
            <span>
              B-A-A-A-A-1:10 
              B-A-A-A-A-2:11 
              B-A-A-A-A-3:12        
            </span>
            <span>
              B-A-A-A-B-1:13 
              B-A-A-A-B-2:14 
              B-A-A-A-B-3:15        
            </span>
          </span>
          <span>
            B-A-A-B-1:16 
            B-A-A-B-2:17 
            B-A-A-B-3:18        
          </span>
          <span>
            B-A-A-C-1:19 
            B-A-A-C-2:20 
            B-A-A-C-3:21        
          </span>
        </span>
      </span>
    </span>
    <span>
      C-1:25 
      C-2:26 
      C-3:27
      <span>
        <span>
          C-A-A-1:31 
          C-A-A-2:32 
          C-A-A-3:33
          <span>
            C-A-A-A-1:43 
            C-A-A-A-2:44 
            C-A-A-A-3:45
            <span>
              C-A-A-A-A-1:58 
              C-A-A-A-A-2:59 
              C-A-A-A-A-3:60        
            </span>
            <span>
              C-A-A-A-B-1:61 
              C-A-A-A-B-2:62 
              C-A-A-A-B-3:63        
            </span>
          </span>
          <span>
            C-A-A-B-1:46 
            C-A-A-B-2:47 
            C-A-A-B-3:48        
          </span>
          <span>
            C-A-A-C-1:49 
            C-A-A-C-2:50 
            C-A-A-C-3:51        
          </span>
        </span>
      </span>
    </span>
    </script>
  </head>
  <body>
    <span>
      A-1:{{TestModel.ping()}} 
      A-2:{{TestModel.ping()}} 
      A-3:{{TestModel.ping()}}
      <span>
        <span>
          A-A-A-1:{{TestModel.ping()}} 
          A-A-A-2:{{TestModel.ping()}} 
          A-A-A-3:{{TestModel.ping()}}
          <span>
            A-A-A-A-1:{{TestModel.ping()}} 
            A-A-A-A-2:{{TestModel.ping()}} 
            A-A-A-A-3:{{TestModel.ping()}}
            <span>
              A-A-A-A-A-1:{{TestModel.ping()}} 
              A-A-A-A-A-2:{{TestModel.ping()}} 
              A-A-A-A-A-3:{{TestModel.ping()}}        
            </span>
            <span>
              A-A-A-A-B-1:{{TestModel.ping()}} 
              A-A-A-A-B-2:{{TestModel.ping()}} 
              A-A-A-A-B-3:{{TestModel.ping()}}        
            </span>
          </span>
          <span>
            A-A-A-B-1:{{TestModel.ping()}} 
            A-A-A-B-2:{{TestModel.ping()}} 
            A-A-A-B-3:{{TestModel.ping()}}        
          </span>
          <span>
            A-A-A-C-1:{{TestModel.ping()}} 
            A-A-A-C-2:{{TestModel.ping()}} 
            A-A-A-C-3:{{TestModel.ping()}}        
          </span>
        </span>
      </span>
    </span>
    <span sequence>
      B-1:{{TestModel.ping()}} 
      B-2:{{TestModel.ping()}} 
      B-3:{{TestModel.ping()}}
      <span>
        <span>
          B-A-A-1:{{TestModel.ping()}} 
          B-A-A-2:{{TestModel.ping()}} 
          B-A-A-3:{{TestModel.ping()}}
          <span>
            B-A-A-A-1:{{TestModel.ping()}} 
            B-A-A-A-2:{{TestModel.ping()}} 
            B-A-A-A-3:{{TestModel.ping()}}
            <span>
              B-A-A-A-A-1:{{TestModel.ping()}} 
              B-A-A-A-A-2:{{TestModel.ping()}} 
              B-A-A-A-A-3:{{TestModel.ping()}}        
            </span>
            <span>
              B-A-A-A-B-1:{{TestModel.ping()}} 
              B-A-A-A-B-2:{{TestModel.ping()}} 
              B-A-A-A-B-3:{{TestModel.ping()}}        
            </span>
          </span>
          <span>
            B-A-A-B-1:{{TestModel.ping()}} 
            B-A-A-B-2:{{TestModel.ping()}} 
            B-A-A-B-3:{{TestModel.ping()}}        
          </span>
          <span>
            B-A-A-C-1:{{TestModel.ping()}} 
            B-A-A-C-2:{{TestModel.ping()}} 
            B-A-A-C-3:{{TestModel.ping()}}        
          </span>
        </span>
      </span>
    </span>
    <span>
      C-1:{{TestModel.ping()}} 
      C-2:{{TestModel.ping()}} 
      C-3:{{TestModel.ping()}}
      <span>
        <span>
          C-A-A-1:{{TestModel.ping()}} 
          C-A-A-2:{{TestModel.ping()}} 
          C-A-A-3:{{TestModel.ping()}}
          <span>
            C-A-A-A-1:{{TestModel.ping()}} 
            C-A-A-A-2:{{TestModel.ping()}} 
            C-A-A-A-3:{{TestModel.ping()}}
            <span>
              C-A-A-A-A-1:{{TestModel.ping()}} 
              C-A-A-A-A-2:{{TestModel.ping()}} 
              C-A-A-A-A-3:{{TestModel.ping()}}        
            </span>
            <span>
              C-A-A-A-B-1:{{TestModel.ping()}} 
              C-A-A-A-B-2:{{TestModel.ping()}} 
              C-A-A-A-B-3:{{TestModel.ping()}}        
            </span>
          </span>
          <span>
            C-A-A-B-1:{{TestModel.ping()}} 
            C-A-A-B-2:{{TestModel.ping()}} 
            C-A-A-B-3:{{TestModel.ping()}}        
          </span>
          <span>
            C-A-A-C-1:{{TestModel.ping()}} 
            C-A-A-C-2:{{TestModel.ping()}} 
            C-A-A-C-3:{{TestModel.ping()}}        
          </span>
        </span>
      </span>
    </span>
  </body>
</html>