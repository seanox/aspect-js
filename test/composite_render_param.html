<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style type="text/css">
      body {
        font-family:monospace;
        white-space:pre;
      }
    </style>
    <script src="aspect-js.js"></script>
    <script type="text/javascript">
    
        Test.activate();
    
        var ModelA = {
            list: ["a", "b", "c"]
        }; 
    
        Test.create({test:function() {
            var content = document.body.innerHTML;
            Assert.assertEqualsTo("script[type='text/test-" + navigator.userAgentType + "']", content);            
        }});
        
        Composite.listen(Composite.EVENT_RENDER_END, function() {
            if (Test.status().queue != null)
                return;    
            var content = document.body.innerHTML;
            content = content.replace(/([\r\n]+)\s*(?=\1)/g, "");
            content = content.replace(/script/g, "x-script");
            document.body.innerHTML = content;
            Test.start();
        });  
    </script>
    <script type="text/test-edge">
   Syntax error
    :
   Syntax error
    :
   Syntax error
    :
   Syntax error
    :
   undefined
   undefined
   undefined
   undefined
    A:1: undefined
    A:2: undefined
    A:3: Hallo
    <article id="AB">
      AA:1: Hallo
      AB:1: undefined   
      AA:2: Hallo
      AB:2: undefined
      AA:3: Hallo
      AB:3: Welt
      AA:4: Hallo
      AB:4: Welt
      AA:5: Hallo
      AB:5: Hallo Welt
      AA:5: Hallo
      AB:5: Hallo Welt Hallo Welt
    </article>
    X: 1
    X: 2
    X: 1
    X: 1
    X: 2
    X: 4
    X: 7
    <span id="outputA"> 0:10 1:11 2:13</span>
    <div>
      10
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
      12
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
      15
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
    </div>
    </script>
    <script type="text/test-chrome">
   Unexpected token :
    :
   Unexpected token :
    :
   Unexpected token :
    :
   Unexpected token :
    :
    A:1: 
    A:2: 
    A:3: Hallo
    <article id="AB">
      AA:1: Hallo
      AB:1:    
      AA:2: Hallo
      AB:2: 
      AA:3: Hallo
      AB:3: Welt
      AA:4: Hallo
      AB:4: Welt
      AA:5: Hallo
      AB:5: Hallo Welt
      AA:5: Hallo
      AB:5: Hallo Welt Hallo Welt
    </article>
    X: 1
    X: 2
    X: 1
    X: 1
    X: 2
    X: 4
    X: 7
    <span id="outputA"> 0:10 1:11 2:13</span>
    <div>
      10
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
      12
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
      15
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
    </div>
    </script>
    <script type="text/test-firefox">
    expected expression, got ':'
    :
    expected expression, got ':'
    :
    expected expression, got ':'
    :
    expected expression, got ':'
    : 
    A:1: 
    A:2: 
    A:3: Hallo
    <article id="AB">
      AA:1: Hallo
      AB:1:    
      AA:2: Hallo
      AB:2: 
      AA:3: Hallo
      AB:3: Welt
      AA:4: Hallo
      AB:4: Welt
      AA:5: Hallo
      AB:5: Hallo Welt
      AA:5: Hallo
      AB:5: Hallo Welt Hallo Welt
    </article>
    X: 1
    X: 2
    X: 1
    X: 1
    X: 2
    X: 4
    X: 7
    <span id="outputA"> 0:10 1:11 2:13</span>
    <div>
      10
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
      12
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
      15
      <x-script type="composite/javax-script">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </x-script>
    </div>
    </script>
  </head>
  <body>
    {{:}}
    {{ :}}
    {{ : }}
    {{: }} 

    {{n:}}
    {{n}}
    {{n :}}
    {{n}}
    {{n : }}
    {{n}}
    {{n: }}
    {{n}}
  
    A:1: {{globalA}}
    {{globalA:Hallo}}
    A:2: {{globalA}}
    {{globalA:'Hallo'}}
    A:3: {{globalA}}
    <article id="AB">
      AA:1: {{globalA}}
      AB:1: {{globalAB}}   
      {{globalAB:Hallo}}
      AA:2: {{globalA}}
      AB:2: {{globalAB}}
      {{globalAB:'Welt'}}
      AA:3: {{globalA}}
      AB:3: {{globalAB}}
      {{globalAB:globalAB}}
      AA:4: {{globalA}}
      AB:4: {{globalAB}}
      {{globalAB:'Hallo ' + globalAB}}
      AA:5: {{globalA}}
      AB:5: {{globalAB}}
      {{globalAB:globalAB + ' ' + globalAB}}
      AA:5: {{globalA}}
      AB:5: {{globalAB}}
    </article>
    {{x : '1'}}
    X: {{x}}
    {{x : '2'}}
    X: {{x}}
    {{x :'1'}}
    X: {{x}}
    
    {{x:1}}
    X: {{x}}
    {{x:x+1}}
    X: {{x}}
    {{x:x+2}}
    X: {{x}}
    {{x:x+3}}
    X: {{x}}
    
    <span id="outputA"></span>
    {{tempA:10}}
    <div iterate="{{tempB:ModelA.list}}">
      {{tempA:tempA +tempB.index}} 
      {{tempA +tempB.index}}
      <script type="composite/javascript">
        outputA.textContent += " " + tempB.index + ":" + tempA;
      </script>
    </div>
  </body>
</html>