<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style type="text/css">
      body {
        font-family:monospace; white-space:pre;
      }
    </style>
    <script src="../sources/extension.js"></script>
    <script src="../sources/composite.js"></script>
    <script src="../sources/test.js"></script>
    <script src="../sources/testutils.js"></script>
    <script type="text/javascript"> 
    
        var TestBean = {};
        TestBean.ticks = 0;
        TestBean.ping = function() {
            return ++TestBean.ticks + "-" + "{{TestBean.ping()}}";
        };
        
        Test.create({test:function() {
            var actual = document.querySelector("body");
            var type = String(navigator.userAgent.match(/edge/i) || navigator.userAgent.match(/chrome/i) || "firefox").toLowerCase();
            Assert.assertEqualsTemplate("script[type='text/test-" + type + "']", actual.innerHTML);
        }}); 
        Composite.listen(Composite.EVENT_RENDER_END, function() {
            Test.start();
        }); 
    </script>
    <script type="text/test-edge">
    A:1-{{TestBean.ping()}} 
    B:2-{{TestBean.ping()}} 
    C:3-{{TestBean.ping()}}
    
    D:<input type="text" value="4-{{TestBean.ping()}}">
    E:<input type="text" value="5-{{TestBean.ping()}}">
    F:<input type="text" value="6-{{TestBean.ping()}}">
    </script>
    <script type="text/test-chrome">
    A:1-{{TestBean.ping()}} 
    B:2-{{TestBean.ping()}} 
    C:3-{{TestBean.ping()}}
    
    D:<input type="text" value="4-{{TestBean.ping()}}">
    E:<input type="text" value="5-{{TestBean.ping()}}">
    F:<input type="text" value="6-{{TestBean.ping()}}">
    </script>
    <script type="text/test-firefox">
    A:1-{{TestBean.ping()}} 
    B:2-{{TestBean.ping()}} 
    C:3-{{TestBean.ping()}}
    
    D:<input value="4-{{TestBean.ping()}}" type="text">
    E:<input value="5-{{TestBean.ping()}}" type="text">
    F:<input value="6-{{TestBean.ping()}}" type="text">
    </script>
  </head>
  <body>
    A:{{TestBean.ping()}} 
    B:{{TestBean.ping()}} 
    C:{{TestBean.ping()}}
    
    D:<input type="text" value="{{TestBean.ping()}}"/>
    E:<input type="text" value="{{TestBean.ping()}}"/>
    F:<input type="text" value="{{TestBean.ping()}}"/>
  </body>
</html>