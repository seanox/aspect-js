<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style type="text/css">
      body {
        font-family:monospace;
        white-space:pre;
      }
    </style>
    <script src="../sources/extension.js"></script>
    <script src="../sources/composite.js"></script>
    <script src="../sources/test.js"></script>
    <script type="text/javascript"> 
    
        var TestModel = {};
        TestModel.ticks = 0;
        TestModel.ping = function() {
            return ++TestModel.ticks + "-" + "{{TestModel.ping()}}";
        };
        
        Test.create({test:function() {
            var type = String(navigator.userAgent.match(/edge/i) || navigator.userAgent.match(/chrome/i) || "firefox").toLowerCase();
            Assert.assertEqualsTo("script[type='text/test-" + type + "']", document.body.innerHTML);
        }}); 
        Composite.listen(Composite.EVENT_RENDER_END, function() {
            Test.start();
        }); 
    </script>
    <script type="text/test-edge">
    A:1-{{TestModel.ping()}} 
    B:2-{{TestModel.ping()}} 
    C:3-{{TestModel.ping()}}
    
    D:<input type="text" value="4-{{TestModel.ping()}}">
    E:<input type="text" value="5-{{TestModel.ping()}}">
    F:<input type="text" value="6-{{TestModel.ping()}}">
    </script>
    <script type="text/test-chrome">
    A:1-{{TestModel.ping()}} 
    B:2-{{TestModel.ping()}} 
    C:3-{{TestModel.ping()}}
    
    D:<input type="text" value="4-{{TestModel.ping()}}">
    E:<input type="text" value="5-{{TestModel.ping()}}">
    F:<input type="text" value="6-{{TestModel.ping()}}">
    </script>
    <script type="text/test-firefox">
    A:1-{{TestModel.ping()}} 
    B:2-{{TestModel.ping()}} 
    C:3-{{TestModel.ping()}}
    
    D:<input value="4-{{TestModel.ping()}}" type="text">
    E:<input value="5-{{TestModel.ping()}}" type="text">
    F:<input value="6-{{TestModel.ping()}}" type="text">
    </script>
  </head>
  <body>
    A:{{TestModel.ping()}} 
    B:{{TestModel.ping()}} 
    C:{{TestModel.ping()}}
    
    D:<input type="text" value="{{TestModel.ping()}}"/>
    E:<input type="text" value="{{TestModel.ping()}}"/>
    F:<input type="text" value="{{TestModel.ping()}}"/>
  </body>
</html>