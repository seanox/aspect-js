<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style type="text/css">
      body {
        font-family:monospace; white-space:pre;
      }
    </style>
    <script src="../sources/composite.js"></script>
    <script src="../sources/test.js"></script>
    <script type="text/javascript">
        
        Test.create({test:function() {
            var expected = document.querySelector("script[type='text/test']");
            expected = expected.innerHTML.trim();
            expected = expected.replace(/\t/g, '    ');
            var actual = document.querySelector("body");
            actual = actual.innerHTML.trim();
            actual = actual.replace(/\t/g, '    ');
            Assert.assertEquals(expected, actual);
        }});         
        Test.start(true);        
    </script>
    <script type="text/test">
    mapping:
    ----
    and &amp;&amp;        empty !         div /
    eq  ==        ge    &gt;=        gt  &gt;
    le  &lt;=        lt    &lt;         mod %
    ne  !=        not   !         or  ||
    
    normal use:
    ----
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text> 
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text>
    
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text> 
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text>    
    
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text> 
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text>
       
    invalid word boundaries:
    ----
    <text>false</text> <text>true</text>
    <text>false</text> <text>true</text> 
    <text>identifier starts immediately after numeric literal
    1le2</text> <text>true</text>
    <text>identifier starts immediately after numeric literal
    1ne2</text> <text>true</text>
    
    <text>true</text> <text>true</text>
    <text>identifier starts immediately after numeric literal
    2ge1</text> <text>true</text> 
    <text>identifier starts immediately after numeric literal
    1lt2</text> <text>true</text>
    <text>true</text> <text>true</text>
    <text>unexpected token: string literal
    Expression.lookup("notempty")'x'</text> <text>true</text>    
    
    <text>identifier starts immediately after numeric literal
    (25div5)Expression.lookup("eq5")</text> <text>unexpected token: identifier
    (25 /5)Expression.lookup("eq5")</text>
    <text>identifier starts immediately after numeric literal
    2gt1</text> <text>true</text> 
    <text>identifier starts immediately after numeric literal
    (10mod3)Expression.lookup("eq1")</text> <text>unexpected token: identifier
    (10%3)Expression.lookup("eq1")</text>
    <text>false</text> <text>true</text>
    
    lower / upper case:
    ----
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text> 
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text>
    
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text> 
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text>    
    
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text> 
    <text>true</text> <text>true</text>
    <text>true</text> <text>true</text>
    
    various
    ----
    <text>-1</text>
    <text>1</text>
    <text>-12</text>
    </script>
  </head>
  <body>
    mapping:
    ----
    and &&        empty !         div /
    eq  ==        ge    >=        gt  >
    le  <=        lt    <         mod %
    ne  !=        not   !         or  ||
    
    normal use:
    ----
    {{true and true}} {{true && true}}
    {{true eq true}} {{true == true}} 
    {{1 le 2}} {{1 <= 2}}
    {{1 ne 2}} {{1 != 2}}
    
    {{empty ''}} {{!''}}
    {{2 ge 1}} {{2 >= 1}} 
    {{1 lt 2}} {{1 < 2}}
    {{not ''}} {{!''}}
    {{not empty 'x'}} {{!!'x'}}    
    
    {{(25 div 5) eq 5}} {{(25 /5) eq 5}}
    {{2 gt 1}} {{2 > 1}} 
    {{(10 mod 3) eq 1}} {{(10 % 3) eq 1}}
    {{true or false}} {{true || false}}
       
    invalid word boundaries:
    ----
    {{trueandtrue}} {{true&&true}}
    {{trueeqtrue}} {{true==true}} 
    {{1le2}} {{1<= 2}}
    {{1ne2}} {{1!= 2}}
    
    {{empty''}} {{!''}}
    {{2ge1}} {{2>=1}} 
    {{1lt2}} {{1<2}}
    {{not''}} {{!''}}
    {{notempty'x'}} {{!!'x'}}    
    
    {{(25div5)eq5}} {{(25 /5)eq5}}
    {{2gt1}} {{2>1}} 
    {{(10mod3)eq1}} {{(10%3)eq1}}
    {{trueorfalse}} {{true||false}}
    
    lower / upper case:
    ----
    {{true AND true}} {{true && true}}
    {{true EQ true}} {{true == true}} 
    {{1 LE 2}} {{1 <= 2}}
    {{1 NE 2}} {{1 != 2}}
    
    {{EMPTY ''}} {{!''}}
    {{2 GE 1}} {{2 >= 1}} 
    {{1 LT 2}} {{1 < 2}}
    {{NOT ''}} {{!''}}
    {{NOT EMPTY 'x'}} {{!!'x'}}    
    
    {{(25 DIV 5) EQ 5}} {{(25 /5) eq 5}}
    {{2 GT 1}} {{2 > 1}} 
    {{(10 MOD 3) EQ 1}} {{(10 % 3) eq 1}}
    {{true OR false}} {{true || false}}
    
    various
    ----
    {{-1}}
    {{-1 +2}}
    {{'-1' +2}}
  </body>
</html>