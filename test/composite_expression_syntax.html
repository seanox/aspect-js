<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style type="text/css">
      body {
        font-family:monospace; white-space:pre;
      }
    </style>
    <script src="../sources/extension.js"></script>
    <script src="../sources/composite.js"></script>
    <script src="../sources/test.js"></script>
    <script src="../sources/testutils.js"></script>
    <script type="text/javascript">
        
        Test.create({test:function() {
            var actual = document.querySelector("body");
            Assert.assertEqualsTemplate("script[type='text/test']", actual.innerHTML);
        }});         
        Composite.listen(Composite.EVENT_RENDER_END, function() {
            Test.start();
        });
        Example = {
            xa: function() {
                return 122;        
            },
            xb: function() {
                var element = document.createElement("i");
                element.innerHTML = "Hallo";
                return element;        
            }
        }
    </script>
    <script type="text/test">
    mapping:
    ----
    and &amp;&amp;        empty !         div /
    eq  ==        ge    &gt;=        gt  &gt;
    le  &lt;=        lt    &lt;         mod %
    ne  !=        not   !         or  ||
    
    normal use:
    ----
    true true
    true true 
    true true
    true true
    
    true true
    true true 
    true true
    true true
    true true    
    
    true true
    true true 
    true true
    true true
       
    invalid word boundaries:
    ----
     true
     true 
    identifier starts immediately after numeric literal
    1le2 true
    identifier starts immediately after numeric literal
    1ne2 true
    
    true true
    identifier starts immediately after numeric literal
    2ge1 true 
    identifier starts immediately after numeric literal
    1lt2 true
    true true
    unexpected token: string literal
    Expression.lookup("notempty")'x' true    
    
    identifier starts immediately after numeric literal
    (25div5)Expression.lookup("eq5") unexpected token: identifier
    (25 /5)Expression.lookup("eq5")
    identifier starts immediately after numeric literal
    2gt1 true 
    identifier starts immediately after numeric literal
    (10mod3)Expression.lookup("eq1") unexpected token: identifier
    (10%3)Expression.lookup("eq1")
     true
    
    lower / upper case:
    ----
    true true
    true true 
    true true
    true true
    
    true true
    true true 
    true true
    true true
    true true    
    
    true true
    true true 
    true true
    true true
    
    various
    ----
    -1
    1
    -12
    
    
    undefined123
    
    A1: 
    A2: 
    A3: Peter is not defined
    Peter.und.der()
    
    B1: [object HTMLInputElement]
    B2: Expression.lookup(...) is not a function
    Expression.lookup("#HiddenField.value")()
    B3: Test-HF    
    
    C1: illegal character
    #Expression.lookup("#HiddenField")
    C2: illegal character
    #Expression.lookup("#HiddenField.value")()
    C3: illegal character
    #Expression.lookup("#HiddenField.value")()    
    
    D1: 
    
    E1: illegal character
    #
    E2: illegal character
    # + #
    
    F1: Expression.lookup(...) is not a function
    '123' + Expression.lookup("#HiddenField.value")() + 'abc'
    F2: 123Test-HFabc
    
    G1: [object HTMLInputElement]
    G2: illegal character
    #HiddenField_1.#Expression.lookup("HiddenField_1")
    G3: illegal character
    #HiddenField_1.#Expression.lookup("HiddenField_2")    
    G4: unexpected token: identifier
    Expression.lookup("#HiddenField_1") Expression.lookup("#HiddenField_2")    
    G5: illegal character
    Expression.lookup("#HiddenField_1")#Expression.lookup("HiddenField_2")
        
    X0: <input id="HiddenField" value="Test-HF" type="hidden">
    X1: <input id="HiddenField_1" value="Test-HF_A" type="hidden">
    X2: <input id="HiddenField_2" value="Test-HF_B" type="hidden">
    X3: <input id="HiddenField_3" value="Test-HF_C" type="hidden">

    O1: <span>undefined</span>
    O2: <span>function() {
                return 122;        
            }</span>
    O3: <span>122</span>
    O4: <span>xxxx</span>
    O5: <span>xxxx</span>
    O6: <span>xxxxx</span>
    O7: <span><i>Hallo</i></span>
    </script>
  </head>
  <body>
    mapping:
    ----
    and &&        empty !         div /
    eq  ==        ge    >=        gt  >
    le  <=        lt    <         mod %
    ne  !=        not   !         or  ||
    
    normal use:
    ----
    {{true and true}} {{true && true}}
    {{true eq true}} {{true == true}} 
    {{1 le 2}} {{1 <= 2}}
    {{1 ne 2}} {{1 != 2}}
    
    {{empty ''}} {{!''}}
    {{2 ge 1}} {{2 >= 1}} 
    {{1 lt 2}} {{1 < 2}}
    {{not ''}} {{!''}}
    {{not empty 'x'}} {{!!'x'}}    
    
    {{(25 div 5) eq 5}} {{(25 /5) eq 5}}
    {{2 gt 1}} {{2 > 1}} 
    {{(10 mod 3) eq 1}} {{(10 % 3) eq 1}}
    {{true or false}} {{true || false}}
       
    invalid word boundaries:
    ----
    {{trueandtrue}} {{true&&true}}
    {{trueeqtrue}} {{true==true}} 
    {{1le2}} {{1<= 2}}
    {{1ne2}} {{1!= 2}}
    
    {{empty''}} {{!''}}
    {{2ge1}} {{2>=1}} 
    {{1lt2}} {{1<2}}
    {{not''}} {{!''}}
    {{notempty'x'}} {{!!'x'}}    
    
    {{(25div5)eq5}} {{(25 /5)eq5}}
    {{2gt1}} {{2>1}} 
    {{(10mod3)eq1}} {{(10%3)eq1}}
    {{trueorfalse}} {{true||false}}
    
    lower / upper case:
    ----
    {{true AND true}} {{true && true}}
    {{true EQ true}} {{true == true}} 
    {{1 LE 2}} {{1 <= 2}}
    {{1 NE 2}} {{1 != 2}}
    
    {{EMPTY ''}} {{!''}}
    {{2 GE 1}} {{2 >= 1}} 
    {{1 LT 2}} {{1 < 2}}
    {{NOT ''}} {{!''}}
    {{NOT EMPTY 'x'}} {{!!'x'}}    
    
    {{(25 DIV 5) EQ 5}} {{(25 /5) eq 5}}
    {{2 GT 1}} {{2 > 1}} 
    {{(10 MOD 3) EQ 1}} {{(10 % 3) eq 1}}
    {{true OR false}} {{true || false}}
    
    various
    ----
    {{-1}}
    {{-1 +2}}
    {{'-1' +2}}
    
    {{unknown}}
    {{unknown + '123'}}
    
    A1: {{Peter}}
    A2: {{Peter.und.der.Wolf}}
    A3: {{Peter.und.der()}}
    
    B1: {{#HiddenField}}
    B2: {{#HiddenField.value()}}
    B3: {{#HiddenField.value}}    
    
    C1: {{##HiddenField}}
    C2: {{##HiddenField.value()}}
    C3: {{##HiddenField.value()}}    
    
    D1: {{#Nothing}}
    
    E1: {{#}}
    E2: {{# + #}}
    
    F1: {{'123' + #HiddenField.value() + 'abc'}}
    F2: {{'123' + #HiddenField.value + 'abc'}}
    
    G1: {{#HiddenField_1}}
    G2: {{#HiddenField_1.#HiddenField_1}}
    G3: {{#HiddenField_1.#HiddenField_2}}    
    G4: {{#HiddenField_1 #HiddenField_2}}    
    G5: {{#HiddenField_1#HiddenField_2}}
        
    X0: <input type="hidden" id="HiddenField" value="Test-HF">
    X1: <input type="hidden" id="HiddenField_1" value="Test-HF_A">
    X2: <input type="hidden" id="HiddenField_2" value="Test-HF_B">
    X3: <input type="hidden" id="HiddenField_3" value="Test-HF_C">

    O1: <span output="{{}}">span-1</span>
    O2: <span output="{{Example.xa}}">span-2</span>
    O3: <span output="{{Example.xa()}}">span-3</span>
    O4: <span output="x{{'xxx'}}">span-4</span>
    O5: <span output="{{'xxx'}}x">span-5</span>
    O6: <span output="x{{'xxx'}}x">span-6</span>
    O7: <span output="{{Example.xb()}}">span-7</span>
  </body>
</html>