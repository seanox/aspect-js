<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Seanox aspect-js test environment</title>
    <style type="text/css">
      body {
        font-family:monospace;
      }
      input {
        display:block;
      }
    </style>
    <script src="../sources/extension.js"></script>
    <script src="../sources/composite.js"></script>
    <script src="../sources/test.js"></script>
    <script src="../sources/testutils.js"></script>
    <script type="text/javascript"> 
        
        var TestModel = {
            listA: ["a", "b", "c"],
            listB: ["d", "e", "f"],
            listC: ["-", "A", "B", "C", "D", "E", "F"]
        };
        
        var tempB = function() {
            return "123";
        }

        Test.create({test:function() {
            Assert.assertEquals("", OutputA1.textContent);            
        }});
        Test.create({test:function() {
            Assert.assertEquals("a:0", window["a:0"].id);
        }});
        Test.create({test:function() {
            Assert.assertEquals("0: a of a,b,c", window["a:0"].value);
        }});
        Test.create({test:function() {
            Assert.assertEquals("a:1", window["a:1"].id);
        }});
        Test.create({test:function() {
            Assert.assertEquals("1: b of a,b,c", window["a:1"].value);
        }});
        Test.create({test:function() {
            Assert.assertEquals("a:2", window["a:2"].id);
        }});
        Test.create({test:function() {
            Assert.assertEquals("2: c of a,b,c", window["a:2"].value);
        }});
        Test.create({test:function() {
            Assert.assertEquals("", OutputA2.textContent);            
        }});

        Test.create({test:function() {
            Assert.assertEquals("123", OutputB1.textContent);            
        }});
        Test.create({test:function() {
            Assert.assertEquals("b:0", window["b:0"].id);
        }});
        Test.create({test:function() {
            Assert.assertEquals("0: d of d,e,f", window["b:0"].value);
        }});
        Test.create({test:function() {
            Assert.assertEquals("b:1", window["b:1"].id);
        }});
        Test.create({test:function() {
            Assert.assertEquals("1: e of d,e,f", window["b:1"].value);
        }});
        Test.create({test:function() {
            Assert.assertEquals("b:2", window["b:2"].id);
        }});
        Test.create({test:function() {
            Assert.assertEquals("2: f of d,e,f", window["b:2"].value);
        }});
        Test.create({test:function() {
            Assert.assertEquals("123", OutputB2.textContent);            
        }});
        Test.create({test:function() {
            var content = document.querySelector("table").outerHTML;
            content = content.replace(/^\s+/mg, "");
            Assert.assertEqualsTemplate("script[type='text/test-1']", content);
        }});
        
        Composite.listen(Composite.EVENT_RENDER_END, function() {
            Test.start();
        });
    </script>
    <script type="text/test-1">
    <table>
      <thead>
        <tr>
          <th>\</th> 
          <th>A</th>
          <th>B</th>
          <th>C</th>
          <th>D</th>
          <th>E</th>
          <th>F</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>1</th>
          <td>A1</td>
          <td>B1</td>
          <td>C1</td>
          <td>D1</td>
          <td>E1</td>
          <td>F1</td>
        </tr>  
        <tr>
          <th>2</th>
          <td>A2</td>
          <td>B2</td>
          <td>C2</td>
          <td>D2</td>
          <td>E2</td>
          <td>F2</td>
        </tr>  
        <tr>
          <th>3</th>
          <td>A3</td>
          <td>B3</td>
          <td>C3</td>
          <td>D3</td>
          <td>E3</td>
          <td>F3</td>
        </tr>  
        <tr>
          <th>4</th>
          <td>A4</td>
          <td>B4</td>
          <td>C4</td>
          <td>D4</td>
          <td>E4</td>
          <td>F4</td>
        </tr>  
        <tr>
          <th>5</th>
          <td>A5</td>
          <td>B5</td>
          <td>C5</td>
          <td>D5</td>
          <td>E5</td>
          <td>F5</td>
        </tr>  
        <tr>
          <th>6</th>
          <td>A6</td>
          <td>B6</td>
          <td>C6</td>
          <td>D6</td>
          <td>E6</td>
          <td>F6</td>
        </tr>  
        <tr>
          <th>7</th>
          <td>A7</td>
          <td>B7</td>
          <td>C7</td>
          <td>D7</td>
          <td>E7</td>
          <td>F7</td>
        </tr>  
      </tbody>
    </table>
  </script>
  </head>
  <body>
    <div id="OutputA1">{{tempA}}</div>
    <div iterate={{tempA:TestModel.listA}}>
      <input id="a:{{tempA.index}}" type="text" value="{{tempA.index}}: {{tempA.item}} of {{tempA.data}}">
    </div>
    <div id="OutputA2">{{tempA}}</div>

    <div id="OutputB1">{{tempB()}}</div>
    <div iterate={{tempB:TestModel.listB}}>
      <input id="b:{{tempB.index}}" type="text" value="{{tempB.index}}: {{tempB.item}} of {{tempB.data}}">
    </div>
    <div id="OutputB2">{{tempB()}}</div>
    
    <table>
      <thead>
        <tr iterate={{tempCol:TestModel.listC}}>
          <th condition="{{not (tempCol.index gt 0)}}">\</th> 
          <th condition="{{tempCol.index gt 0}}">{{tempCol.item}}</th>
        </tr>
      </thead>
      <tbody iterate={{tempRow:TestModel.listC}}>
        <tr iterate={{tempCol:TestModel.listC}}>
          <th condition="{{not (tempCol.index gt 0)}}">{{tempRow.index +1}}</th>
          <td condition="{{tempCol.index gt 0}}">{{tempCol.item + (tempRow.index +1)}}</td>
        </tr>  
      </tbody>
    </table>
  </body>
</html>