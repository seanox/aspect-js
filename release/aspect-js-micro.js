if(void 0!==window.compliant)throw new Error("JavaScript incompatibility detected for: compliant");window.compliant=(context,payload)=>{if(null==context)return payload;if("undefined"!==new Function("return typeof "+context)())throw new Error("JavaScript incompatibility detected for: "+context);return eval(context+" = payload")},(()=>{compliant("Namespace",{get PATTERN_NAMESPACE_SEPARATOR(){return/\./},get PATTERN_NAMESPACE_LEVEL_START(){return/^[_a-z\$][\w\$]*$/i},get PATTERN_NAMESPACE_LEVEL(){return/^[\w\$]+$/},use(...e){if(e.length<=0)return window;_filter(...e);let n=e.length,s=null;return 0<e.length&&"object"==typeof e[0]&&(s=e.shift()),n-=e.length,(e=e.join(".")).split(Namespace.PATTERN_NAMESPACE_SEPARATOR).forEach((e,t,r)=>{var o=0===t&&null===s?Namespace.PATTERN_NAMESPACE_LEVEL_START:Namespace.PATTERN_NAMESPACE_LEVEL;if(!e.match(o))throw new Error("Invalid namespace at level "+(t+1)+(e&&e.trim()?": "+e.trim():""));if(0===t&&null===s){if(void 0!==(s=_populate(s,e))&&!(s instanceof Element))return;s=window}var o=_populate(s,e),a=typeof o;if("undefined"!=a&&"object"!=a)throw new TypeError(`Invalid namespace type at level ${t+1+n}: `+a);(null==o||o instanceof Element)&&(t<r.length-1&&r[t+1].match(/^\d+$/)?s[e]=[]:s[e]={}),s=_populate(s,e)}),s},create(...e){if(e.length<2)throw new Error("Invalid namespace for creation: Namespace and/or value is missing");var t=e.pop(),r=(e=_filter(...e)).pop(),e=Namespace.use(...e);return null===e?null:(e[r]=t,_populate(e,r))},lookup(...t){if(t.length<=0)return window;_filter(...t);var r=t.length;let o=null;0<t.length&&"object"==typeof t[0]&&(o=t.shift()),r-=t.length,t=(t=t.join(".")).split(Namespace.PATTERN_NAMESPACE_SEPARATOR);for(let e=0;e<t.length;e++){var a=t[e],n=e+r===0?Namespace.PATTERN_NAMESPACE_LEVEL_START:Namespace.PATTERN_NAMESPACE_LEVEL;if(!a.match(n))throw new Error("Invalid namespace at level "+(e+1+r)+(a&&a.trim()?": "+a.trim():""));if(0===e&&null===o){if(void 0!==(o=_populate(o,a)))continue;o=window}if(void 0===(o=_populate(o,a))||null===o)return o;if(o instanceof Element)return}return o},exists(...e){return!(e.length<1)&&Object.usable(Namespace.lookup(...e))}});const _filter=(...e)=>{const r=[];return e.forEach((e,t)=>{if(0===t&&"object"!=typeof e&&"string"!=typeof e)throw new TypeError(`Invalid namespace at level ${t+1}: `+typeof e);if(0===t&&null===e)throw new TypeError(`Invalid namespace at level ${t+1}: null`);if(0<t&&"string"!=typeof e&&"number"!=typeof e)throw new TypeError(`Invalid namespace at level ${t+1}: `+typeof e);e="string"==typeof e?e.split(Namespace.PATTERN_NAMESPACE_SEPARATOR):[e],r.push(...e)}),r},_populate=(namespace,level)=>{if(namespace&&namespace!==window)return namespace[level];try{return eval(`typeof ${level} !== "undefined" ? ${level} : undefined`)}catch(error){if(error instanceof ReferenceError&&namespace===window)return window[level];throw error}}})(),(()=>{const r=Element.prototype.appendChild;Element.prototype.appendChild=function(t,e){if(e&&(this.innerHTML=""),t instanceof Node||!(Array.isArray(t)||t instanceof NodeList||Symbol&&Symbol.iterator&&t&&(t[Symbol.iterator],1)))return r.call(this,t);t=Array.from(t);for(let e=0;e<t.length;e++)r.call(this,t[e]);return t}})(),compliant("Math.unique",t=>{(t=t||16)<0&&(t=16);let r="";for(let e=0;e<t;e++){var o=Math.floor(Math.random()*Math.floor(26));Math.floor(Math.random()*Math.floor(26))%2==0?r+=String(o%10):r+=String.fromCharCode(65+o)}return r}),(()=>{compliant("Math.serial",()=>e.toString());const r=-9466848e5,e={timing:(new Date).getTime()+r,number:0,toString(){var e=(new Date).getTime()+r,e=(this.number=this.timing===e?this.number+1:0,this.timing=e,this.timing.toString(36)),t=this.number.toString(36);return(e.length.toString(36)+e+t.length.toString(36)+t).toUpperCase()}}})(),compliant("RegExp.quote",e=>Object.usable(e)?String(e).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&"):null),compliant("String.prototype.capitalize",function(){return this.length<=0?this:this.charAt(0).toUpperCase()+this.slice(1)}),compliant("String.prototype.uncapitalize",function(){return this.length<=0?this:this.charAt(0).toLowerCase()+this.slice(1)}),compliant("String.prototype.encodeHex",function(){let r="";for(let t=0;t<this.length;t++){let e=Number(this.charCodeAt(t)).toString(16).toUpperCase();for(;e.length<2;)e="0"+e;r+=e}return"0x"+r}),compliant("String.prototype.decodeHex",function(){let t=this,r=(t.match(/^0x/)&&(t=t.substring(2)),"");for(let e=0;e<t.length;e+=2)r+=String.fromCharCode(parseInt(t.substring(e,2),16));return r}),compliant("String.prototype.encodeBase64",function(){try{return btoa(encodeURIComponent(this).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))}catch(e){throw new Error("Malformed character sequence")}}),compliant("String.prototype.decodeBase64",function(){try{return decodeURIComponent(atob(this).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch(e){throw new Error("Malformed character sequence")}}),compliant("String.prototype.encodeHtml",function(){var e=document.createElement("div");return e.textContent=this,e.innerHTML}),compliant("String.prototype.hashCode",function(){if(void 0===this.hash||0===this.hash){let t=this.hash=0;for(let e=0;e<this.length;e++){var r=31*this.hash+this.charCodeAt(e);Number.isSafeInteger(r)?this.hash=r:(t++,this.hash=Number.MAX_SAFE_INTEGER-this.hash+this.charCodeAt(e))}this.hash=Math.abs(this.hash).toString(36),this.hash=this.hash.length.toString(36)+this.hash,this.hash=(this.hash+t.toString(36)).toUpperCase()}return this.hash}),compliant("String.prototype.unescape",function(){let text=this.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/^(["'])/,"$1").replace(/([^\\])((?:\\{2})*)(?=["'])/g,"$1$2\\");return eval(`"${text}"`)}),compliant("window.serial"),Object.defineProperty(window,"serial",{value:Math.serial()}),compliant("window.location.pathcontext"),Object.defineProperty(window.location,"pathcontext",{value:window.location.pathname.replace(/\/([^\/]*\.[^\/]*){0,}$/g,"")||"/"}),compliant("window.location.combine",(...e)=>"/"+e.join("/").replace(/[\/\\]+/g,"/").replace(/(^\/+)|(\/+$)/g,"")),(()=>{const i=window.location.combine(window.location.pathcontext,"/data"),c=/^(?:([a-z]+):\/+)(\/((\w+)|(\w+(\-+\w+)+)))+$/,u=/^\s*text\s*\/\s*javascript\s*$/i,n=/(^\w+$)|(^((\w+\-+(?=\w))+)\w*$)/,l=(compliant("DataSource",{get locale(){return DataSource.locales?DataSource.locales.selection:null},localize(e){if(!DataSource.data||!DataSource.locales)throw new Error("Locale not available");if("string"!=typeof e)throw new TypeError("Invalid locale: "+typeof e);if(!(e=(e||"").trim().toLowerCase())||!DataSource.locales.includes(e))throw new Error("Locale not available");DataSource.locales.selection=e},transform(e,t,r){if("string"==typeof e&&e.match(c)&&(e=DataSource.fetch(e)),"string"==typeof t&&t.match(c)&&(t=DataSource.fetch(t)),!(e instanceof XMLDocument))throw new TypeError("Invalid xml document");if(!(t instanceof XMLDocument))throw new TypeError("Invalid xml stylesheet");var o,a,n=new XSLTProcessor;if(n.importStylesheet(t),r&&"object"==typeof r)for([o,a]of"function"!=typeof r[Symbol.iterator]?Object.entries(r):r)"function"!=typeof r[o]&&n.setParameter(null,o,a);let s=e.evaluate("string(/*/@escape)",e,null,XPathResult.ANY_TYPE,null).stringValue;s=!!s.match(/^yes|on|true|1$/i);t=n.transformToDocument(e.clone());let i=t.querySelectorAll(s?"*":"*[escape]");i.forEach(e=>{var t;(s||(e.getAttribute("escape")||"on").match(/^yes|on|true|1$/i))&&(t=e.innerHTML).indexOf("<")<0&&t.indexOf(">")<0&&(e.innerHTML=e.textContent),e.removeAttribute("escape")}),(i=t.querySelectorAll("script[type],script:not([type])")).forEach(e=>{e.hasAttribute("type")&&!(e.getAttribute("type")||"").match(u)||e.setAttribute("type","composite/javascript")}),i=t.childNodes,t.body?i=t.body.childNodes:t.firstChild&&t.firstChild.nodeName.match(/^transformiix\b/i)&&(i=t.firstChild.childNodes);var l=document.createDocumentFragment();i=Array.from(i);for(let e=0;e<i.length;e++)l.appendChild(i[e]);return l},fetch(e,t,r){if("string"!=typeof e||!e.match(c))throw new Error("Invalid locator: "+String(e));var o=e.match(c)[1],a=e.match(c)[2];if(1===arguments.length){let e=i+"/"+DataSource.locale+"/"+a+"."+o;a=(e=e.replace(/\/+/g,"/")).hashCode();if(l.hasOwnProperty(a))return l[a];var n=new XMLHttpRequest;if(n.overrideMimeType("application/xslt+xml"),n.open("GET",e,!1),n.send(),200!==n.status)throw new Error(`HTTP status ${n.status} for `+n.responseURL);return e=n.responseXML,(l[a]=e).clone()}if(!o.match(/^xml$/)&&t)throw new Error("Transformation is not supported for this locator");n=DataSource.fetch(e);if(!t)return n.clone();let s=e.replace(/(^((\w+\-+(?=\w))+)\w*)|(^\w+)/,"xslt");if("boolean"==typeof t||"string"==typeof(s=t)&&s.match(c))return DataSource.transform(n,DataSource.fetch(s),r);throw new Error("Invalid style: "+String(s))},collect(...e){if(e.length<=0)return null;let t=[],r="collection";if(2===e.length&&"string"==typeof e[0]&&Array.isArray(e[1])){if(!e[0].match(n))throw new TypeError("Invalid collector");r=e[0],t=Array.from(e[1])}else t=1===e.length&&Array.isArray(e[0])?t.concat(e[0]):Array.from(e);let o=r.hashCode()+":"+t.join().hashCode();if(t.forEach(e=>o+=":"+String(e).hashCode()),l.hasOwnProperty(o))return l[o].clone();const a=document.implementation.createDocument(null,r,null);return t.forEach(e=>{if("string"!=typeof e)throw new TypeError("Invalid collection entry");a.documentElement.appendChild(DataSource.fetch(e).documentElement.cloneNode(!0))}),(l[o]=a).clone()}}),compliant("XMLDocument.prototype.clone",function(){var e=this.implementation.createDocument(null,null);return e.appendChild(e.importNode(this.documentElement,!0)),e}),{});Object.defineProperty(DataSource,"cache",{value:{}}),Object.defineProperty(DataSource,"locales",{value:[],enumerable:!0});let r=[];if([navigator.language].concat(navigator.languages||[]).forEach(e=>{e=e.toLowerCase().trim(),r.push(e),e=e.replace(/-.*$/,""),r.includes(e)||r.push(e)}),r.length<=0)throw new Error("Locale not available");var o=new XMLHttpRequest;if(o.overrideMimeType("text/plain"),o.open("GET",i+"/locales.xml",!1),o.send(),Object.defineProperty(DataSource,"data",{value:200===o.status?(new DOMParser).parseFromString(o.responseText,"text/xml"):null}),!DataSource.data&&404!==o.status)throw new Error("Locale not available");if(DataSource.data){o=DataSource.data;let t=o.evaluate("/locales/*[@default]",o,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);for(let e=t.iterateNext();e;e=t.iterateNext()){var a=e.nodeName.toLowerCase();DataSource.locales.includes(a)||DataSource.locales.push(a)}for(let e=(t=o.evaluate("/locales/*",o,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null)).iterateNext();e;e=t.iterateNext()){var s=e.nodeName.toLowerCase();DataSource.locales.includes(s)||DataSource.locales.push(s)}if(DataSource.locales.length<=0)throw new Error("Locale not available");r.push(DataSource.locales[0]),r=r.filter(e=>DataSource.locales.includes(e)),DataSource.locales.selection=(r.length?r:DataSource.locales)[0]}})(),(()=>{compliant("Scripting",{eval(a){let n,r;for(let o=0;o<a.length;o++){let e=a.charAt(o);if(!(o>=a.length)||n){if(r<0){if("?"===e){r=1;var t="_tolerate(()=>";a=a.substring(0,o)+t+a.substring(o+1),o+=t.length;continue}e.match(/\s/)||(r=0)}if("\\"===e)o++;else if(n)(n===a.substring(o,o+n.length)||"\n"===n&&"\r"===e)&&(n=null);else switch(e){case"/":"/"===(e=a.charAt(o+1))&&(n="\n"),"*"===e&&(n="*/");continue;case"(":0<r?r++:r=-1;continue;case")":if(r<=0)continue;if(0<--r)continue;a=a.substring(0,o)+")"+a.substring(o),o+=")".length;continue;case"'":case'"':case"`":n=e;continue;case"#":let t=a.substring(o-1,o+10);var s=t.match(/(^|\W)(#(?:import|export|module|use))\s/);if(s){let r=s[2];for(let e=o+r.length;e<=a.length;e++)if((t=a.charAt(e)).match(/[;\r\n]/)||!(e<a.length)){let t=a.substring(o+r.length,e).trim();switch(r){case"#import":if(!t.match(/^(\w+(\/\w+)*)(\s+(\w+(\/\w+)*))*$/))throw new Error(("Invalid macro: #import "+t).trim());var i=t.split(/\s+/).map(e=>'"'+e+'"');r="_import(...["+i.join(",")+"])";break;case"#export":const l=[],n=/^([_a-z]\w*)(?:@((?:[_a-z]\w*)(?:\.[_a-z]\w*)*))?$/i;t.split(/\s+/).forEach(e=>{e=e.match(n);if(!e)throw new Error(("Invalid macro: #export "+t).trim());t=[e[1],'"'+e[1]+'"'],e[2]&&t.push('"'+e[2]+'"'),l.push("["+t.join(",")+"]")}),r="_export(...["+l.join(",")+"])";break;case"#module":r=(r=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`").trim())&&"console.debug(`Module: "+r+"`)";break;case"#use":if(!t.match(/^([_a-z]\w*)(\.[_a-z]\w*)*(\s+([_a-z]\w*)(\.[_a-z]\w*)*)*$/i))throw new Error(("Invalid macro: #use "+t).trim());i=t.split(/\s+/).map(e=>'"'+e+'"');r="_use(...["+i.join(",")+"])"}a=a.substring(0,o-1)+(s[1]||"")+r+a.substring(e),o+=r.length;break}}continue;default:continue}}}return this.run(a)},run(script){if(script.trim())return eval(script)}});const _import=(...e)=>{e.forEach(e=>Composite.load(Composite.MODULES+"/"+e+".js",!0))},_export=(...e)=>{e.forEach(e=>{let t=window;(e[2]?e[2].split(/\./):[]).forEach(e=>{void 0===t[e]&&(t[e]={}),t=t[e]});var r=t[e[1]];if(!(void 0===r||r instanceof Element||r instanceof HTMLCollection))throw new Error("Context for export is already in use: "+e[1]+(e[2]?"@"+e[2]:""));t[e[1]]=e[0]})},_use=(...e)=>{e.forEach(e=>Namespace.use(e))},_tolerate=e=>{try{return e.call(window)}catch(e){return!1}}})(),(()=>{compliant("Expression",{eval(...e){let t;1<e.length?t=String(e[1]):0<e.length&&(t=String(e[0]));let r,o=(r=1<e.length&&e[0]?String(e[0]):r)?a.get(r):null;o=o||c(n,t),r&&a.set(r,o);try{return Scripting.run(o)}catch(e){return console.error(e.message+"\n\t"+o),new Error(e.message+" in "+o)}}});const a=new Map,n=0,s=["and","&&","or","||","not","!","eq","==","eeq","===","ne","!=","nee","!==","lt","<","gt",">","le","<=","ge",">=","empty","!","div","/","mod","%"],i=new RegExp("(^|[^\\w\\.])("+s.filter((e,t)=>t%2==0).join("|")+")(?=[^\\w\\.]|$)","ig"),l=(e,r)=>e.replace(/[\t\r](\d+)\n/g,(e,t)=>r[t]),c=(t,r,o=[])=>{switch(t){case n:let e=r=r.replace(/[\r\n]/g," ").trim();if(!(e=(e=e.replace(/\{\{(.*?)\}\}/g,(e,t)=>c(3,t,o))).replace(/((?:[^\n]+$)|(?:[^\n]+(?=\r)))/g,(e,t)=>c(2,t,o))).match(/^(\r(\d+)\n)*$/))throw Error("Error in the expression structure\n\t"+r);const a=!r.startsWith("{{")||!r.endsWith("}}")||r.substring(2).includes("{{")||r.substring(0,r.length-2).includes("}}");return e=(e=(e=(e=(e=(e=(e=e.replace(/(?:\r(\d+)\n)/g,(e,t)=>a?"\r("+o[t]+")\n":"\r"+o[t]+"\n")).replaceAll("\r\\u0022\n",'\\"')).replaceAll("\r\\u0027\n","\\'")).replaceAll("\r\\u0060\n","\\`")).replace(/(\n\r)+/g," + ")).replace(/(^\r)|(\n$)/g,"")).replace(/[\r\n]+/g," ");case 2:r='"'+r+'"';case 1:return o.push(r),"\r"+(o.length-1)+"\n";case 3:if(!(r=r.trim()))return"";if((r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/(^|[^\\])((?:\\{2})*)(\\\")/g,"$1$2\r\\u0022\n")).replace(/(^|[^\\])((?:\\{2})*)(\\\')/g,"$1$2\r\\u0027\n")).replace(/(^|[^\\])((?:\\{2})*)(\\\`)/g,"$1$2\r\\u0060\n")).replace(/((['\"\`]).*?\2)/gs,(e,t)=>c(1,t,o))).replace(/\t+/g," ")).replace(i,(e,t,r)=>t+s[s.indexOf(r.toLowerCase())+1])).replace(/(^|[^\w\.])(true|false|null|undefined|new|instanceof|typeof)(?=[^\w\.]|$)/gi,(e,t="",r="")=>t+r.toLowerCase())).replace(/#\[([^\[\]]*)\]/g,(e,t)=>(t=t.replaceAll(/\/{2}(.*?)\/{2}/gs,'"+($1)+"'),o.push(l('document.getElementById("'+t+'")',o)),"\r"+(o.length-1)+"\n"))).replace(/#([_a-z]\w*)/gi,(e,t)=>(o.push(l('document.getElementById("'+t+'")',o)),"\r"+(o.length-1)+"\n"))).match(/\(\s*\?/))for(let e=-1;e<o.length;)e=o.length,r=r.replace(/(\([^\(\)]*\))/g,e=>(e=e.replace(/^\( *\?+ *(.*?) *\)$/s,(e,t)=>"_tolerate(()=>("+t+"))"),o.push(l(e,o)),"\t"+(o.length-1)+"\n"));return r=r.replace(/ {2,}/g," "),o.push(l(r,o)),"\r"+(o.length-1)+"\n";default:throw new Error("Unexpected script type")}}})(),(()=>{compliant("Composite",{get MODULES(){return window.location.combine(window.location.pathcontext,"/modules")},get ATTRIBUTE_COMPOSITE(){return"composite"},get ATTRIBUTE_CONDITION(){return"condition"},get ATTRIBUTE_EVENTS(){return"events"},get ATTRIBUTE_ID(){return"id"},get ATTRIBUTE_IMPORT(){return"import"},get ATTRIBUTE_INTERVAL(){return"interval"},get ATTRIBUTE_ITERATE(){return"iterate"},get ATTRIBUTE_MESSAGE(){return"message"},get ATTRIBUTE_NOTIFICATION(){return"notification"},get ATTRIBUTE_NAME(){return"name"},get ATTRIBUTE_OUTPUT(){return"output"},get ATTRIBUTE_RENDER(){return"render"},get ATTRIBUTE_RELEASE(){return"release"},get ATTRIBUTE_STRICT(){return"strict"},get ATTRIBUTE_TEXT(){return"text"},get ATTRIBUTE_TYPE(){return"type"},get ATTRIBUTE_VALIDATE(){return"validate"},get ATTRIBUTE_VALUE(){return"value"},get PATTERN_ATTRIBUTE_ACCEPT(){return/^(composite|condition|events|id|import|interval|iterate|message|notification|output|release|render|strict|validate)$/i},get PATTERN_ATTRIBUTE_STATIC(){return/^(composite|id)$/i},get PATTERN_EXPRESSION_CONTAINS(){return/\{\{(.|\r|\n)*?\}\}/g},get PATTERN_EXPRESSION_CONDITION(){return/^\s*\{\{\s*(([^}]|(}(?!})))*?)\s*\}\}\s*$/i},get PATTERN_EXPRESSION_VARIABLE(){return/^\s*\{\{\s*((?:(?:_*[a-z])|(?:_\w*))\w*)\s*:\s*(([^}]|(}(?!})))*?)\s*\}\}\s*$/i},get PATTERN_ELEMENT_IGNORE(){return/script|style/i},get PATTERN_SCRIPT(){return/script/i},get PATTERN_COMPOSITE_SCRIPT(){return/^composite\/javascript$/i},get PATTERN_COMPOSITE_ID(){return/^([_a-z]\w*)(?:@([_a-z]\w*(?::[_a-z]\w*)*))?$/i},get PATTERN_ELEMENT_ID(){return/^([_a-z]\w*)(?::(\w+(?::\w+)*))?(?:#(\w+))?(?:@([_a-z]\w*(?::[_a-z]\w*)*))?$/i},get PATTERN_CUSTOMIZE_SCOPE(){return/[_a-z]([\w-]*\w)?$/i},get PATTERN_DATASOURCE_URL(){return/^\s*xml:\s*(\/\S+)\s*(?:\s*(?:xslt|xsl):\s*(\/\S+))*$/i},get PATTERN_EVENT(){return/^([A-Z][a-z]+)+$/},get EVENT_RENDER_START(){return"RenderStart"},get EVENT_RENDER_NEXT(){return"RenderNext"},get EVENT_RENDER_END(){return"RenderEnd"},get EVENT_MOUNT_START(){return"MountStart"},get EVENT_MOUNT_NEXT(){return"MountNext"},get EVENT_MOUNT_END(){return"MountEnd"},get EVENT_MODULE_LOAD(){return"ModuleLoad"},get EVENT_MODULE_DOCK(){return"ModuleDock"},get EVENT_MODULE_READY(){return"ModuleReady"},get EVENT_MODULE_UNDOCK(){return"ModuleUndock"},get EVENT_HTTP_START(){return"HttpStart"},get EVENT_HTTP_PROGRESS(){return"HttpProgress"},get EVENT_HTTP_RECEIVE(){return"HttpReceive"},get EVENT_HTTP_LOAD(){return"HttpLoad"},get EVENT_HTTP_ABORT(){return"HttpAbort"},get EVENT_HTTP_TIMEOUT(){return"HttpTimeout"},get EVENT_HTTP_ERROR(){return"HttpError"},get EVENT_HTTP_END(){return"HttpEnd"},get EVENT_ERROR(){return"Error"},get EVENTS(){return"abort after|print animation|end animation|iteration animation|start before|print before|unload blur can|play can|play|through change click context|menu copy cut dbl|click drag drag|end drag|enter drag|leave drag|over drag|start drop duration|change ended error focus focus|in focus|out hash|change input invalid key|down key|press key|up load loaded|data loaded|meta|data load|start message mouse|down mouse|enter mouse|leave mouse|move mouse|over mouse|out mouse|up mouse|wheel offline online open page|hide page|show paste pause play playing popstate progress rate|change resize reset scroll search seeked seeking select show stalled storage submit suspend time|update toggle touch|cancel touch|end touch|move touch|start transition|end unload volume|change waiting wheel"},get PATTERN_EVENT_FUNCTIONS(){return e=Composite.EVENTS.replace(/(?:\||\b)(\w)/g,(e,t)=>t.toUpperCase()),new RegExp("^on("+e.replace(/\s+/g,"|")+")");var e},get PATTERN_EVENT_NAMES(){return Composite.EVENTS.replace(/(?:\||\b)(\w)/g,(e,t)=>t.toUpperCase()).split(/\s+/)},get PATTERN_EVENT_FILTER(){return Composite.EVENTS.replace(/(?:\||\b)(\w)/g,(e,t)=>t.toUpperCase()).toLowerCase().split(/\s+/)},lock(e,t){if(e.queue=e.queue||[],void 0===e.lock||!1===e.lock)if(e.lock={ticks:1,selector:t,queue:[],share(){return this.ticks++,this},release(){if(this.ticks--,!(0<this.ticks)){if(e===Composite.render){let e=this.selector;e instanceof Node&&e.nodeType===Node.TEXT_NODE&&(r=e.ordinal(),(r=_render_meta[r]||{}).condition)&&r.condition.element&&r.condition.marker===this.selector&&(e=r.condition.element);let t=[];"string"==typeof e?(r=document.querySelectorAll(e),Array.from(r).forEach(e=>{t.includes(e)||t.push(e);e=e.querySelectorAll("*");Array.from(e).forEach(e=>{t.includes(e)||t.push(e)})})):e instanceof Element&&(t=e.querySelectorAll("*"),t=[e].concat(Array.from(t))),t.forEach(e=>Composite.mount(e)),Composite.fire(Composite.EVENT_RENDER_END,this.selector)}else{if(e!==Composite.mount)throw new Error("Invalid context: "+e);Composite.fire(Composite.EVENT_MOUNT_END,this.selector)}var r=e.queue.shift();r&&Composite.asynchron(e,r),e.lock=!1}}},e===Composite.render)Composite.fire(Composite.EVENT_RENDER_START,t);else{if(e!==Composite.mount)throw new Error("Invalid context: "+e);Composite.fire(Composite.EVENT_MOUNT_START,t)}else if(e===Composite.render)Composite.fire(Composite.EVENT_RENDER_NEXT,t);else{if(e!==Composite.mount)throw new Error("Invalid context: "+e);Composite.fire(Composite.EVENT_MOUNT_NEXT,t)}return e.lock},listen(e,t){if("string"!=typeof e)throw new TypeError("Invalid event: "+typeof e);if("function"!=typeof t&&null!=t)throw new TypeError("Invalid callback: "+typeof t);if(!e.match(Composite.PATTERN_EVENT))throw new Error("Invalid event"+(e.trim()?": "+e:""));e=e.toLowerCase(),_listeners.has(e)&&Array.isArray(_listeners.get(e))||_listeners.set(e,[]),_listeners.get(e).push(t)},fire(e,...t){var r;e=(e||"").trim(),_listeners.size<=0||!e||(r=_listeners.get(e.toLowerCase()),Array.isArray(r)&&(t=[e,...t],r.forEach(e=>e(...t))))},asynchron(e,...t){window.setTimeout((e,...t)=>{e(...t)},0,e,...t)},validate(o,a){if((arguments.length<2||!1!==a)&&(a=!0),"string"==typeof o){if(!(o=o.trim()))return;let r=Array.from(document.querySelectorAll(o));return r.forEach((e,t)=>{r[t]=Composite.validate(e,a),void 0===r[t]?r[t]=0:r[t]=!0===r[t]?1:2}),(r=r.join("")).match(/^1+$/)?!0:!r.match(/2/)&&void 0}if(o instanceof Element){var r=o.ordinal(),n=_render_meta[r];let t=!0;"function"==typeof o.setCustomValidity&&o.setCustomValidity(""),"function"==typeof o.checkValidity&&(t=o.checkValidity());var s,i=_mount_lookup(o);if(i instanceof Object){let e;o instanceof Element&&(o.tagName.match(/^input$/i)&&o.type.match(/^radio|checkbox/i)?e=o.checked:o.tagName.match(/^select/i)&&"selectedIndex"in o?e=o.options[o.selectedIndex].value:Composite.ATTRIBUTE_VALUE in o&&(e=o[Composite.ATTRIBUTE_VALUE])),n.attributes.hasOwnProperty(Composite.ATTRIBUTE_VALIDATE)&&!0===t&&!0!==a&&"function"==typeof i.model[Composite.ATTRIBUTE_VALIDATE]&&(s=i.model[Composite.ATTRIBUTE_VALIDATE],t=void 0!==e?s.call(i.model,o,e):s.call(i.model,o))}if(!0!==t){let e;"string"!=typeof(e="string"==typeof t&&t.trim()?t.trim():e)&&((e=n.attributes.hasOwnProperty(Composite.ATTRIBUTE_MESSAGE)?String(n.attributes[Composite.ATTRIBUTE_MESSAGE]||""):e)||"").match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(e=String(Expression.eval(r+":"+Composite.ATTRIBUTE_MESSAGE,e))),"function"==typeof o.setCustomValidity&&Object.usable(e)&&(o.setCustomValidity(e),n.attributes.hasOwnProperty(Composite.ATTRIBUTE_NOTIFICATION))&&"function"==typeof o.reportValidity&&o.reportValidity()}if(void 0!==t)return t}},mount(t,r){if(Composite.mount.queue=Composite.mount.queue||[],Composite.mount.lock&&Composite.mount.lock!==r)Composite.mount.queue.includes(t)||Composite.mount.queue.push(t);else{r=Composite.lock(Composite.mount,t);try{if("string"==typeof t)return(t=t.trim())?void document.querySelectorAll(t).forEach(e=>Composite.mount(e,r.share())):void 0;if(t instanceof Element&&!Composite.mount.queue.includes(t)&&!t.nodeName.match(Composite.PATTERN_ELEMENT_IGNORE)&&(Composite.mount.stack=Composite.mount.stack||[],!Composite.mount.stack.includes(t))){var e=t.ordinal(),o=_render_meta[e];if(o instanceof Object){var a=o.attributes[Composite.ATTRIBUTE_ID];let r=o.attributes.hasOwnProperty(Composite.ATTRIBUTE_EVENTS)?o.attributes[Composite.ATTRIBUTE_EVENTS]:"";r=(r=(r=String(r||"")).toLowerCase().split(/\s+/)).filter((e,t,r)=>Composite.PATTERN_EVENT_FILTER.includes(e)&&r.indexOf(e)===t);var n=_mount_lookup(t);if(n instanceof Object&&a){let t=n.model;for(var s in t=void 0!==n.target?"object"==typeof n.target?n.target:null:t)"function"==typeof t[s]&&s.match(Composite.PATTERN_EVENT_FUNCTIONS)&&(s=s.substring(2).toLowerCase(),r.includes(s)||r.push(s));let e=t?Object.getPrototypeOf(t):null;for(;e;)Object.getOwnPropertyNames(e).forEach(e=>{"function"==typeof t[e]&&e.match(Composite.PATTERN_EVENT_FUNCTIONS)&&(e=e.substring(2).toLowerCase(),r.includes(e)||r.push(e))}),e=Object.getPrototypeOf(e)}if(Composite.mount.stack.push(t),r.forEach(e=>{t.addEventListener(e.toLowerCase(),o=>{var a=o.currentTarget,t=a.ordinal(),n=_render_meta[t],s=o.type.toLowerCase();if(Composite.PATTERN_EVENT_FILTER.includes(s)){s=Composite.PATTERN_EVENT_FILTER.indexOf(s),s=Composite.PATTERN_EVENT_NAMES[s];let r;var i=Composite.validate(a,!1),l=_mount_lookup(a);if(l instanceof Object){let t;if(a instanceof Element&&(a.tagName.match(/^input$/i)&&a.type.match(/^radio|checkbox/i)?t=a.checked:a.tagName.match(/^select/i)&&"selectedIndex"in a?t=a.options[a.selectedIndex].value:Composite.ATTRIBUTE_VALUE in a&&(t=a[Composite.ATTRIBUTE_VALUE])),!n.attributes.hasOwnProperty(Composite.ATTRIBUTE_STRICT)||!0===i){a=e=>{var t=typeof e;return void 0!==e&&("object"==t&&null===e||"boolean"==t||"number"==t||"string"==t)};a(l.target)?l.target=t:"object"==typeof l.target?a(l.target[Composite.ATTRIBUTE_VALUE])&&(l.target[Composite.ATTRIBUTE_VALUE]=t):void 0===l.target&&a(l.model[Composite.ATTRIBUTE_VALUE])&&(l.model[Composite.ATTRIBUTE_VALUE]=t);let e=l.model;(e=void 0!==l.target?l.target&&"object"==typeof l.target?l.target:null:e)&&"function"==typeof e["on"+s]&&(r=e["on"+s].call(e,o))}}let e=n.attributes.hasOwnProperty(Composite.ATTRIBUTE_EVENTS)?n.attributes[Composite.ATTRIBUTE_EVENTS]:"";if((e=(e=String(e||"")).toLowerCase().split(/\s+/)).includes(s.toLowerCase())){let e=n.attributes.hasOwnProperty(Composite.ATTRIBUTE_RENDER)?n.attributes[Composite.ATTRIBUTE_RENDER]:"";((e=String(e||""))||"").match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(e=Expression.eval(t+":"+Composite.ATTRIBUTE_RENDER,e)),Composite.render(e)}return l instanceof Object&&((void 0!==r&&!r||void 0!==i&&!0!==i)&&o.preventDefault(),void 0!==r)?r:void 0}})}),n&&n.target&&a){let e=n.target;void 0!==(e=n.target instanceof Object?Composite.ATTRIBUTE_VALUE in n.target?n.target.value:void 0:e)&&(t.tagName.match(/^input$/i)&&t.type.match(/^radio|checkbox/i)?t.checked=e:Composite.ATTRIBUTE_VALUE in t&&(t[Composite.ATTRIBUTE_VALUE]=e))}}}}finally{r.release()}}},customize(...e){let t;if("string"==typeof(t=0<e.length?e[0]:t)&&1<e.length&&"string"==typeof e[1]&&t.match(/^@ATTRIBUTES-STATICS$/i)){const o=[];(e[1]||"").trim().split(/\s+/).forEach(e=>{e=e.toLowerCase(),_statics.has(e)||e.match(Composite.PATTERN_ATTRIBUTE_ACCEPT)||(_statics.add(e),o.push(e))});const a=t=>{if(t instanceof Element){var e=t.ordinal();const r=_render_meta[e];r&&(o.forEach(e=>{r.statics=r.statics||{},r.statics.hasOwnProperty[e]&&void 0!==r.statics[e]||(t.hasAttribute(e)?r.statics[e]=t.getAttribute(e):r.statics[e]=null)}),Array.from(t.childNodes).forEach(e=>a(e)))}};void a(document.body)}else if("function"==typeof t&&1===e.length)_acceptors.add(t);else{if("string"!=typeof t)throw new TypeError("Invalid scope: "+typeof t);var r,e=1<e.length?e[1]:null;if("function"!=typeof e&&null!=e)throw new TypeError("Invalid callback: "+typeof e);if((t=t.trim()).length<=0)throw new Error("Invalid scope");t.match(Composite.PATTERN_CUSTOMIZE_SCOPE)?null===e?_macros.delete(t.toLowerCase()):_macros.set(t.toLowerCase(),e):(r=t.toLowerCase().hashCode(),null===e?_selectors.delete(r):_selectors.set(r,{selector:t,callback:e}))}},render(selector,lock){if(Composite.render.queue=Composite.render.queue||[],selector||!(Composite.render.queue.length<=0))if(Composite.render.lock&&Composite.render.lock!==lock)Composite.render.queue.includes(selector)||Composite.render.queue.push(selector),Composite.asynchron(Composite.render);else{if(selector=selector||Composite.render.queue[0],selector instanceof Element&&!_render_meta[selector.ordinal()]){let id=selector.getAttribute(Composite.ATTRIBUTE_ID)||"";id.match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(id=Expression.eval(selector.ordinal()+":"+Composite.ATTRIBUTE_ID,id),selector.setAttribute(Composite.ATTRIBUTE_ID,id))}lock=Composite.lock(Composite.render,selector);const origin=selector;try{if("string"==typeof selector){if(selector=selector.trim(),!selector)return;const nodes=document.querySelectorAll(selector);void nodes.forEach(e=>Composite.render(e,lock.share()))}else if(selector instanceof Node){const macro=_macros.get(selector.nodeName.toLowerCase());if(!macro||!1!==macro(selector)){if(selector.parentNode)for(const[key,macro]of _selectors){const nodes=selector.parentNode.querySelectorAll(macro.selector);if(Array.from(nodes).includes(selector)&&!1===macro.callback(selector))return}let serial=selector.ordinal(),object=_render_meta[serial];if(!object&&(_acceptors.forEach(e=>e.call(null,selector)),object={serial:serial,element:selector,attributes:{}},_render_meta[serial]=object,selector instanceof Element)&&selector.attributes){if(Array.from(selector.attributes).forEach(e=>{((e={name:e.name.toLowerCase(),value:(e.value||"").trim()}).value.match(Composite.PATTERN_EXPRESSION_CONTAINS)||e.name.match(Composite.PATTERN_ATTRIBUTE_ACCEPT)||_statics.has(e.name))&&(!e.name.match(Composite.PATTERN_ATTRIBUTE_ACCEPT)||e.name.match(Composite.PATTERN_ATTRIBUTE_STATIC)||_statics.has(e.name)||e.name===Composite.ATTRIBUTE_RELEASE||selector.removeAttribute(e.name),object.attributes[e.name]=e.value,e.value.match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(e.name.match(Composite.PATTERN_ATTRIBUTE_STATIC)||e.name===Composite.ATTRIBUTE_ID||e.name===Composite.ATTRIBUTE_EVENTS||_statics.has(e.name))&&(e.value=Expression.eval(selector.ordinal()+":"+e.name,e.value)),!e.name.match(Composite.PATTERN_ATTRIBUTE_STATIC)&&e.name!==Composite.ATTRIBUTE_ID&&e.name!==Composite.ATTRIBUTE_EVENTS||(object.attributes[e.name]=e.value),object.statics=object.statics||{},_statics.has(e.name)&&(object.statics[e.name]=e.value),e.name.match(Composite.PATTERN_ATTRIBUTE_STATIC)||e.name===Composite.ATTRIBUTE_ID||e.name===Composite.ATTRIBUTE_EVENTS||_statics.has(e.name))&&selector.setAttribute(e.name,e.value)}),object.attributes.hasOwnProperty(Composite.ATTRIBUTE_CONDITION)){const expression=(object.attributes[Composite.ATTRIBUTE_CONDITION]||"").trim();if(!expression.match(Composite.PATTERN_EXPRESSION_CONDITION))throw new Error("Invalid condition"+(expression?": "+expression:""));const marker=document.createTextNode(""),template=selector.cloneNode(!0),attributes=object.attributes;return object={serial:marker.ordinal(),element:marker,attributes:attributes,condition:{expression:expression,template:template,marker:marker,element:null,attributes:attributes,complete:!1,share:null}},_render_meta[object.serial]=object,delete _render_meta[serial],selector.parentNode.replaceChild(marker,selector),void Composite.render(marker,lock.share())}object.attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)&&Composite.include(selector)}if(!object.hasOwnProperty("condition")||object.condition.share!==lock.ordinal())if(object.hasOwnProperty("condition")&&Math.abs(object.condition.share||0)!==lock.ordinal()){object.condition.share=-lock.ordinal();const condition=object.condition,expression=Expression.eval(serial+":"+Composite.ATTRIBUTE_CONDITION,condition.expression);if(selector.nodeValue=expression instanceof Error?expression:"",!0!==expression)return condition.element&&condition.element.parentNode&&condition.element.parentNode.removeChild(condition.element),condition.element=null,void(condition.share=lock.ordinal());if(!condition.element){condition.element=condition.template.cloneNode(!0);const element=condition.element,attributes=Object.assign({},condition.attributes);_render_meta[element.ordinal()]={serial:element.ordinal(),element:element,attributes:attributes,condition:condition},attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)&&Composite.include(element),selector.parentNode.insertBefore(element,selector)}void Composite.render(condition.element,lock.share())}else if(object.hasOwnProperty("condition")&&object.condition.share!==-lock.ordinal()&&(object.condition.share=lock.ordinal()),selector.nodeType===Node.TEXT_NODE){if(selector.parentNode&&selector.parentNode.nodeName.match(Composite.PATTERN_ELEMENT_IGNORE))return;if(object.attributes.hasOwnProperty(Composite.ATTRIBUTE_TEXT))return;if(object.attributes.hasOwnProperty(Composite.ATTRIBUTE_VALUE))return void object.render();let content=selector.textContent;if(content.match(Composite.PATTERN_EXPRESSION_CONTAINS)){if(content=content.replace(Composite.PATTERN_EXPRESSION_CONTAINS,e=>{var t,r,o;return e.substring(2,e.length-2).trim()?(r={serial:t=(r=document.createTextNode("")).ordinal(),element:r,attributes:{},value:null,render(){let e="";var t,r;this.attributes.hasOwnProperty(Composite.ATTRIBUTE_NAME)?(t=String(this.attributes[Composite.ATTRIBUTE_NAME]||"").trim(),r=String(this.attributes[Composite.ATTRIBUTE_VALUE]||"").trim(),window[t]=Expression.eval(this.serial+":"+Composite.ATTRIBUTE_VALUE,r)):(e=String(this.attributes[Composite.ATTRIBUTE_VALUE]||""),e=Expression.eval(this.serial+":"+Composite.ATTRIBUTE_VALUE,e)),this.value=e,this.element.textContent=void 0!==e?e:""}},(o=e.match(Composite.PATTERN_EXPRESSION_VARIABLE))?(r.attributes[Composite.ATTRIBUTE_NAME]=o[1],r.attributes[Composite.ATTRIBUTE_VALUE]="{{"+o[2]+"}}"):r.attributes[Composite.ATTRIBUTE_VALUE]=e,_render_meta[t]=r,"{{"+t+"}}"):""}),content.match(Composite.PATTERN_EXPRESSION_CONTAINS)){const words=content.split(/(\{\{\d+\}\})/);return(words.forEach((e,t,r)=>{var o,a;e.match(/^\{\{\d+\}\}$/)?(a=parseInt(e.substring(2,e.length-2).trim()),a=_render_meta[a],Composite.fire(Composite.EVENT_RENDER_NEXT,a.element),a.render(),r[t]=a.element):(a={serial:o=(a=document.createTextNode(e)).ordinal(),element:a,attributes:{}},Composite.fire(Composite.EVENT_RENDER_NEXT,a.element),a.element.textContent=e,a.attributes[Composite.ATTRIBUTE_TEXT]=e,_render_meta[o]=a,r[t]=a.element)}),null===selector.parentNode)?void 0:(words.forEach(e=>selector.parentNode.insertBefore(e,selector)),void selector.parentNode.removeChild(selector))}selector.nodeValue=content}void(object.attributes[Composite.ATTRIBUTE_TEXT]=content)}else if(selector instanceof Element){if(object.attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)){const locate=_mount_locate(selector);let model=(locate.namespace||[]).concat(locate.model).join(".");if(!_models.has(model)&&(_models.add(model),model=Object.lookup(model),model)&&"function"==typeof model.dock){const meta=_mount_lookup(selector);Composite.fire(Composite.EVENT_MODULE_DOCK,meta),model.dock.call(model),Composite.fire(Composite.EVENT_MODULE_READY,meta)}}if(object.attributes.hasOwnProperty(Composite.ATTRIBUTE_IMPORT)){selector.innerHTML="";let value=object.attributes[Composite.ATTRIBUTE_IMPORT];if((value||"").match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(value=Expression.eval(serial+":"+Composite.ATTRIBUTE_IMPORT,String(value))),value)if(value instanceof Element||value instanceof NodeList)selector.appendChild(value,!0),delete object.attributes[Composite.ATTRIBUTE_IMPORT];else if(String(value).match(Composite.PATTERN_DATASOURCE_URL)){let data=String(value).match(Composite.PATTERN_DATASOURCE_URL);data[2]=DataSource.fetch("xslt://"+(data[2]||data[1])),data[1]=DataSource.fetch("xml://"+data[1]),data=DataSource.transform(data[1],data[2]),selector.appendChild(data,!0);const serial=selector.ordinal(),object=_render_meta[serial];delete object.attributes[Composite.ATTRIBUTE_IMPORT]}else if(void 0!==_render_cache[value]){selector.innerHTML=_render_cache[value];const serial=selector.ordinal(),object=_render_meta[serial];delete object.attributes[Composite.ATTRIBUTE_IMPORT]}else Composite.asynchron((e,t,r)=>{try{var o=new XMLHttpRequest;if(o.overrideMimeType("text/plain"),o.open("GET",r,!1),o.send(),200!==o.status)throw new Error(`HTTP status ${o.status} for `+o.responseURL);var a=o.responseText.trim(),n=(_render_cache[o.responseURL]=a,e.innerHTML=a,e.ordinal());delete _render_meta[n].attributes[Composite.ATTRIBUTE_IMPORT]}catch(e){throw Composite.fire(Composite.EVENT_HTTP_ERROR,e),e}finally{t.release()}},selector,lock.share(),value);else delete object.attributes[Composite.ATTRIBUTE_IMPORT]}if(object.attributes.hasOwnProperty(Composite.ATTRIBUTE_OUTPUT)){selector.innerHTML="";let value=object.attributes[Composite.ATTRIBUTE_OUTPUT];if((value||"").match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(value=Expression.eval(serial+":"+Composite.ATTRIBUTE_OUTPUT,String(value))),String(value).match(Composite.PATTERN_DATASOURCE_URL)){let data=String(value).match(Composite.PATTERN_DATASOURCE_URL);data[2]=DataSource.fetch("xslt://"+(data[2]||data[1])),data[1]=DataSource.fetch("xml://"+data[1]),data=DataSource.transform(data[1],data[2]),selector.appendChild(data,!0)}else value instanceof Node?selector.appendChild(value.cloneNode(!0),!0):value instanceof NodeList?Array.from(value).forEach((e,t)=>selector.appendChild(e.cloneNode(!0),0===t)):selector.innerHTML=String(value)}let interval=String(object.attributes[Composite.ATTRIBUTE_INTERVAL]||"").trim();if(interval&&!object.interval){const context=serial+":"+Composite.ATTRIBUTE_INTERVAL;if(interval=String(Expression.eval(context,interval)),!interval.match(/^\d*$/))throw new Error("Invalid interval: "+interval);interval=Number.parseInt(interval),object.interval=window.setInterval(()=>{document.body.contains(selector)?Composite.render(selector):(window.clearInterval(object.interval),delete object.interval)},interval)}if(object.attributes.hasOwnProperty(Composite.ATTRIBUTE_ITERATE)){if(!object.iterate){const iterate=String(object.attributes[Composite.ATTRIBUTE_ITERATE]||"").trim(),match=iterate.match(Composite.PATTERN_EXPRESSION_VARIABLE);if(!match)throw new Error("Invalid iterate"+(iterate?": "+iterate:""));object.iterate={name:match[1].trim(),expression:"{{"+match[2].trim()+"}}",items:[]},object.template=selector.cloneNode(!0),selector.innerHTML=""}const context=serial+":"+Composite.ATTRIBUTE_ITERATE;let iterate=Expression.eval(context,object.iterate.expression);if(iterate instanceof Error)throw iterate;if(iterate){if(delete object.iterate.variable,eval("typeof "+object.iterate.name+' !== "undefined"')&&(object.iterate.variable=eval(object.iterate.name)),iterate instanceof XPathResult){const meta={entry:null,array:[],iterate:iterate};for(;meta.entry=meta.iterate.iterateNext();)meta.array.push(meta.entry);iterate=meta.array}else iterate=Array.from(iterate);if(object.iterate.update=object.iterate.items.length!==iterate.length,object.iterate.update){selector.innerHTML="",object.iterate.items=Array.from(iterate),iterate.forEach((e,t,r)=>{var o={},e=(Object.defineProperty(o,"item",{enumerable:!0,value:e}),Object.defineProperty(o,"index",{enumerable:!0,value:t}),Object.defineProperty(o,"data",{enumerable:!0,value:r}),object.iterate.items[t]=o,'{{___("'+object.iterate.name+'", '+serial+", "+t+")}}"),r=document.createTextNode(e);selector.appendChild(r),Composite.render(r,lock.share()),Array.from(object.template.cloneNode(!0).childNodes).forEach(e=>{selector.appendChild(e),Composite.render(e,lock.share())})});const data='{{___("'+object.iterate.name+'", '+serial+")}}",node=document.createTextNode(data);selector.appendChild(node),Composite.render(node,lock.share())}}}if(!selector.nodeName.match(Composite.PATTERN_ELEMENT_IGNORE)){const attributes=[];for(const key in object.attributes)object.attributes.hasOwnProperty(key)&&attributes.push(key);Composite.ATTRIBUTE_VALUE in selector&&object.attributes.hasOwnProperty(Composite.ATTRIBUTE_VALUE)&&!attributes.includes(Composite.ATTRIBUTE_VALUE)&&attributes.push(Composite.ATTRIBUTE_VALUE),attributes.forEach(t=>{if(!t.match(Composite.PATTERN_ATTRIBUTE_ACCEPT)||t.match(Composite.PATTERN_ATTRIBUTE_STATIC)){let e=String(object.attributes[t]||"");var r;e.match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(r=serial+":"+t,void 0!==(e=Expression.eval(r,e))?(e=(e=String(e).encodeHtml()).replace(/"/g,"&quot;"),t.toLowerCase()===Composite.ATTRIBUTE_VALUE&&Composite.ATTRIBUTE_VALUE in selector&&(selector.value=e),t.startsWith("@")&&(selector.removeAttribute(t),t=t.replace(/^@+/,"")),selector.setAttribute(t,e)):selector.removeAttribute(t))}})}if(selector.nodeName.match(Composite.PATTERN_SCRIPT)){const type=(selector.getAttribute(Composite.ATTRIBUTE_TYPE)||"").trim();if(type.match(Composite.PATTERN_COMPOSITE_SCRIPT))try{Scripting.eval(selector.textContent)}catch(error){throw new Error("Composite JavaScript",error)}}!selector.childNodes||selector.nodeName.match(Composite.PATTERN_ELEMENT_IGNORE)||object.attributes.hasOwnProperty(Composite.ATTRIBUTE_ITERATE)&&object.iterate.update||Array.from(selector.childNodes).forEach(e=>{selector.contains(e)&&Composite.render(e,lock.share())}),selector.hasAttribute(Composite.ATTRIBUTE_RELEASE)&&selector.removeAttribute(Composite.ATTRIBUTE_RELEASE)}}}}catch(error){console.error(error),Composite.fire(Composite.EVENT_ERROR,error),origin instanceof Element&&(origin.innerText="Error: "+(error.message.match(/(\{\{|\}\})/)?"Invalid expression":error.message))}finally{Composite.render.queue=Composite.render.queue.filter(e=>e!==origin),lock.release()}}},load(t,e){if(!(t=(t||"").trim()).match(/\.(js|css|html)(\?.*)?$/i))throw new Error("Resource not supported"+(t?": "+t:""));if(r=t,(o=document.createElement("a")).href=r,!(t=o.pathname.replaceAll(/\/{2,}/g,"/")).startsWith(Composite.MODULES+"/"))throw new Error("Resource not supported: "+t);if(!(t in _render_cache&&t.match(/\.(js|css)(\?.*)?$/i)||t in _render_cache&&void 0===_render_cache[t])){if(!(t in _render_cache)){_render_cache[t]=void 0;var r=new XMLHttpRequest;if(r.overrideMimeType("text/plain"),r.open("GET",t,!1),r.send(),404===r.status&&!e)return;if(200!==r.status)throw new Error(`HTTP status ${r.status} for `+r.responseURL);_render_cache[t]=r.responseText.trim()}var o=_render_cache[t];if(t.match(/\.js(\?.*)?$/i))try{Scripting.eval(o)}catch(e){throw console.error(t,e.name+": "+e.message),e}else if(t.match(/\.css(\?.*)?$/i)){e=document.querySelector("html head");if(!e)throw new Error("No head element found");r=document.createElement("style");r.setAttribute("type","text/css"),r.textContent=o,e.appendChild(r)}else if(t.match(/\.html(\?.*)?$/i))return o}},include(...e){if(e.length<=0||1===e.length&&!(e[0]instanceof Element)&&"string"!=typeof e[0])throw new TypeError("Invalid composite for include");let t=e=1===e.length&&e[0]instanceof Element?e[0]:e,r=null;if(e instanceof Element){if(!e.hasAttribute(Composite.ATTRIBUTE_ID))throw new Error("Unknown composite without id");if(!(r=_render_meta[e.ordinal()]))throw new Error("Unknown composite");var o=_mount_locate(e);o.namespace||(o.namespace=[]),o.namespace.push(o.model),t=o.namespace}var o=Composite.MODULES+"/"+t.join("/"),a=Object.lookup(t.join("."));t=t.join("/"),void 0===_render_cache[o+".composite"]&&Composite.fire(Composite.EVENT_MODULE_LOAD,e,t),_render_cache[o+".composite"]=null,(void 0===a||a instanceof Element||a instanceof HTMLCollection||"common"===t)&&this.load(o+".js"),"common"===t&&this.load(o+".css"),e instanceof Element&&!e.innerHTML.trim()&&this.load(o+".css"),e instanceof Element&&!e.innerHTML.trim()&&!r.attributes.hasOwnProperty(Composite.ATTRIBUTE_IMPORT)&&!r.attributes.hasOwnProperty(Composite.ATTRIBUTE_OUTPUT)&&void 0!==(a=this.load(o+".html"))&&(_recursion_detection(e),e instanceof Element)&&(e.innerHTML=a)}});const _statics=new Set,_macros=new Map,_selectors=new Map,_acceptors=new Set,_listeners=new Map,_models=new Set,_recursion_detection=(compliant("___",(variable,serial,index)=>{let object=_render_meta[serial];object&&object.iterate&&(void 0===index?"variable"in object.iterate?eval(variable+" = object.iterate.variable"):eval("delete "+variable):eval(variable+" = object.iterate.items["+index+"]"))}),e=>{for(var t=(e instanceof Element&&e.id||"").trim(),r=t.toLowerCase();r&&e instanceof Element;)if((e=e.parentNode)instanceof Element&&e.hasAttribute(Composite.ATTRIBUTE_COMPOSITE)&&e.hasAttribute(Composite.ATTRIBUTE_ID)&&(e.id||"").toLowerCase().trim()===r)throw new Error("Recursion detected for composite: "+t)}),_mount_locate=e=>{if(!(e instanceof Element))return null;let t=(e.getAttribute(Composite.ATTRIBUTE_ID)||"").trim();if(e.hasAttribute(Composite.ATTRIBUTE_COMPOSITE)){var r=t.match(Composite.PATTERN_COMPOSITE_ID);if(r)return r[2]?{namespace:r[2].split(/:+/),model:r[1]}:{model:r[1]};throw new Error("Invalid composite id"+(t?": "+t:""))}r=_mount_locate(e.parentNode);if(!e.hasAttribute(Composite.ATTRIBUTE_ID))return r;if(t.match(Composite.PATTERN_ELEMENT_ID))return e={namespace:[],model:null,route:[],target:null},r&&(r.namespace?r.namespace.push(r.model):r.namespace=[r.model],e.namespace=r.namespace,r.route?e.route.push(...r.route):e.route.push(r.model)),(t=t.match(Composite.PATTERN_ELEMENT_ID))[4]&&(e.namespace=t[4].split(/:/),e.route=[e.namespace[e.namespace.length-1]]),e.route.push(t[1]),t[2]&&e.route.push(...t[2].split(/:/)),t[3]&&(e.unique=t[3]),e.target=e.route[e.route.length-1],e.model=e.namespace.pop(),e.namespace.length<=0&&delete e.namespace,e.model?e:null;throw new Error("Invalid element id"+(t?": "+t:""))},_mount_lookup=e=>{var t,r,e=_mount_locate(e);return e&&(t=Namespace.lookup(...e.namespace||[]),r=Object.lookup(t||window,e.model))?void 0===e.target?{meta:e,namespace:t,model:r}:(e={meta:e,namespace:t,model:r,get target(){return Object.lookup(this.namespace,...this.meta.route||[])},set target(e){let t=[this.meta.model];var r=(t=this.meta.route?this.meta.route:t).pop();Object.lookup(this.namespace,...t)[r]=e}}).model&&void 0!==e.target?e:null:null},_render_cache={},_render_meta=[];Object.defineProperty(Composite.render,"meta",{value:_render_meta});let _serial=0;compliant("Object.prototype.serial"),compliant("Object.prototype.ordinal",function(){return void 0===this.serial&&Object.defineProperty(this,"serial",{value:++_serial}),this.serial}),compliant("Object.use",(...e)=>Namespace.use.apply(null,e)),compliant("Object.lookup",(...e)=>Namespace.lookup.apply(null,e)),compliant("Object.exists",(...e)=>Namespace.exists.apply(null,e)),compliant("Object.usable",e=>null!=e);const _request_open=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...e){var t=(e=null)=>{if(e){if("loadstart"===e.type)e=[Composite.EVENT_HTTP_START,e];else if("progress"===e.type)e=[Composite.EVENT_HTTP_PROGRESS,e];else if("readystatechange"===e.type)e=[Composite.EVENT_HTTP_RECEIVE,e];else if("load"===e.type)e=[Composite.EVENT_HTTP_LOAD,e];else if("abort"===e.type)e=[Composite.EVENT_HTTP_ABORT,e];else if("error"===e.type)e=[Composite.EVENT_HTTP_ERROR,e];else if("timeout"===e.type)e=[Composite.EVENT_HTTP_TIMEOUT,e];else{if("loadend"!==e.type)return;e=[Composite.EVENT_HTTP_END,e]}Composite.fire(...e)}};this.status===XMLHttpRequest.UNSENT&&(this.addEventListener("loadstart",t),this.addEventListener("progress",t),this.addEventListener("readystatechange",t),this.addEventListener("load",t),this.addEventListener("abort",t),this.addEventListener("error",t),this.addEventListener("timeout",t),this.addEventListener("loadend",t)),_request_open.call(this,...e)},window.addEventListener("error",e=>Composite.fire(Composite.EVENT_ERROR,e)),window.addEventListener("load",()=>{var e;document.querySelector("html")&&(document.querySelector("html head")||document.querySelector("html").appendChild(document.createElement("head")),(e=document.createElement("style")).setAttribute("type","text/css"),e.innerHTML="*[release] {display:none!important;}",document.querySelector("html head").appendChild(e)),Composite.include("common");const o=e=>{e.childNodes&&Array.from(e.childNodes).forEach(e=>o(e));var t,r=e.ordinal(),r=_render_meta[r];r&&r.attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)&&(r=_mount_lookup(e))&&r.meta&&r.meta.model&&r.model&&(t=(r.meta.namespace||[]).concat(r.meta.model).join("."),_models.has(t))&&(_models.delete(t),"function"==typeof r.model.undock)&&(r.model.undock.call(r.model),Composite.fire(Composite.EVENT_MODULE_UNDOCK,r)),delete _render_meta[e.ordinal()]};new MutationObserver(e=>{e.forEach(e=>{var t,r;"attributes"===e.type&&(t=e.attributeName).match(/^(autofocus|disabled|hidden|multiple|readonly|required)$/i)&&("false"===(r=String(e.target.getAttribute(t)))&&e.target.removeAttribute(t),"true"===r)&&e.target.setAttribute(t,t),_render_meta.length&&(r=e.target.ordinal(),t=_render_meta[r],"characterData"===e.type&&e.target.nodeType===Node.TEXT_NODE?t&&t.hasOwnProperty(Composite.ATTRIBUTE_VALUE)&&(r=void 0===t.value?"":String(t.value))!==e.target.textContent&&(e.target.textContent=r):(t&&"attributes"===e.type&&((r=(e.attributeName||"").toLowerCase().trim()).match(Composite.PATTERN_ATTRIBUTE_ACCEPT)&&!r.match(Composite.PATTERN_ATTRIBUTE_STATIC)?e.target.hasAttribute(r)&&e.target.removeAttribute(r):r.match(Composite.PATTERN_ATTRIBUTE_STATIC)?t.attributes.hasOwnProperty(r)?e.target.hasAttribute(r)&&t.attributes[r]===e.target.getAttribute(r)||e.target.setAttribute(r,t.attributes[r]):e.target.hasAttribute(r)&&e.target.removeAttribute(r):_statics.has(r)&&(t.statics=t.statics||{},t.statics.hasOwnProperty(r)?e.target.hasAttribute(r)&&t.statics[r]===e.target.getAttribute(r)||e.target.setAttribute(r,t.statics[r]):e.target.hasAttribute(r)&&e.target.removeAttribute(r))),(e.addedNodes||[]).forEach(e=>{(e instanceof Element||e instanceof Node&&e.nodeType===Node.TEXT_NODE)&&!_render_meta[e.ordinal()]&&document.body.contains(e)&&Composite.render(e)}),(e.removedNodes||[]).forEach(e=>o(e))))})}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,characterData:!0}),Composite.render(document.body)})})(),(()=>{compliant("messages",{}),compliant("Messages",{});const a=[DataSource.data],t=DataSource.localize,n=e=>{var t=new Map,r="/locales/"+DataSource.locale+"/label",o=e.evaluate(r,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);for(let e=o.iterateNext();e;e=o.iterateNext()){var a,n=(e.getAttribute("key")||"").trim();t.has(n)||(a=((e.getAttribute("value")||"").trim()||(e.textContent||"").trim()).unescape(),t.set(n,a))}new Map([...t.entries()].sort()).forEach((e,t)=>{var r,o=t.match(/^(?:((?:\w+\.)*\w+)\.)*(\w+)$/);o&&(r="messages"+(o[1]?"."+o[1]:""),Namespace.exists(r,o[2])||Object.defineProperty(Namespace.use(r),o[2],{value:{toString(){return e}}}),Namespace.exists("Messages",t)||Object.defineProperty(Namespace.use("Messages"),t,{value:e}))})};DataSource.localize=e=>{t(e),delete window.messages,delete window.Messages,window.Messages={customize(e,...t){let r=Messages[e]||"";for(let e=0;e<t.length;e++)r=r.replace(new RegExp("\\{"+e+"\\}","g"),t[e]);return r.replace(/\{\d+\}/g,"")}},a.forEach(e=>n(e))},DataSource.data&&DataSource.locale&&DataSource.locales&&DataSource.locales.includes(DataSource.locale)&&DataSource.localize(DataSource.locale),Composite.listen(Composite.EVENT_MODULE_LOAD,(e,t,r)=>{var o=new XMLHttpRequest;o.open("GET",Composite.MODULES+"/"+r+".xml",!1),o.send(),200===o.status&&(r=(new DOMParser).parseFromString(o.responseText,"application/xml"),a.push(r),n(r))})})(),(()=>{compliant("Reactive",e=>{if("object"!=typeof e)throw new TypeError("Not supported data type: "+typeof e);if("object"===e)throw new TypeError("Not supported data type: null");return l(e)});let n=null,r=(Composite.listen(Composite.EVENT_RENDER_START,(e,t)=>n=t),Composite.listen(Composite.EVENT_RENDER_NEXT,(e,t)=>n=t),Composite.listen(Composite.EVENT_RENDER_END,(e,t)=>n=null),null);Composite.listen(Composite.EVENT_MODULE_DOCK,(e,t)=>{r=n,n=null}),Composite.listen(Composite.EVENT_MODULE_READY,(e,t)=>{n=r,r=null}),compliant("Object.prototype.reactive",function(){return l(this)});const s=Math.serial(),i=new WeakMap,l=e=>{if("object"!=typeof e||null===e)return e;if(void 0!==e[s])return e;if(i.has(e))return i.get(e);const a=new Proxy(e,{notifications:new Map,cache:new Map,get(t,r){try{if(r===s)return t;let e;var o;return"object"!=typeof(e=n&&(o=Object.getOwnPropertyDescriptor(t,r))&&"function"==typeof o.get?o.get.call(a):t[r])||null===e||e instanceof Node||e instanceof NodeList||e instanceof HTMLCollection?e:void 0!==e[s]?e:i.has(e)?i.get(e):l(e)}finally{Composite.asynchron((t,e,r,o)=>{if(null!==t&&e.hasOwnProperty(r)){for(let e=t;e.parentNode;e=e.parentNode){var a=(Composite.render.meta||[])[e.ordinal()]||{};a.attributes&&a.attributes.hasOwnProperty(Composite.ATTRIBUTE_ITERATE)&&(t=e)}var n=o.get(r)||new Map;if(!n.has(t.ordinal())){for(const s of n.values()){if(void 0!==s.contains&&s.contains(t))return;void 0!==t.contains&&t.contains(s)&&n.delete(s.ordinal())}n.set(t.ordinal(),t),o.set(r,n)}}},n,t,r,this.notifications)}},set(e,t,r){if(t===s)return e;"object"==typeof r&&null!==r&&void 0!==r[s]&&(r=r[s]);try{return e[t]=r}finally{if(this.cache.get(t)===r)return;this.cache.set(t,r),Composite.asynchron((e,t,r,o)=>{if(t.hasOwnProperty(r)){var a=this.notifications.get(r)||new Map;for(const n of a.values())document.body.contains(n)?Composite.render(n):a.delete(n.ordinal())}},n,e,t,this.notifications)}}});return i.set(e,a),a}})(),compliant("Test",{activate(){window.Test={get PATTERN_EVENT(){return/^[a-z]+$/},get EVENT_FINISH(){return"finish"},get EVENT_INTERRUPT(){return"interrupt"},get EVENT_PERFORM(){return"perform"},get EVENT_RESPONSE(){return"response"},get EVENT_RESUME(){return"resume"},get EVENT_START(){return"start"},get EVENT_SUSPEND(){return"suspend"},get TIMESTAMP(){return(new Date).toUTCString()},activate(){},listen(e,t){if("string"!=typeof e)throw new TypeError("Invalid event: "+typeof e);if("function"!=typeof t&&null!=t)throw new TypeError("Invalid callback: "+typeof t);if(!e.match(Test.PATTERN_EVENT))throw new Error("Invalid event"+(e.trim()?": "+e:""));e=e.toLowerCase(),o.has(e)||Array.isArray(o.get(e))||o.set(e,[]),o.get(e).push(t)},fire(t,r){if("object"==typeof Test.worker&&(Test.worker.status=t),"object"==typeof Test.worker&&"object"==typeof Test.worker.monitor&&"function"==typeof Test.worker.monitor[t])try{Test.worker.monitor[t](r)}catch(e){console.error(e)}if(t=(t||"").trim()){var e=o.get(t.toLowerCase());if(Array.isArray(e)&&e.forEach(e=>e(t,r)),parent&&parent!==window)try{parent.Test.fire(t,r)}catch(e){}}},create(e){var t;"object"!=typeof e||"function"!=typeof e.test||void 0!==e.ignore&&!0===e.ignore||r.has(e)||(r.add(e),t=Array.from(r),Object.defineProperty(e,"serial",{value:Math.max(t.length,1<t.length?t[t.length-2].serial+1:1)}))},start(e){if(void 0===Test.worker)if(e&&e.auto&&("loading"===document.readyState||"interactive"===document.readyState))void 0===Test.start.auto&&(Object.defineProperty(Test.start,"auto",{value:!0}),window.addEventListener("load",()=>Test.start(e)));else{const t=(e,t)=>e+" "+t+(1!==e?"s":"");Test.worker={},Test.worker.output=e?e.output:null,Test.worker.output=Test.worker.output||console,Test.worker.monitor=e?e.monitor:null,Test.worker.monitor=Test.worker.monitor||{start(e){Test.worker.output.log(Test.TIMESTAMP+" Test is started"+`, ${t(e.queue.size,"task")} in the queue`)},suspend(e){Test.worker.output.log(Test.TIMESTAMP+" Test is suspended"+`, ${t(e.queue.length,"task")} still outstanding`)},resume(e){Test.worker.output.log(Test.TIMESTAMP+" Test is continued"+`, ${t(e.queue.size,"task")} in the queue`)},interrupt(e){Test.worker.output.log(Test.TIMESTAMP+" Test is interrupted"+`
	${t(e.queue.size-e.queue.progress,"task")} still outstanding`+`
	${t(e.queue.faults,"fault")} were detected`+`
	total time ${(new Date).getTime()-e.queue.timing} ms`)},perform(e){},response(e){var t=(new Date).getTime()-e.task.timing;e.task.error?Test.worker.output.error(`${Test.TIMESTAMP} Test task ${e.task.title} `+e.task.error.message):Test.worker.output.log(`${Test.TIMESTAMP} Test task ${e.task.title} was successful (${t} ms)`)},finish(e){Test.worker.output.log(Test.TIMESTAMP+"Test is finished"+`
	${t(e.queue.size,"task")} were performed`+`
	${t(e.queue.faults,"fault")} were detected`+`
	total time ${(new Date).getTime()-e.queue.timing} ms`)}},Test.worker.queue=Test.worker.queue||{timing:!1,stack:[],size:0,lock:!1,progress:0,faults:0},Test.worker.queue.stack.length<=0&&(Test.worker.queue.stack=Array.from(r),Test.worker.queue.size=Test.worker.queue.stack.length,Test.worker.queue.timing=(new Date).getTime()),Test.worker.timeout=window.setInterval(()=>{var e;Test.worker.status!==Test.EVENT_SUSPEND&&void 0!==Test.worker.task&&Test.worker.task.running&&Test.worker.queue.lock&&(!(e=Test.worker.task).timeout||e.timeout>(new Date).getTime()||(e.duration=(new Date).getTime()-e.timing,e.error=new Error(`Timeout occurred, expected ${e.timeout} ms but was ${e.duration} ms`),Test.fire(Test.EVENT_RESPONSE,Test.status()),Test.worker.queue.faults++,Test.worker.queue.lock=!1))},25),Test.worker.interval=window.setInterval(()=>{if(Test.worker.status!==Test.EVENT_SUSPEND&&(!Test.worker.queue.lock&&Test.worker.queue.progress<=0&&Test.fire(Test.EVENT_START,Test.status()),!Test.worker.queue.lock))if(0<Test.worker.queue.stack.length){Test.worker.queue.lock=!0,Test.worker.queue.progress++;var t=Test.worker.queue.stack.shift();let e=!1;0<(t.timeout||0)&&(e=(new Date).getTime()+t.timeout),Test.worker.task={title:null,meta:t,running:!0,timing:(new Date).getTime(),timeout:e,duration:!1,error:null},Test.worker.task.title="#"+t.serial,"string"==typeof t.name&&0<t.name.trim().length&&(Test.worker.task.title+=" "+t.name.replace(/[\x00-\x20]+/g," ").trim()),Test.fire(Test.EVENT_PERFORM,Test.status()),void Composite.asynchron(()=>{var t=Test.worker.task;try{t.meta.test()}catch(e){t.error=e,t.error.message&&t.error.message.trim()||(t.error.message="failed")}finally{t.meta.expected&&(t.error?("function"==typeof t.meta.expected&&t.error instanceof t.meta.expected&&(t.error=null),"object"==typeof t.meta.expected&&t.meta.expected instanceof RegExp&&String(t.error).match(t.meta.expected)&&(t.error=null)):t.error=Error("Assert error expected failed")),t.running=!1,t.duration=(new Date).getTime()-t.timing,t.timeout&&t.timeout<(new Date).getTime()&&!t.error&&(t.error=new Error(`Timeout occurred, expected ${t.meta.timeout} ms but was ${t.duration} ms`),Test.fire(Test.EVENT_RESPONSE,Test.status()),Test.worker.queue.faults++),t.error&&String(t.error.message).match(/^Timeout occurred/)||(t.error&&Test.worker.queue.faults++,Test.fire(Test.EVENT_RESPONSE,Test.status())),Test.worker.queue.lock=!1}})}else window.clearTimeout(Test.worker.interval),window.clearTimeout(Test.worker.timeout),Test.fire(Test.EVENT_FINISH,Test.status()),delete Test.worker},25)}},suspend(){if(void 0===Test.worker)throw new Error("Suspend is not available");Test.fire(Test.EVENT_SUSPEND,Test.status())},resume(){if(void 0===Test.worker||Test.worker.status!==Test.EVENT_SUSPEND)throw new Error("Resume is not available");Test.fire(Test.EVENT_RESUME,Test.status())},interrupt(){if(void 0===Test.worker)throw new Error("Interrupt is not available");window.clearTimeout(Test.worker.interval),window.clearTimeout(Test.worker.timeout),Test.fire(Test.EVENT_INTERRUPT,Test.status()),delete Test.worker},status(){var e={};return"object"==typeof Test.worker&&"object"==typeof Test.worker.task&&(e.task={},Object.defineProperty(e.task,"title",{value:Test.worker.task.title,enumerable:!0}),Object.defineProperty(e.task,"meta",{value:Test.worker.task.meta,enumerable:!0}),Object.defineProperty(e.task,"running",{value:Test.worker.task.running,enumerable:!0}),Object.defineProperty(e.task,"timing",{value:Test.worker.task.timing,enumerable:!0}),Object.defineProperty(e.task,"timeout",{value:Test.worker.task.timeout,enumerable:!0}),Object.defineProperty(e.task,"duration",{value:Test.worker.task.duration,enumerable:!0}),Object.defineProperty(e.task,"error",{value:Test.worker.task.error,enumerable:!0})),"object"==typeof Test.worker&&"object"==typeof Test.worker.queue&&(e.queue={},Object.defineProperty(e.queue,"timing",{value:Test.worker.queue.timing,enumerable:!0}),Object.defineProperty(e.queue,"size",{value:Test.worker.queue.size,enumerable:!0}),Object.defineProperty(e.queue,"length",{value:Test.worker.queue.stack.length,enumerable:!0}),Object.defineProperty(e.queue,"progress",{value:Test.worker.queue.progress,enumerable:!0}),Object.defineProperty(e.queue,"lock",{value:Test.worker.queue.lock,enumerable:!0}),Object.defineProperty(e.queue,"faults",{value:Test.worker.queue.faults,enumerable:!0})),(void 0!==e.task||void 0!==e.queue)&&e}};const r=new Set,o=new Map;{const a={log:"",warn:"",error:"",info:""},n=(console.output={get log(){return a.log},get warn(){return a.warn},get error(){return a.error},get info(){return a.info}},console.output.clear=()=>{a.log="",a.warn="",a.error="",a.info=""},new Set),t=(console.listen=function(e){n.add(e)},console.forward=function(t,r,e){a[t]+=Array.from(r).join(", "),e&&e(...r),n.forEach(e=>e(t,...r)),parent&&parent!==window&&parent.console&&"function"==typeof parent.console.forward&&parent.console.forward(...Array.from(arguments).slice(0,2))},console.log),s=(console.log=function(...e){console.forward("log",e,t)},console.warn),i=(console.warn=function(...e){console.forward("warn",e,s)},console.error),l=(console.error=function(...e){console.forward("error",e,i)},console.info);console.info=function(...e){console.forward("info",e,l)},window.addEventListener("error",e=>{parent&&parent!==window&&console.forward("error",[e.message],null)})}compliant("Element.prototype.typeValue",function(e,t){this.focus(),!1!==t&&(this.value="");const r=this;(e=(e||"").split("")).forEach(e=>{r.trigger("keydown"),r.value=(r.value||"")+e,r.trigger("keyup")}),this.trigger("input")}),compliant("Element.prototype.toPlainString",function(){return this.outerHTML}),compliant("Node.prototype.toPlainString",function(){return(new XMLSerializer).serializeToString(this)}),compliant("Object.prototype.toPlainString",function(){return null!==this&&"function"==typeof this[Symbol.iterator]?JSON.stringify([...this]):JSON.stringify(this)}),compliant("Element.prototype.trigger",function(e,t=!1,r=!0){this.dispatchEvent(new Event(e,{bubbles:t,cancelable:r}))}),compliant("Assert",{create(e,t){const o={message:null,values:[],error(...r){r.forEach((e,t,r)=>{r[t]=String(e).replace(/\{(\d+)\}/g,(e,t)=>t>o.values.length?"[null]":String(o.values[t]).replace(/\s*[\r\n]+\s*/g," "))});let e="expected {1} but was {2}";return e=(e="{0} failed, "+(e=null!==o.message&&(o.message=o.message.trim(),o.message)?o.message:e)).replace(/\{(\d+)\}/g,(e,t)=>t>r.length?"[null]":String(r[t]).replace(/\s*[\r\n]+\s*/g," ")),new Error(e)}};for((e=Array.from(e)).length>t&&(o.message=e.shift());0<e.length;)o.values.push(e.shift());return o},assertTrue(...e){e=Assert.create(e,1);if(!0!==e.values[0])throw e.error("Assert.assertTrue","true","{0}")},assertFalse(...e){e=Assert.create(e,1);if(!1!==e.values[0])throw e.error("Assert.assertFalse","false","{0}")},assertEquals(...e){e=Assert.create(e,2);if(e.values[0]!==e.values[1])throw e.error("Assert.assertEquals","{0}","{1}")},assertNotEquals(...e){e=Assert.create(e,2);if(e.values[0]===e.values[1])throw e.error("Assert.assertNotEquals","not {0}","{1}")},assertSame(...e){e=Assert.create([],e,2);if(e.values[0]!==e.values[1])throw e.error("Assert.assertSame","{0}","{1}")},assertNotSame(...e){e=Assert.create(e,2);if(e.values[0]===e.values[1])throw e.error("Assert.assertNotSame","not {0}","{1}")},assertUndefined(...e){e=Assert.create(e,1);if(void 0!==e.values[0])throw e.error("Assert.assertUndefined","undefined","{0}")},assertNotUndefined(...e){e=Assert.create(e,1);if(void 0===e.values[0])throw e.error("Assert.assertNotUndefined","not undefined","{0}")},assertNull(...e){e=Assert.create(e,1);if(null!==e.values[0])throw e.error("Assert.assertNull","null","{0}")},assertNotNull(...e){e=Assert.create(e,1);if(null===e.values[0])throw e.error("Assert.assertNotNull","not null","{0}")},fail(e){throw e=e&&String(e).trim(),new Error("Assert.fail"+(e?", "+e:""))}})}});