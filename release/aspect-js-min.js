"undefined"==typeof Namespace&&(window.Namespace={get PATTERN_NAMESPACE_SEPARATOR(){return/\./},get PATTERN_NAMESPACE_LEVEL_START(){return/^[_a-z\$][\w\$]*$/i},get PATTERN_NAMESPACE_LEVEL(){return/(^[\w\$]+$)|(^\d+$)/}},Namespace.using=function(...levels){if(levels.length<=0)return window;Namespace.lookup.filter(...levels);let offset=levels.length,namespace=null;return 0<levels.length&&"object"==typeof levels[0]&&(namespace=levels.shift()),offset-=levels.length,levels=levels.join("."),levels.split(Namespace.PATTERN_NAMESPACE_SEPARATOR).forEach((level,index,array)=>{const pattern=0===index&&null===namespace?Namespace.PATTERN_NAMESPACE_LEVEL_START:Namespace.PATTERN_NAMESPACE_LEVEL;if(!level.match(pattern))throw new Error("Invalid namespace at level "+(index+1)+(level&&level.trim()?": "+level.trim():""));if(0===index&&null===namespace){if(namespace=eval(`typeof ${level} === "undefined" ? undefined : `+level),void 0!==namespace&&!(namespace instanceof Element))return;namespace=window}const item=namespace[level],type=typeof item;if("undefined"!==type&&"object"!==type)throw new TypeError(`Invalid namespace type at level ${index+1+offset}: `+type);(void 0===item||null===item||item instanceof Element)&&(index<array.length-1&&array[index+1].match(/^\d+$/)?namespace[level]=[]:namespace[level]={}),namespace=namespace[level]}),namespace},Namespace.create=function(...e){if(e.length<2)throw new Error("Invalid namespace for creation: Namespace and/or value is missing");var t=e.pop(),o=(e=Namespace.lookup.filter(...e)).pop(),e=Namespace.using(...e);return null===e?null:(e[o]=t,e[o])},Namespace.lookup=function(...levels){if(levels.length<=0)return window;Namespace.lookup.filter(...levels);let offset=levels.length,namespace=null;0<levels.length&&"object"==typeof levels[0]&&(namespace=levels.shift()),offset-=levels.length,levels=levels.join("."),levels=levels.split(Namespace.PATTERN_NAMESPACE_SEPARATOR);for(let index=0;index<levels.length;index++){const level=levels[index],pattern=index+offset===0?Namespace.PATTERN_NAMESPACE_LEVEL_START:Namespace.PATTERN_NAMESPACE_LEVEL;if(!level.match(pattern))throw new Error("Invalid namespace at level "+(index+1+offset)+(level&&level.trim()?": "+level.trim():""));if(0===index&&null===namespace){if(namespace=eval(`typeof ${level} === "undefined" ? undefined : `+level),void 0!==namespace){if(namespace instanceof Element)return;continue}namespace=window}if(namespace=namespace[level],void 0===namespace||null===namespace)return namespace;if(namespace instanceof Element)return}return namespace},Namespace.lookup.filter=function(...e){const o=[];return e.forEach((e,t)=>{if(0===t&&"object"!=typeof e&&"string"!=typeof e)throw new TypeError(`Invalid namespace at level ${t+1}: `+typeof e);if(0===t&&null===e)throw new TypeError(`Invalid namespace at level ${t+1}: null`);if(0<t&&"string"!=typeof e&&"number"!=typeof e)throw new TypeError(`Invalid namespace at level ${t+1}: `+typeof e);e="string"==typeof e?e.split(Namespace.PATTERN_NAMESPACE_SEPARATOR):[e],o.push(...e)}),o},Namespace.exists=function(...e){return!(e.length<1)&&Object.usable(Namespace.lookup(...e))}),Element.prototype.appendChild$origin=Element.prototype.appendChild,Element.prototype.appendChild=function(t,e){if(e&&(this.innerHTML=""),t instanceof Node)this.appendChild$origin(t);else if(Array.isArray(t)||t instanceof NodeList||Symbol&&Symbol.iterator&&t&&(t[Symbol.iterator],1)){t=Array.from(t);for(let e=0;e<t.length;e++)this.appendChild$origin(t[e])}else this.appendChild$origin(t)},void 0===Math.uniqueId&&(Math.uniqueId=function(t){(t=t||16)<0&&(t=16);let o="";for(let e=0;e<t;e++){var r=Math.floor(Math.random()*Math.floor(26));Math.floor(Math.random()*Math.floor(26))%2==0?o+=String(r%10):o+=String.fromCharCode(65+r)}return o}),void 0===Math.uniqueSerialId&&(Math.uniqueSerialId=function(e){(e=e||16)<0&&(e=16);let t;return t=((t=((new Date).getTime()-9466848e5).toString(36)).length.toString(36)+t).toUpperCase(),t=(t=Math.uniqueId()+t).length>e?t.substring(t.length-e):t}),void 0===RegExp.quote&&(RegExp.quote=function(e){return Object.usable(e)?String(e).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&"):null}),void 0===String.prototype.capitalize&&(String.prototype.capitalize=function(){return this.length<=0?this:this.charAt(0).toUpperCase()+this.slice(1)}),void 0===String.prototype.uncapitalize&&(String.prototype.uncapitalize=function(){return this.length<=0?this:this.charAt(0).toLowerCase()+this.slice(1)}),void 0===String.prototype.encodeHex&&(String.prototype.encodeHex=function(){let o="";for(let t=0;t<this.length;t++){let e=Number(this.charCodeAt(t)).toString(16).toUpperCase();for(;e.length<2;)e="0"+e;o+=e}return"0x"+o}),void 0===String.prototype.decodeHex&&(String.prototype.decodeHex=function(){let t=this,o=(t.match(/^0x/)&&(t=t.substring(2)),"");for(let e=0;e<t.length;e+=2)o+=String.fromCharCode(parseInt(t.substring(e,2),16));return o}),void 0===String.prototype.encodeBase64&&(String.prototype.encodeBase64=function(){try{return btoa(encodeURIComponent(this).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))}catch(e){throw new Error("Malformed character sequence")}}),void 0===String.prototype.decodeBase64&&(String.prototype.decodeBase64=function(){try{return decodeURIComponent(atob(this).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch(e){throw new Error("Malformed character sequence")}}),void 0===String.prototype.encodeHtml&&(String.prototype.encodeHtml=function(){var e=document.createElement("div");return e.textContent=this,e.innerHTML}),void 0===String.prototype.hashCode&&(String.prototype.hashCode=function(){if(void 0===this.hash&&(this.hash=0),0===this.hash){let t=0;for(let e=0;e<this.length;e++){var o=31*this.hash+this.charCodeAt(e);Number.isSafeInteger(o)?this.hash=o:(t++,this.hash=Number.MAX_SAFE_INTEGER-this.hash+this.charCodeAt(e))}this.hash=Math.abs(this.hash),this.hash=this.hash.toString(36),this.hash=this.hash.length.toString(36)+this.hash,this.hash=this.hash+t.toString(36),this.hash=this.hash.toUpperCase()}return this.hash}),void 0===String.prototype.unescape&&(String.prototype.unescape=function(){let text=this;return text=text.replace(/\r/g,"\\r"),text=text.replace(/\n/g,"\\n"),text=text.replace(/^(["'])/,"$1"),text=text.replace(/([^\\])((?:\\{2})*)(?=["'])/g,"$1$2\\"),eval(`"${text}"`)}),void 0===window.serial&&Object.defineProperty(window,"serial",{value:Math.uniqueSerialId()}),void 0===window.location.pathcontext&&Object.defineProperty(window.location,"pathcontext",{value:window.location.pathname.replace(/\/([^\/]*\.[^\/]*){0,}$/g,"")||"/"}),void 0===window.location.combine&&(window.location.combine=function(...e){return"/"+e.join("/").replace(/[\/\\]+/g,"/").replace(/(^\/+)|(\/+$)/g,"")}),"undefined"==typeof DataSource&&(window.DataSource={get DATA(){return window.location.combine(window.location.pathcontext,"/data")},get PATTERN_LOCATOR(){return/^(?:([a-z]+):\/+)(\/((\w+)|(\w+(\-+\w+)+)))+$/},get PATTERN_JAVASCRIPT(){return/^\s*text\s*\/\s*javascript\s*$/i},get PATTERN_WORD(){return/(^\w+$)|(^((\w+\-+(?=\w))+)\w*$)/},get ATTRIBUTE_TYPE(){return"type"},get locale(){return DataSource.locales?DataSource.locales.selection:null}},void 0===XMLDocument.prototype.clone&&(XMLDocument.prototype.clone=function(){var e=this.implementation.createDocument(null,null);return e.appendChild(e.importNode(this.documentElement,!0)),e}),function(){Object.defineProperty(DataSource,"cache",{value:{}}),Object.defineProperty(DataSource,"locales",{value:[],enumerable:!0});let o=[];if(o=o.concat(navigator.language),void 0!==navigator.languages&&(o=o.concat(navigator.languages)),Array.from(o).forEach(e=>{(e=e.match(/^[a-z]+/i,""))&&!o.includes(e[0])&&o.push(e[0])}),(o=(o=o.map(e=>e.trim().toLowerCase())).filter(function(e,t){return o.indexOf(e)===t})).length<=0)throw new Error("Locale not available");var r=new XMLHttpRequest;if(r.overrideMimeType("application/xslt+xml"),r.open("HEAD",DataSource.DATA+"/locales.xml",!1),r.send(),404!==r.status){if(r.open("GET",DataSource.DATA+"/locales.xml",!1),r.send(),Object.defineProperty(DataSource,"data",{value:200===r.status?r.responseXML:null}),!DataSource.data&&404!==r.status)throw new Error("Locale not available");if(DataSource.data){r=DataSource.data;let t=r.evaluate("/locales/*[@default]",r,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);for(let e=t.iterateNext();e;e=t.iterateNext()){var a=e.nodeName.toLowerCase();DataSource.locales.includes(a)||DataSource.locales.push(a)}for(let e=(t=r.evaluate("/locales/*",r,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null)).iterateNext();e;e=t.iterateNext()){var n=e.nodeName.toLowerCase();DataSource.locales.includes(n)||DataSource.locales.push(n)}if(DataSource.locales.length<=0)throw new Error("Locale not available");o.push(DataSource.locales[0]),o=o.filter(function(e){return DataSource.locales.includes(e)}),DataSource.locales.selection=(o.length?o:DataSource.locales)[0]}}}(),DataSource.localize=function(e){if(!DataSource.data||!DataSource.locales)throw new Error("Locale not available");if("string"!=typeof e)throw new TypeError("Invalid locale: "+typeof e);if(!(e=(e||"").trim().toLowerCase())||!DataSource.locales.includes(e))throw new Error("Locale not available");DataSource.locales.selection=e},DataSource.transform=function(e,t,o){if("string"==typeof e&&e.match(DataSource.PATTERN_LOCATOR)&&(e=DataSource.fetch(e)),"string"==typeof t&&t.match(DataSource.PATTERN_LOCATOR)&&(t=DataSource.fetch(t)),!(e instanceof XMLDocument))throw new TypeError("Invalid xml document");if(!(t instanceof XMLDocument))throw new TypeError("Invalid xml stylesheet");var r,a,n=new XSLTProcessor;if(n.importStylesheet(t),o&&"object"==typeof o)for([r,a]of"function"!=typeof o[Symbol.iterator]?Object.entries(o):o)"function"!=typeof o[r]&&n.setParameter(null,r,a);let i=e.evaluate("string(/*/@escape)",e,null,XPathResult.ANY_TYPE,null).stringValue;i=!!i.match(/^yes|on|true|1$/i);t=n.transformToDocument(e.clone());let s=t.querySelectorAll(i?"*":"*[escape]");s.forEach(e=>{var t;(i||(e.getAttribute("escape")||"on").match(/^yes|on|true|1$/i))&&(t=e.innerHTML).indexOf("<")<0&&t.indexOf(">")<0&&(e.innerHTML=e.textContent),e.removeAttribute("escape")}),(s=t.querySelectorAll("script[type],script:not([type])")).forEach(e=>{e.hasAttribute(DataSource.ATTRIBUTE_TYPE)&&!(e.getAttribute(DataSource.ATTRIBUTE_TYPE)||"").match(DataSource.PATTERN_JAVASCRIPT)||e.setAttribute("type","composite/javascript")}),s=t.childNodes,t.body?s=t.body.childNodes:t.firstChild&&t.firstChild.nodeName.match(/^transformiix\b/i)&&(s=t.firstChild.childNodes);var l=document.createDocumentFragment();s=Array.from(s);for(let e=0;e<s.length;e++)l.appendChild(s[e]);return l},DataSource.fetch=function(e,t,o){if("string"!=typeof e||!e.match(DataSource.PATTERN_LOCATOR))throw new Error("Invalid locator: "+String(e));var r=e.match(DataSource.PATTERN_LOCATOR)[1],a=e.match(DataSource.PATTERN_LOCATOR)[2];if(1===arguments.length){DataSource.cache=DataSource.cache||{};let e=DataSource.DATA+"/"+DataSource.locale+"/"+a+"."+r;a=(e=e.replace(/\/+/g,"/")).hashCode();if(DataSource.cache.hasOwnProperty(a))return DataSource.cache[a];var n=new XMLHttpRequest;if(n.overrideMimeType("application/xslt+xml"),n.open("GET",e,!1),n.send(),200!==n.status)throw new Error(`HTTP status ${n.status} for `+n.responseURL);return e=n.responseXML,(DataSource.cache[a]=e).clone()}if(!r.match(/^xml$/)&&t)throw new Error("Transformation is not supported for this locator");n=DataSource.fetch(e);if(!t)return n.clone();let i=e.replace(/(^((\w+\-+(?=\w))+)\w*)|(^\w+)/,"xslt");if("boolean"==typeof t||"string"==typeof(i=t)&&i.match(DataSource.PATTERN_LOCATOR))return DataSource.transform(n,DataSource.fetch(i),o);throw new Error("Invalid style: "+String(i))},DataSource.collect=function(...e){if(e.length<=0)return null;let t=[],o="collection";if(2===e.length&&"string"==typeof e[0]&&Array.isArray(e[1])){if(!e[0].match(DataSource.PATTERN_WORD))throw new TypeError("Invalid collector");o=e[0],t=Array.from(e[1])}else t=1===e.length&&Array.isArray(e[0])?t.concat(e[0]):Array.from(e);DataSource.cache=DataSource.cache||{};let r=o.hashCode()+":"+t.join().hashCode();if(t.forEach(e=>{r+=":"+String(e).hashCode()}),DataSource.cache.hasOwnProperty(r))return DataSource.cache[r].clone();const a=document.implementation.createDocument(null,o,null);return t.forEach(e=>{if("string"!=typeof e)throw new TypeError("Invalid collection entry");a.documentElement.appendChild(DataSource.fetch(e).documentElement.cloneNode(!0))}),(DataSource.cache[r]=a).clone()}),"undefined"==typeof Messages&&(window.Messages={},function(){var e=DataSource.localize;DataSource.localize=e=>{DataSource.localize$origin(e),window.Messages={};var e="/locales/"+DataSource.locale+"/label",o=DataSource.data.evaluate(e,DataSource.data,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);for(let t=o.iterateNext();t;t=o.iterateNext()){var r=(t.getAttribute("key")||"").trim();if(""!==r){let e=((t.getAttribute("value")||"").trim()+" "+t.textContent.trim()).trim();e=e.unescape(),Messages.hasOwnProperty(r)||Object.defineProperty(Messages,r,{value:e})}}},DataSource.localize$origin=e,DataSource.data&&DataSource.locale&&DataSource.locales&&DataSource.locales.includes(DataSource.locale)&&DataSource.localize(DataSource.locale)}()),"undefined"==typeof Composite&&(window.Composite={get MODULES(){return window.location.combine(window.location.pathcontext,"/modules")},get ATTRIBUTE_COMPOSITE(){return"composite"},get ATTRIBUTE_CONDITION(){return"condition"},get ATTRIBUTE_EVENTS(){return"events"},get ATTRIBUTE_ID(){return"id"},get ATTRIBUTE_IMPORT(){return"import"},get ATTRIBUTE_INTERVAL(){return"interval"},get ATTRIBUTE_ITERATE(){return"iterate"},get ATTRIBUTE_MESSAGE(){return"message"},get ATTRIBUTE_NAMESPACE(){return"namespace"},get ATTRIBUTE_NOTIFICATION(){return"notification"},get ATTRIBUTE_NAME(){return"name"},get ATTRIBUTE_OUTPUT(){return"output"},get ATTRIBUTE_RENDER(){return"render"},get ATTRIBUTE_RELEASE(){return"release"},get ATTRIBUTE_STRICT(){return"strict"},get ATTRIBUTE_TEXT(){return"text"},get ATTRIBUTE_TYPE(){return"type"},get ATTRIBUTE_VALIDATE(){return"validate"},get ATTRIBUTE_VALUE(){return"value"},get PATTERN_ATTRIBUTE_ACCEPT(){return/^(composite|condition|events|id|import|interval|iterate|message|namespace|notification|output|release|render|strict|validate)$/i},get PATTERN_ATTRIBUTE_STATIC(){return/^(composite|id)$/i},get PATTERN_EXPRESSION_CONTAINS(){return/\{\{(.|\r|\n)*?\}\}/g},get PATTERN_EXPRESSION_CONDITION(){return/^\s*\{\{\s*(([^}]|(}(?!})))*?)\s*\}\}\s*$/i},get PATTERN_EXPRESSION_VARIABLE(){return/^\s*\{\{\s*((?:(?:_*[a-z])|(?:_\w*))\w*)\s*:\s*(([^}]|(}(?!})))*?)\s*\}\}\s*$/i},get PATTERN_ELEMENT_IGNORE(){return/script|style/i},get PATTERN_SCRIPT(){return/script/i},get PATTERN_COMPOSITE_SCRIPT(){return/^composite\/javascript$/i},get PATTERN_COMPOSITE_ID(){return/^[_a-z]\w*$/i},get PATTERN_ELEMENT_ID(){return/^([_a-z]\w*)((?::\w+)*)?(@[_a-z]\w*(?::[_a-z]\w*)*)?$/i},get PATTERN_CUSTOMIZE_SCOPE(){return/[_a-z]([\w-]*\w)?$/i},get PATTERN_DATASOURCE_URL(){return/^\s*xml:\s*(\/\S+)\s*(?:\s*(?:xslt|xsl):\s*(\/\S+))*$/i},get PATTERN_EVENT(){return/^([A-Z][a-z]+)+$/},get EVENT_RENDER_START(){return"RenderStart"},get EVENT_RENDER_NEXT(){return"RenderNext"},get EVENT_RENDER_END(){return"RenderEnd"},get EVENT_MOUNT_START(){return"MountStart"},get EVENT_MOUNT_NEXT(){return"MountNext"},get EVENT_MOUNT_END(){return"MountEnd"},get EVENT_HTTP_START(){return"HttpStart"},get EVENT_HTTP_PROGRESS(){return"HttpProgress"},get EVENT_HTTP_RECEIVE(){return"HttpReceive"},get EVENT_HTTP_LOAD(){return"HttpLoad"},get EVENT_HTTP_ABORT(){return"HttpAbort"},get EVENT_HTTP_TIMEOUT(){return"HttpTimeout"},get EVENT_HTTP_ERROR(){return"HttpError"},get EVENT_HTTP_END(){return"HttpEnd"},get EVENT_ERROR(){return"Error"},get events(){return"abort after|print animation|end animation|iteration animation|start before|print before|unload blur can|play can|play|through change click context|menu copy cut dbl|click drag drag|end drag|enter drag|leave drag|over drag|start drop duration|change ended error focus focus|in focus|out hash|change input invalid key|down key|press key|up load loaded|data loaded|meta|data load|start message mouse|down mouse|enter mouse|leave mouse|move mouse|over mouse|out mouse|up mouse|wheel offline online open page|hide page|show paste pause play playing popstate progress rate|change resize reset scroll search seeked seeking select show stalled storage submit suspend time|update toggle touch|cancel touch|end touch|move touch|start transition|end unload volume|change waiting wheel"},get PATTERN_EVENT_FUNCTIONS(){return e=Composite.events.replace(/(?:\||\b)(\w)/g,(e,t)=>t.toUpperCase()),new RegExp("^on("+e.replace(/\s+/g,"|")+")");var e},get PATTERN_EVENT_NAMES(){return Composite.events.replace(/(?:\||\b)(\w)/g,(e,t)=>t.toUpperCase()).split(/\s+/)},get PATTERN_EVENT_FILTER(){return Composite.events.replace(/(?:\||\b)(\w)/g,(e,t)=>t.toUpperCase()).toLowerCase().split(/\s+/)}},Object.defineProperty(Composite,"statics",{value:new Set}),Object.defineProperty(Composite,"macros",{value:new Map}),Object.defineProperty(Composite,"selectors",{value:new Map}),Object.defineProperty(Composite,"acceptors",{value:new Set}),Object.defineProperty(Composite,"listeners",{value:new Map}),Object.defineProperty(Composite,"models",{value:new Set}),Composite.lock=function(t,e){if(t.queue=t.queue||[],void 0===t.lock||!1===t.lock)if(t.lock={ticks:1,selector:e,queue:[],share(){return this.ticks++,this},release(){if(this.ticks--,!(0<this.ticks)){if(t===Composite.render){let t=[];"string"==typeof this.selector?(e=document.querySelectorAll(this.selector),Array.from(e).forEach(e=>{t.includes(e)||t.push(e);e=e.querySelectorAll("*");Array.from(e).forEach(e=>{t.includes(e)||t.push(e)})})):this.selector instanceof Element&&(t=this.selector.querySelectorAll("*"),t=[this.selector].concat(Array.from(t))),t.forEach(e=>{Composite.mount(e)}),Composite.fire(Composite.EVENT_RENDER_END,this.selector)}else{if(t!==Composite.mount)throw new Error("Invalid context: "+t);Composite.fire(Composite.EVENT_MOUNT_END,this.selector)}var e=t.queue.shift();e&&Composite.asynchron(t,e),t.lock=!1}}},t===Composite.render)Composite.fire(Composite.EVENT_RENDER_START,e);else{if(t!==Composite.mount)throw new Error("Invalid context: "+t);Composite.fire(Composite.EVENT_MOUNT_START,e)}else if(t===Composite.render)Composite.fire(Composite.EVENT_RENDER_NEXT,e);else{if(t!==Composite.mount)throw new Error("Invalid context: "+t);Composite.fire(Composite.EVENT_MOUNT_NEXT,e)}return t.lock},void 0===Object.indication&&(Object.indication=0),void 0===Object.prototype.ordinal&&(Object.prototype.ordinal=function(){return this.serial=this.serial||++Object.indication,this.serial}),void 0===Object.using&&(Object.using=function(...e){return Namespace.exists.using(null,e)}),void 0===Object.lookup&&(Object.lookup=function(...e){return Namespace.lookup.apply(null,e)}),void 0===Object.exists&&(Object.exists=function(...e){return Namespace.exists.apply(null,e)}),void 0===Object.usable&&(Object.usable=function(e){return null!=e}),XMLHttpRequest.prototype.open$origin=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(...e){var t=(e=null)=>{if(e){if("loadstart"===e.type)e=[Composite.EVENT_HTTP_START,e];else if("progress"===e.type)e=[Composite.EVENT_HTTP_PROGRESS,e];else if("readystatechange"===e.type)e=[Composite.EVENT_HTTP_RECEIVE,e];else if("load"===e.type)e=[Composite.EVENT_HTTP_LOAD,e];else if("abort"===e.type)e=[Composite.EVENT_HTTP_ABORT,e];else if("error"===e.type)e=[Composite.EVENT_HTTP_ERROR,e];else if("timeout"===e.type)e=[Composite.EVENT_HTTP_TIMEOUT,e];else{if("loadend"!==e.type)return;e=[Composite.EVENT_HTTP_END,e]}Composite.fire(...e)}};void 0===this.open$init&&(this.open$init=!0,this.addEventListener("loadstart",t),this.addEventListener("progress",t),this.addEventListener("readystatechange",t),this.addEventListener("load",t),this.addEventListener("abort",t),this.addEventListener("error",t),this.addEventListener("timeout",t),this.addEventListener("loadend",t)),this.open$origin(...e)},Composite.listen=function(e,t){if("string"!=typeof e)throw new TypeError("Invalid event: "+typeof e);if("function"!=typeof t&&null!=t)throw new TypeError("Invalid callback: "+typeof t);if(!e.match(Composite.PATTERN_EVENT))throw new Error("Invalid event"+(e.trim()?": "+e:""));e=e.toLowerCase(),Composite.listeners.has(e)&&Array.isArray(Composite.listeners.get(e))||Composite.listeners.set(e,[]),Composite.listeners.get(e).push(t)},Composite.fire=function(e,...t){var o;e=(e||"").trim(),Composite.listeners.size<=0||!e||(o=Composite.listeners.get(e.toLowerCase()),Array.isArray(o)&&(t=[e,...t],o.forEach(e=>{e(...t)})))},Composite.asynchron=function(e,...t){window.setTimeout((e,...t)=>{e(...t)},0,e,...t)},Composite.validate=function(r,a){if((arguments.length<2||!1!==a)&&(a=!0),"string"==typeof r){if(!(r=r.trim()))return;let o=Array.from(document.querySelectorAll(r));return o.forEach((e,t)=>{o[t]=Composite.validate(e,a),void 0===o[t]?o[t]=0:o[t]=!0===o[t]?1:2}),(o=o.join("")).match(/^1+$/)?!0:!o.match(/2/)&&void 0}if(r instanceof Element){var o=r.ordinal(),n=Composite.render.meta[o];let t=!0;var i,s=Composite.mount.lookup(r);if(s instanceof Object){"function"==typeof r.setCustomValidity&&r.setCustomValidity(""),"function"==typeof r.checkValidity&&(t=r.checkValidity());let e;if(r instanceof Element&&(r.tagName.match(/^input$/i)&&r.type.match(/^radio|checkbox/i)?e=r.checked:r.tagName.match(/^select/i)&&"selectedIndex"in r?e=r.options[r.selectedIndex].value:Composite.ATTRIBUTE_VALUE in r&&(e=r[Composite.ATTRIBUTE_VALUE])),n.attributes.hasOwnProperty(Composite.ATTRIBUTE_VALIDATE)&&!0===t&&!0!==a&&"function"==typeof s.model[Composite.ATTRIBUTE_VALIDATE]&&(i=s.model[Composite.ATTRIBUTE_VALIDATE],t=void 0!==e?i.call(s.model,r,e):i.call(s.model,r)),!0!==t){let e;"string"!=typeof(e="string"==typeof t&&t.trim()?t.trim():e)&&((e=n.attributes.hasOwnProperty(Composite.ATTRIBUTE_MESSAGE)?String(n.attributes[Composite.ATTRIBUTE_MESSAGE]||""):e)||"").match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(e=String(Expression.eval(o+":"+Composite.ATTRIBUTE_MESSAGE,e))),"function"==typeof r.setCustomValidity&&Object.usable(e)&&(r.setCustomValidity(e),n.attributes.hasOwnProperty(Composite.ATTRIBUTE_NOTIFICATION))&&"function"==typeof r.reportValidity&&r.reportValidity()}if(void 0!==t)return t}}},Composite.mount=function(t,o){if(Composite.mount.queue=Composite.mount.queue||[],Composite.mount.lock&&Composite.mount.lock!==o)Composite.mount.queue.includes(t)||Composite.mount.queue.push(t);else{o=Composite.lock(Composite.mount,t);try{if("string"==typeof t)return(t=t.trim())?void document.querySelectorAll(t).forEach(e=>{Composite.mount(e,o.share())}):void 0;if(t instanceof Element&&!Composite.mount.queue.includes(t)&&!t.nodeName.match(Composite.PATTERN_ELEMENT_IGNORE)&&(Composite.mount.stack=Composite.mount.stack||[],!Composite.mount.stack.includes(t))){var e=t.ordinal(),r=Composite.render.meta[e];if(r instanceof Object){let o=r.attributes.hasOwnProperty(Composite.ATTRIBUTE_EVENTS)?r.attributes[Composite.ATTRIBUTE_EVENTS]:"";o=(o=(o=String(o||"")).toLowerCase().split(/\s+/)).filter((e,t,o)=>Composite.PATTERN_EVENT_FILTER.includes(e)&&o.indexOf(e)===t);var a=Composite.mount.lookup(t);if(a instanceof Object){let t=a.model;for(var n in t=void 0!==a.target?"object"==typeof a.target?a.target:null:t)"function"==typeof t[n]&&n.match(Composite.PATTERN_EVENT_FUNCTIONS)&&(n=n.substring(2).toLowerCase(),o.includes(n)||o.push(n));let e=t?Object.getPrototypeOf(t):null;for(;e;)Object.getOwnPropertyNames(e).forEach(e=>{"function"==typeof t[e]&&e.match(Composite.PATTERN_EVENT_FUNCTIONS)&&(e=e.substring(2).toLowerCase(),o.includes(e)||o.push(e))}),e=Object.getPrototypeOf(e)}Composite.mount.stack.push(t),o.forEach(e=>{t.addEventListener(e.toLowerCase(),r=>{var a=r.currentTarget,n=a.ordinal(),i=Composite.render.meta[n],s=r.type.toLowerCase();if(Composite.PATTERN_EVENT_FILTER.includes(s)){s=Composite.PATTERN_EVENT_FILTER.indexOf(s),s=Composite.PATTERN_EVENT_NAMES[s];let o,e=!0;var l=Composite.mount.lookup(a);if(l instanceof Object){let t;if(a instanceof Element&&(a.tagName.match(/^input$/i)&&a.type.match(/^radio|checkbox/i)?t=a.checked:a.tagName.match(/^select/i)&&"selectedIndex"in a?t=a.options[a.selectedIndex].value:Composite.ATTRIBUTE_VALUE in a&&(t=a[Composite.ATTRIBUTE_VALUE])),!0===(e=Composite.validate(a,!1))){a=e=>{var t=typeof e;return void 0!==e&&("object"==t&&null===e||"boolean"==t||"number"==t||"string"==t)};a(l.target)?l.target=t:"object"==typeof l.target?a(l.target.value)&&(l.target.value=t):void 0===l.target&&a(l.model.value)&&(l.model.value=t);let e=l.model;(e=void 0!==l.target?l.target&&"object"==typeof l.target?l.target:null:e)&&"function"==typeof e["on"+s]&&(o=e["on"+s].call(e,r))}}let t=i.attributes.hasOwnProperty(Composite.ATTRIBUTE_EVENTS)?i.attributes[Composite.ATTRIBUTE_EVENTS]:"";if((t=(t=String(t||"")).toLowerCase().split(/\s+/)).includes(s.toLowerCase())){let e=i.attributes.hasOwnProperty(Composite.ATTRIBUTE_RENDER)?i.attributes[Composite.ATTRIBUTE_RENDER]:"";((e=String(e||""))||"").match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(e=Expression.eval(n+":"+Composite.ATTRIBUTE_RENDER,e)),Composite.render(e)}return l instanceof Object&&((void 0!==o&&!o||void 0!==e&&!0!==e)&&r.preventDefault(),void 0!==o)?o:void 0}})})}}}finally{o.release()}}},Composite.mount.locate=function(e,t=!1){if(!(e instanceof Element))return null;let o=(e.getAttribute(Composite.ATTRIBUTE_ID)||"").trim();if(e.hasAttribute(Composite.ATTRIBUTE_COMPOSITE)){if(!o.match(Composite.PATTERN_COMPOSITE_ID))throw new Error("Invalid composite id"+(o?": "+o:""));const r=Composite.render.meta[e.ordinal()];if(!r||!r.attributes||!r.attributes.hasOwnProperty(Composite.ATTRIBUTE_NAMESPACE))return t?null:{model:o};const a=Composite.mount.locate(e.parentNode,!0);return a?(a.namespace?a.namespace.push(a.model):a.namespace=[a.model],{namespace:a.namespace,model:o}):{model:o}}const r=Composite.render.meta[e.ordinal()];if(r&&r.attributes&&r.attributes.hasOwnProperty(Composite.ATTRIBUTE_NAMESPACE))throw new Error("Namespace without composite"+(o?" for: "+o:""));const a=Composite.mount.locate(e.parentNode);if(!e.hasAttribute(Composite.ATTRIBUTE_ID))return a;if(o.match(Composite.PATTERN_ELEMENT_ID))return t={namespace:[],model:null,route:[],target:null},a&&(a.namespace?a.namespace.push(a.model):a.namespace=[a.model],t.namespace=a.namespace,a.route?t.route.push(...a.route):t.route.push(a.model)),(o=o.match(Composite.PATTERN_ELEMENT_ID))[3]&&(t.namespace=o[3].substring(1).split(/:/),t.route=[t.namespace[t.namespace.length-1]]),t.route.push(o[1]),o[2]&&t.route.push(...o[2].substring(1).split(/:/)),t.target=t.route[t.route.length-1],t.model=t.namespace.pop(),t.namespace.length<=0&&delete t.namespace,t.model?t:null;throw new Error("Invalid element id"+(o?": "+o:""))},Composite.mount.lookup=function(e){var t,o,e=Composite.mount.locate(e);return e&&(t=Namespace.lookup(...e.namespace||[]),o=Object.lookup(t||window,e.model))?void 0===e.target?{meta:e,namespace:t,model:o}:(e={meta:e,namespace:t,model:o,get target(){return Object.lookup(this.namespace,...this.meta.route||[])},set target(e){let t=[this.meta.model];var o=(t=this.meta.route?this.meta.route:t).pop();Object.lookup(this.namespace,...t)[o]=e}}).model&&void 0!==e.target?e:null:null},Composite.customize=function(...e){let t;if("string"==typeof(t=0<e.length?e[0]:t)&&1<e.length&&"string"==typeof e[1]&&t.match(/^@ATTRIBUTES-STATICS$/i)){const r=[];(e[1]||"").trim().split(/\s+/).forEach(e=>{e=e.toLowerCase(),Composite.statics.has(e)||e.match(Composite.PATTERN_ATTRIBUTE_ACCEPT)||(Composite.statics.add(e),r.push(e))});const a=t=>{if(t instanceof Element){var e=t.ordinal();const o=Composite.render.meta[e];o&&(r.forEach(e=>{o.statics=o.statics||{},o.statics.hasOwnProperty[e]&&void 0!==o.statics[e]||(t.hasAttribute(e)?o.statics[e]=t.getAttribute(e):o.statics[e]=null)}),Array.from(t.childNodes).forEach(e=>{a(e)}))}};void a(document.body)}else if("function"==typeof t&&1===e.length)Composite.acceptors.add(t);else{if("string"!=typeof t)throw new TypeError("Invalid scope: "+typeof t);var o,e=1<e.length?e[1]:null;if("function"!=typeof e&&null!=e)throw new TypeError("Invalid callback: "+typeof e);if((t=t.trim()).length<=0)throw new Error("Invalid scope");t.match(Composite.PATTERN_CUSTOMIZE_SCOPE)?null===e?Composite.macros.delete(t.toLowerCase()):Composite.macros.set(t.toLowerCase(),e):(o=t.toLowerCase().hashCode(),null===e?Composite.selectors.delete(o):Composite.selectors.set(o,{selector:t,callback:e}))}},Composite.render=function(n,i){if(n)if(Composite.render.queue=Composite.render.queue||[],Composite.render.lock&&Composite.render.lock!==i)Composite.render.queue.includes(n)||Composite.render.queue.push(n);else{i=Composite.lock(Composite.render,n);try{if("string"==typeof n)return(n=n.trim())?void document.querySelectorAll(n).forEach(e=>{Composite.render(e,i.share())}):void 0;if(n instanceof Node){var e,t,o,r=Composite.macros.get(n.nodeName.toLowerCase());if(!r||!1!==r(n)){if(n.parentNode)for(var[s,l]of Composite.selectors){var c=n.parentNode.querySelectorAll(l.selector);if(Array.from(c).includes(n)&&!1===l.callback(n))return}Composite.render.meta=Composite.render.meta||[];let r=n.ordinal(),a=Composite.render.meta[r];if(a||(Composite.acceptors.forEach(e=>{e.call(null,n)}),a={serial:r,element:n,attributes:{}},Composite.render.meta[r]=a,n instanceof Element&&n.attributes&&(Array.from(n.attributes).forEach(e=>{((e={name:e.name.toLowerCase(),value:(e.value||"").trim()}).value.match(Composite.PATTERN_EXPRESSION_CONTAINS)||e.name.match(Composite.PATTERN_ATTRIBUTE_ACCEPT)||Composite.statics.has(e.name))&&(!e.name.match(Composite.PATTERN_ATTRIBUTE_ACCEPT)||e.name.match(Composite.PATTERN_ATTRIBUTE_STATIC)||Composite.statics.has(e.name)||e.name===Composite.ATTRIBUTE_RELEASE||n.removeAttribute(e.name),a.attributes[e.name]=e.value,e.value.match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(e.name.match(Composite.PATTERN_ATTRIBUTE_STATIC)||e.name===Composite.ATTRIBUTE_ID||e.name===Composite.ATTRIBUTE_EVENTS||Composite.statics.has(e.name))&&(e.value=Expression.eval(n.ordinal()+":"+e.name,e.value)),!e.name.match(Composite.PATTERN_ATTRIBUTE_STATIC)&&e.name!==Composite.ATTRIBUTE_ID&&e.name!==Composite.ATTRIBUTE_EVENTS||(a.attributes[e.name]=e.value),a.statics=a.statics||{},Composite.statics.has(e.name)&&(a.statics[e.name]=e.value),e.name.match(Composite.PATTERN_ATTRIBUTE_STATIC)||e.name===Composite.ATTRIBUTE_ID||e.name===Composite.ATTRIBUTE_EVENTS||Composite.statics.has(e.name))&&n.setAttribute(e.name,e.value)}),e=a.attributes.hasOwnProperty(Composite.ATTRIBUTE_CONDITION)?a.attributes[Composite.ATTRIBUTE_CONDITION]:null,delete a.attributes[Composite.ATTRIBUTE_CONDITION],e?(delete a.attributes[Composite.ATTRIBUTE_CONDITION],t=document.createTextNode(""),a={serial:t.ordinal(),element:t,attributes:a.attributes,condition:e,template:n.cloneNode(!0),output:null,complete:!1,share:null},Composite.render.meta[a.serial]=a,delete Composite.render.meta[r],Composite.fire(Composite.EVENT_RENDER_NEXT,t),n.parentNode.replaceChild(t,n),n=t,r=n.ordinal(),a=Composite.render.meta[r]):a.attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)&&Composite.render.include(n))),a.hasOwnProperty("placeholder"))Composite.render(a.placeholder.element,i.share()),n=a.placeholder.element,r=n.ordinal(),a=Composite.render.meta[r];else if(n.nodeType!==Node.TEXT_NODE||a.hasOwnProperty(Composite.ATTRIBUTE_CONDITION)){const I=e=>{if(!(e instanceof Element))return null;var t,o=document.createElement("div");let r=o;for(;e;e=e.parentNode)e instanceof Element&&e.hasAttribute(Composite.ATTRIBUTE_ID)&&((t=document.createElement("div")).setAttribute(Composite.ATTRIBUTE_ID,e.getAttribute(Composite.ATTRIBUTE_ID)),e.hasAttribute(Composite.ATTRIBUTE_COMPOSITE)&&t.setAttribute(Composite.ATTRIBUTE_COMPOSITE,""),t.appendChild(r),r=t);return o};var p,u,T,m,E=e=>{"string"!=typeof e||Composite.models.has(e)||(Composite.models.add(e),(e=Object.lookup(e))&&"function"==typeof e.dock&&e.dock.call(e))};if(n instanceof Element&&a.attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)){var d=String(a.attributes[Composite.ATTRIBUTE_ID]||"").trim();if(!d.match(Composite.PATTERN_COMPOSITE_ID))throw new Error("Invalid composite id"+(d?": "+d:""));E(d)}if(n.nodeType===Node.TEXT_NODE&&a.hasOwnProperty(Composite.ATTRIBUTE_CONDITION)){var h,f,A,C,g,w,y=a;if(y.share===i.ordinal())return;if(y.share=i.ordinal(),!y.condition||!y.condition.match(Composite.PATTERN_EXPRESSION_CONDITION)||!0!==Expression.eval(r+":"+Composite.ATTRIBUTE_CONDITION,y.condition))return(h=(y.condition||"").trim()).match(Composite.PATTERN_EXPRESSION_CONDITION)||console.error("Invalid condition"+(h?": "+h:"")),y.output?(n.parentNode.removeChild(y.output),void delete y.output):void 0;if(y.complete||(y.attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)&&(A={serial:f=y.template.ordinal(),element:y.template,attributes:y.attributes,share:null},Composite.render.meta[f]=A,Composite.render.include(y.template),delete Composite.render.meta[f]),y.complete=!0),y.attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)){var R=String(y.attributes[Composite.ATTRIBUTE_ID]||"").trim();if(!R.match(Composite.PATTERN_COMPOSITE_ID))throw new Error("Invalid composite id"+(R?": "+R:""));E(R)}if(!y.output)return C=y.template.cloneNode(!0),I(n.parentNode).appendChild(C),w={serial:g=(y.output=C).ordinal(),element:C,attributes:a.attributes},Composite.render.meta[g]=w,Composite.render(C,i.share()),w.placeholder=y,void n.parentNode.insertBefore(C,n);n=y.output,r=n.ordinal(),a=Composite.render.meta[r]}if(n instanceof Element){if(a.attributes.hasOwnProperty(Composite.ATTRIBUTE_IMPORT)){n.innerHTML="";let t=a.attributes[Composite.ATTRIBUTE_IMPORT];if((t||"").match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(t=Expression.eval(r+":"+Composite.ATTRIBUTE_IMPORT,String(t))),Composite.render.cache=Composite.render.cache||{},t)if(t instanceof Element||t instanceof NodeList)n.appendChild(t,!0),delete a.attributes[Composite.ATTRIBUTE_IMPORT];else if(String(t).match(Composite.PATTERN_DATASOURCE_URL)){let e=String(t).match(Composite.PATTERN_DATASOURCE_URL);e[2]=DataSource.fetch("xslt://"+(e[2]||e[1])),e[1]=DataSource.fetch("xml://"+e[1]),e=DataSource.transform(e[1],e[2]),n.appendChild(e,!0);var N=n.ordinal();delete Composite.render.meta[N].attributes[Composite.ATTRIBUTE_IMPORT]}else void 0!==Composite.render.cache[t]?(n.innerHTML=Composite.render.cache[t],p=n.ordinal(),delete Composite.render.meta[p].attributes[Composite.ATTRIBUTE_IMPORT]):Composite.asynchron((e,t,o)=>{try{var r=new XMLHttpRequest;if(r.overrideMimeType("text/plain"),r.open("GET",o,!1),r.send(),200!==r.status)throw new Error(`HTTP status ${r.status} for `+r.responseURL);var a=r.responseText.trim(),n=(Composite.render.cache[r.responseURL]=a,e.innerHTML=a,e.ordinal());delete Composite.render.meta[n].attributes[Composite.ATTRIBUTE_IMPORT]}catch(e){throw Composite.fire(Composite.EVENT_HTTP_ERROR,e),e}finally{t.release()}},n,i.share(),t);else delete a.attributes[Composite.ATTRIBUTE_IMPORT]}if(a.attributes.hasOwnProperty(Composite.ATTRIBUTE_OUTPUT)){n.innerHTML="";let t=a.attributes[Composite.ATTRIBUTE_OUTPUT];if((t||"").match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(t=Expression.eval(r+":"+Composite.ATTRIBUTE_OUTPUT,String(t))),String(t).match(Composite.PATTERN_DATASOURCE_URL)){let e=String(t).match(Composite.PATTERN_DATASOURCE_URL);e[2]=DataSource.fetch("xslt://"+(e[2]||e[1])),e[1]=DataSource.fetch("xml://"+e[1]),e=DataSource.transform(e[1],e[2]),n.appendChild(e,!0)}else t instanceof Node?n.appendChild(t.cloneNode(!0),!0):t instanceof NodeList?Array.from(t).forEach(function(e,t){n.appendChild(e.cloneNode(!0),0===t)}):n.innerHTML=String(t)}let e=String(a.attributes[Composite.ATTRIBUTE_INTERVAL]||"").trim();if(e&&!a.interval&&(u=r+":"+Composite.ATTRIBUTE_INTERVAL,(e=String(Expression.eval(u,e))).match(/^\d+$/)?(a.hasOwnProperty("placeholder")&&(a=a.placeholder,n=a.element),e=parseInt(e),a.interval={object:a,selector:n,task(e){var t=e.selector.ordinal(),t=Composite.render.meta[t];let o=!document.body.contains(e.selector);t||(o=!0),(o=!t||!t.hasOwnProperty(Composite.ATTRIBUTE_CONDITION)||t.condition.element&&document.body.contains(t.condition.element)?o:!0)?(window.clearInterval(e.timer),delete e.object.interval):Composite.render(e.selector)}},a.interval.timer=window.setInterval(a.interval.task,e,a.interval)):e&&console.error("Invalid interval: "+e)),a.attributes.hasOwnProperty(Composite.ATTRIBUTE_ITERATE))if(a.iterate||((m=(T=String(a.attributes[Composite.ATTRIBUTE_ITERATE]||"").trim()).match(Composite.PATTERN_EXPRESSION_VARIABLE))?(a.iterate={name:m[1].trim(),expression:"{{"+m[2].trim()+"}}"},a.template=n.cloneNode(!0)):console.error("Invalid iterate"+(T?": "+T:""))),a.iterate){var v=window[a.iterate.name];try{var S=r+":"+Composite.ATTRIBUTE_ITERATE;n.innerHTML="";let e=Expression.eval(S,a.iterate.expression);if(e){if(e instanceof XPathResult){for(var _={entry:null,array:[],iterate:e};_.entry=_.iterate.iterateNext();)_.array.push(_.entry);e=_.array}else e=Array.from(e);e.forEach((e,t,o)=>{var r={},e=(Object.defineProperty(r,"item",{value:e,enumerable:!0}),Object.defineProperty(r,"index",{value:t,enumerable:!0}),Object.defineProperty(r,"data",{value:o,enumerable:!0}),window[a.iterate.name]=r,document.createElement("div"));I(n.parentNode).appendChild(e),e.appendChild(a.template.cloneNode(!0).childNodes),Composite.render(e,i.share()),n.appendChild(e.childNodes),delete Composite.render.meta[e.ordinal()]})}}finally{delete window[a.iterate.name],void 0!==v&&(window[a.iterate.name]=v)}}if(!n.nodeName.match(Composite.PATTERN_ELEMENT_IGNORE)){var P=[];for(const O in a.attributes)a.attributes.hasOwnProperty(O)&&P.push(O);Composite.ATTRIBUTE_VALUE in n&&a.attributes.hasOwnProperty(Composite.ATTRIBUTE_VALUE)&&!P.includes(Composite.ATTRIBUTE_VALUE)&&P.push(Composite.ATTRIBUTE_VALUE),P.forEach(t=>{if(!t.match(Composite.PATTERN_ATTRIBUTE_ACCEPT)||t.match(Composite.PATTERN_ATTRIBUTE_STATIC)){let e=String(a.attributes[t]||"");var o;e.match(Composite.PATTERN_EXPRESSION_CONTAINS)&&(o=r+":"+t,void 0!==(e=Expression.eval(o,e))?(e=(e=String(e).encodeHtml()).replace(/"/g,"&quot;"),t.toLowerCase()===Composite.ATTRIBUTE_VALUE&&Composite.ATTRIBUTE_VALUE in n&&(n.value=e),n.setAttribute(t,e)):n.removeAttribute(t))}})}if(n.nodeName.match(Composite.PATTERN_SCRIPT))if((n.getAttribute(Composite.ATTRIBUTE_TYPE)||"").trim().match(Composite.PATTERN_COMPOSITE_SCRIPT))try{Composite.render.include.eval(n.textContent)}catch(e){console.error("Composite JavaScript",e)}!n.childNodes||n.nodeName.match(Composite.PATTERN_ELEMENT_IGNORE)||a.attributes.hasOwnProperty(Composite.ATTRIBUTE_ITERATE)||Array.from(n.childNodes).forEach(e=>{n.contains(e)&&Composite.render(e,i.share())}),n.hasAttribute(Composite.ATTRIBUTE_RELEASE)&&n.removeAttribute(Composite.ATTRIBUTE_RELEASE)}}else{if(n.parentNode&&n.parentNode.nodeName.match(Composite.PATTERN_ELEMENT_IGNORE))return;if(a.attributes.hasOwnProperty(Composite.ATTRIBUTE_TEXT))return;if(a.attributes.hasOwnProperty(Composite.ATTRIBUTE_VALUE))return void a.render();let e=n.textContent;if(e.match(Composite.PATTERN_EXPRESSION_CONTAINS)){if((e=e.replace(Composite.PATTERN_EXPRESSION_CONTAINS,e=>{var t,o,r;return e.substring(2,e.length-2).trim()?(o={serial:t=(o=document.createTextNode("")).ordinal(),element:o,attributes:{},value:null,render(){let e="";var t,o;this.attributes.hasOwnProperty(Composite.ATTRIBUTE_NAME)?(t=String(this.attributes[Composite.ATTRIBUTE_NAME]||"").trim(),o=String(this.attributes[Composite.ATTRIBUTE_VALUE]||"").trim(),window[t]=Expression.eval(this.serial+":"+Composite.ATTRIBUTE_VALUE,o)):(e=String(this.attributes[Composite.ATTRIBUTE_VALUE]||""),e=Expression.eval(this.serial+":"+Composite.ATTRIBUTE_VALUE,e)),this.value=e,this.element.textContent=e}},(r=e.match(Composite.PATTERN_EXPRESSION_VARIABLE))?(o.attributes[Composite.ATTRIBUTE_NAME]=r[1],o.attributes[Composite.ATTRIBUTE_VALUE]="{{"+r[2]+"}}"):o.attributes[Composite.ATTRIBUTE_VALUE]=e,Composite.render.meta[t]=o,"{{"+t+"}}"):""})).match(Composite.PATTERN_EXPRESSION_CONTAINS))return(o=e.split(/(\{\{\d+\}\})/)).forEach((e,t,o)=>{var r,a;e.match(/^\{\{\d+\}\}$/)?(a=parseInt(e.substring(2,e.length-2).trim()),a=Composite.render.meta[a],Composite.fire(Composite.EVENT_RENDER_NEXT,a.element),a.render(),o[t]=a.element):(a={serial:r=(a=document.createTextNode(e)).ordinal(),element:a,attributes:{}},Composite.fire(Composite.EVENT_RENDER_NEXT,a.element),a.element.textContent=e,a.attributes[Composite.ATTRIBUTE_TEXT]=e,Composite.render.meta[r]=a,o[t]=a.element)}),null===n.parentNode?void 0:(o.forEach(e=>{n.parentNode.insertBefore(e,n)}),void n.parentNode.removeChild(n));n.nodeValue=e}void(a.attributes[Composite.ATTRIBUTE_TEXT]=e)}}}}finally{i.release()}}},Composite.render.include=function(a){if(!("string"==typeof a||a instanceof Element))throw new TypeError("Invalid composite: "+typeof a);let e;if(a instanceof Element){if(!a.hasAttribute(Composite.ATTRIBUTE_ID))throw new Error("Unknown composite without id");if(!(e=Composite.render.meta[a.ordinal()]))throw new Error("Unknown composite")}Composite.render.cache=Composite.render.cache||{};let t=a instanceof Element?a.id:a;e&&e.attributes.hasOwnProperty(Composite.ATTRIBUTE_STRICT)||(t=t.uncapitalize());var o,r=a instanceof Element?Composite.mount.locate(a):null,r=(r&&r.namespace&&(t=r.namespace.join("/")+"/"+t),Composite.MODULES+"/"+t);void 0!==Composite.render.cache[r+".composite"]?void 0===Composite.render.cache[r+".html"]||!e||e.attributes.hasOwnProperty(Composite.ATTRIBUTE_IMPORT)||e.attributes.hasOwnProperty(Composite.ATTRIBUTE_OUTPUT)||a.innerHTML.trim()||a instanceof Element&&(a.innerHTML=Composite.render.cache[r+".html"]):(Composite.render.cache[r+".composite"]=null,(o=e=>{var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain"),t.open("HEAD",e,!1),t.send(),404!==t.status){if(200!==t.status)throw new Error(`HTTP status ${t.status} for `+t.responseURL);if(t.open("GET",e,!1),t.send(),404!==t.status){if(200!==t.status)throw new Error(`HTTP status ${t.status} for `+t.responseURL);e=t.responseText.trim();if(e){var o=document.createElement("a");if(o.href=t.responseURL,Composite.render.cache[o.pathname]=e,t.responseURL.match(/\.css$/)){o=document.querySelector("html head");if(!o)throw new Error("No head element found");var r=document.createElement("style");r.setAttribute("type","text/css"),r.textContent=e,o.appendChild(r)}else if(t.responseURL.match(/\.js$/))try{Composite.render.include.eval(e)}catch(e){throw console.error(t.responseURL,e.name+": "+e.message),e}else t.responseURL.match(/\.html$/)&&a instanceof Element&&(a.innerHTML=e)}}}})(r+".css"),o(r+".js"),!e||e.attributes.hasOwnProperty(Composite.ATTRIBUTE_IMPORT)||e.attributes.hasOwnProperty(Composite.ATTRIBUTE_OUTPUT)||a.innerHTML.trim()||o(r+".html"))},Composite.render.include.eval=function(script){for(script=script.split(/[\r\n]+/);script&&0<script.length&&script[0].match(/(^\s*(#import(\s+.*)*)*$)/);){const line=script.shift().replace(/^\s*#import(\s+|$)/,"");line.split(/\s+/).forEach(e=>{e&&Composite.render.include(e)})}script=script.join("\r\n").trim(),script&&eval(script)},window.addEventListener("error",e=>{Composite.fire(Composite.EVENT_ERROR,e)}),window.addEventListener("load",()=>{var e;document.querySelector("html")&&(document.querySelector("html head")||document.querySelector("html").appendChild(document.createElement("head")),(e=document.createElement("style")).setAttribute("type","text/css"),e.innerHTML="*[release] {display:none!important;}",document.querySelector("html head").appendChild(e)),Composite.render.include("common"),new MutationObserver(e=>{e.forEach(e=>{var t,o;Composite.render.meta&&(t=e.target.ordinal(),t=Composite.render.meta[t],"characterData"===e.type&&e.target.nodeType===Node.TEXT_NODE?t&&t.hasOwnProperty(Composite.ATTRIBUTE_VALUE)&&String(t.value||"")!==e.target.textContent&&(e.target.textContent=t.value||""):(t&&"attributes"===e.type&&((o=(e.attributeName||"").toLowerCase().trim()).match(Composite.PATTERN_ATTRIBUTE_ACCEPT)&&!o.match(Composite.PATTERN_ATTRIBUTE_STATIC)?e.target.hasAttribute(o)&&e.target.removeAttribute(o):o.match(Composite.PATTERN_ATTRIBUTE_STATIC)?t.attributes.hasOwnProperty(o)?e.target.hasAttribute(o)&&t.attributes[o]===e.target.getAttribute(o)||e.target.setAttribute(o,t.attributes[o]):e.target.hasAttribute(o)&&e.target.removeAttribute(o):Composite.statics.has(o)&&(t.statics=t.statics||{},t.statics.hasOwnProperty(o)?e.target.hasAttribute(o)&&t.statics[o]===e.target.getAttribute(o)||e.target.setAttribute(o,t.statics[o]):e.target.hasAttribute(o)&&e.target.removeAttribute(o))),e.addedNodes&&e.addedNodes.forEach(e=>{(e instanceof Element||e instanceof Node&&e.nodeType===Node.TEXT_NODE)&&!Composite.render.meta[e.ordinal()]&&document.body.contains(e)&&Composite.render(e)}),e.removedNodes&&e.removedNodes.forEach(e=>{const o=e=>{e.childNodes&&Array.from(e.childNodes).forEach(e=>{o(e)});var t=e.ordinal(),t=Composite.render.meta[t];t&&t.attributes.hasOwnProperty(Composite.ATTRIBUTE_COMPOSITE)&&(t=Composite.mount.lookup(e))&&t.meta&&t.meta.model&&t.model&&Composite.models.has(t.meta.model)&&(Composite.models.delete(t.meta.model),"function"==typeof t.model.undock)&&t.model.undock.call(t.model),delete Composite.render.meta[e.ordinal()]};o(e)})))})}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,characterData:!0})})),"undefined"==typeof Expression&&(window.Expression={get TYPE_TEXT(){return 1},get TYPE_EXPRESSION(){return 2},get TYPE_LITERAL(){return 3},get TYPE_SCRIPT(){return 4},get TYPE_KEYWORD(){return 5},get TYPE_OTHER(){return 6},get TYPE_METHOD(){return 7},get TYPE_VALUE(){return 8},get TYPE_LOGIC(){return 9}},Object.defineProperty(Expression,"cache",{value:new Map}),Expression.lookup=function(context,expression){try{if("string"==typeof context&&void 0===expression)return context.match(/^#[a-z]\w*$/i)?document.querySelector(context):context.match(/^(#[a-z]\w*)\.(.*)*$/i)?(expression=context.match(/^(#[a-z]\w*)\.(.*)*$/i),Expression.lookup(document.querySelector(expression[1]),expression[2])):context.indexOf(".")<0?eval(context):(expression=context.match(/^(.*?)\.(.*)$/),Expression.lookup(eval(expression[1]),expression[2]));expression=expression.indexOf(".")<0?[null,expression]:expression.match(/^(.*?)\.(.*)$/);let method="get"+expression[1].capitalize();const keys=Object.keys(context);return(keys.includes(method)&&"function"==typeof context[method]||(method="is"+expression[1].capitalize()),keys.includes(method)&&"function"==typeof context[method])?context=context[method]():context=context[expression[1]],2<expression.length?Expression.lookup(context,expression[2]):context}catch(exception){}},Expression.parse=function(e){if(""===(e=null==e?"":e.trim()))return"";const o={words:[],text:[],expression:[],literal:[],script:[],keyword:[],other:[],value:[],method:[],logic:[]};if((e=(e=(e=(e=e.replace(/(^[\r\n]+)|([\r\n]+$)/g,"")).replace(/[\r\n]/g," ")).replace(/(\{\{)/g,"\n$1")).replace(/(\}\})/g,"$1\n")).indexOf("\n")<0)return'"'+e+'"';e=e.replace(/(^\n+)|(\n+$)/g,"");const a=e=>{e.type===Expression.TYPE_TEXT?o.text.push(e):e.type===Expression.TYPE_EXPRESSION?o.expression.push(e):e.type===Expression.TYPE_SCRIPT?o.script.push(e):e.type===Expression.TYPE_LITERAL?o.literal.push(e):e.type===Expression.TYPE_KEYWORD?o.keyword.push(e):e.type===Expression.TYPE_OTHER?o.other.push(e):e.type===Expression.TYPE_VALUE?o.value.push(e):e.type===Expression.TYPE_METHOD?o.method.push(e):e.type===Expression.TYPE_LOGIC&&o.logic.push(e)},n=(e.split(/\n/).forEach(e=>{var t={type:Expression.TYPE_TEXT,data:e};e.match(/^\{\{.*\}\}$/)?(t.data=t.data.substring(2,t.data.length-2),t.type=Expression.TYPE_EXPRESSION):t.data='"'+t.data.replace(/\\/,"\\\\").replace(/"/,'\\"')+'"',a(t),o.words.push(t)}),o.expression.forEach(e=>{let t=e.data;t=(t=t.replace(/(^|[^\\])((?:\\{2})*)(\\\')/g,"$1$2\\u0027")).replace(/(^|[^\\])((?:\\{2})*)(\\\")/g,"$1$2\\u0022");const r=[];for(var o=/(^.*?)(([\'\"]).*?(\3|$))/m;t.match(o);)t=t.replace(o,(e,t,o)=>(t={type:Expression.TYPE_SCRIPT,data:t},a(t),r.push(t),o={type:Expression.TYPE_LITERAL,data:o},a(o),r.push(o),""));0<t.length&&(t={type:Expression.TYPE_SCRIPT,data:t},a(t),r.push(t)),e.data=r}),["and","&&","or","||","not","!","eq","==","eeq","===","ne","!=","nee","!==","lt","<","gt",">","le","<=","ge",">=","empty","!","div","/","mod","%"]),t=(o.script.forEach(e=>{let t=e.data;for(let e=0;e<n.length;e+=2){var o=new RegExp("(^|[^\\w\\.])("+n[e]+")(?=[^\\w\\.]|$)","ig");t=t.replace(o,"$1\n\r"+n[e+1]+"\n")}t=t.replace(/(^|[^\w\.])(true|false|null|instanceof|typeof|undefined|new)(?=[^\w\.]|$)/gi,(e,t,o)=>t+"\n\r"+o.toLowerCase()+"\n");const r=[];t.split(/\n/).forEach(e=>{var t={type:Expression.TYPE_OTHER,data:e};e.match(/^\r/)&&(t.data=e.substring(1),t.type=Expression.TYPE_KEYWORD),a(t),r.push(t)}),e.data=r}),o.other.forEach(e=>{let t=e.data;t=(t=t.replace(/(^|[^\w\.])(#?[a-z](?:[\w\.]{0,}\w)?(?=(?:[^\w\(\.]|$)))/gi,"$1\n\r\r$2\n")).replace(/(^|[^\w\.])(#?[a-z](?:[\w\.]{0,}\w)?)(?=\()/gi,"$1\n\r$2\n");const o=[];t.split(/\n/).forEach(e=>{var t={type:Expression.TYPE_LOGIC,data:e};e.match(/^\r\r/)?(t.data='Expression.lookup("'+e.substring(2)+'")',t.type=Expression.TYPE_VALUE):e.match(/^\r[^\r]/)&&(t.data=e.substring(1),t.data.match(/^#[a-z]/i)&&(t.data='Expression.lookup("'+t.data+'")'),t.type=Expression.TYPE_METHOD),a(t),o.push(t)}),e.data=o}),[]),r=e=>{Array.isArray(e)?e.forEach(e=>{r(e)}):Array.isArray(e.data)?e.data.forEach(e=>{r(e)}):"string"==typeof e.data&&(e.data&&e.data.length?t.push(e):r(e.data))};r(o.words);let i="";return t.forEach(e=>{e.type===Expression.TYPE_TEXT?i+="\n"+e.data+"\r":e.type===Expression.TYPE_KEYWORD?i+=" "+e.data+" ":e.type!==Expression.TYPE_LITERAL&&e.type!==Expression.TYPE_VALUE&&e.type!==Expression.TYPE_METHOD&&e.type!==Expression.TYPE_LOGIC||(i+=e.data)}),(i=i.replace(/(^\n)|(\r$)/g,"")).match(/\r[^\n]*$/)&&(i+=")"),i=(i=(i=(i=(i=i.match(/^[^\r]*\n/)?"("+i:i).replace(/(\n\r)+/g," + ")).replace(/\r/g," + (")).replace(/\n/g,") + ")).replace(/(^\s*\+\s*)|(\s*\+\s*$)/,"")},Expression.eval=function(...variants){let expression;1<variants.length?expression=String(variants[1]):0<variants.length&&(expression=String(variants[0]));let serial,script=(1<variants.length&&variants[0]&&(serial=String(variants[0])),serial?Expression.cache.get(serial):null);script=script||Expression.parse(expression),serial&&Expression.cache.set(serial,script);try{return eval(script)}catch(exception){return exception.message+="\n\t"+script,console.error(exception),exception.message}}),"undefined"==typeof ReactProxy&&(window.ReactProxy={},ReactProxy.selector=null,ReactProxy.create=function(e){return e.toReactProxy()},Composite.listen(Composite.EVENT_RENDER_START,function(e,t){ReactProxy.selector=t}),Composite.listen(Composite.EVENT_RENDER_NEXT,function(e,t){ReactProxy.selector=t}),Composite.listen(Composite.EVENT_RENDER_END,function(e,t){ReactProxy.selector=null}),void 0===Object.prototype.toReactProxy)&&(Object.prototype.toReactProxy=function(){if("object"!=typeof this)throw new TypeError("Not supported data type: "+typeof this);if(Array.isArray(this))return this.map(e=>"object"==typeof e&&null!==e?e.toReactProxy():e);var e=Object.assign({},this);for(const a in e){var t=e[a];"object"==typeof t&&null!==t&&(e[a]=e[a].toReactProxy())}const o=new Proxy(e,{notifications:new Map,get(e,t){try{return e[t]}finally{Composite.asynchron((e,t,o,r)=>{if(null!==e&&t.hasOwnProperty(o)){var a=r.get(o)||new Map;if(!a.has(e.ordinal())){for(const n of a.values()){if(void 0!==n.contains&&n.contains(e))return;void 0!==e.contains&&e.contains(n)&&a.delete(n.ordinal())}a.set(e.ordinal(),e),r.set(o,a)}}},ReactProxy.selector,e,t,this.notifications)}},set(e,t,o){"object"==typeof o&&null!==o&&(o=o.toReactProxy());try{return e[t]=o}finally{Composite.asynchron((e,t,o,r)=>{if(null===ReactProxy.selector&&t.hasOwnProperty(o)){var a=this.notifications.get(o)||new Map;for(const n of a.values())document.body.contains(n)?Composite.render(n):a.delete(n.ordinal())}},ReactProxy.selector,e,t,this.notifications)}}}),r=(o.toReactProxy=()=>o,this);return o.toObject=()=>r,o}),"undefined"==typeof Path&&(window.Path={get PATTERN_PATH(){return/(^(\w(\-*\w)*)*((#+\w(\-*\w)*)+)#*$)|(^\w(\-*\w)*$)|(^#+$)|(^$)/},get PATTERN_URL(){return/^\w+:\/.*?(#.*)*$/i},get PATTERN_PATH_FUNCTIONAL(){return/^#{3,}$/}},Path.normalize=function(...e){if(e.length<=0)return null;if(0<e.length&&!Object.usable(e[0]))return null;if(1<e.length&&!Object.usable(e[1]))return null;if(1<e.length&&"string"!=typeof e[0])throw new TypeError("Invalid root: "+typeof e[0]);let t="#";if(1<e.length){t=e[0];try{t=Path.normalize(t)}catch(e){throw t=(t||"").trim(),new TypeError("Invalid root"+(t?": "+t:""))}}if(1<e.length&&"string"!=typeof e[1])throw new TypeError("Invalid path: "+typeof e[1]);if(0<e.length&&"string"!=typeof e[0])throw new TypeError("Invalid path: "+typeof e[0]);let o="";if(1===e.length&&(o=e[0]),1===e.length&&o.match(Path.PATTERN_URL)?o=o.replace(Path.PATTERN_URL,"$1"):1<e.length&&(o=e[1]),!(o=(o||"").trim()).match(Path.PATTERN_PATH))throw new TypeError("Invalid path"+(String(o).trim()?": "+o:""));if((o=(o=o.replace(/([^#])#$/,"$1")).replace(/^([^#])/,"#$1")).match(Path.PATTERN_PATH_FUNCTIONAL))return"###";o=(o=t+o).toLowerCase();for(var r=/#[^#]+#{2}/;o.match(r);)o=o.replace(r,"#");return o="#"+o.replace(/(^#+)|(#+)$/g,"")}),"undefined"==typeof SiteMap&&(window.SiteMap={get PATTERN_PATH_FACE(){return/(^((#\w[\-\w]+\w)|(#\w+))+$)|(^#$)/},get PATTERN_PATH_FACET(){return/^((\w[\-\w]+\w)|(\w+))(#((\w[\-\w]+\w)|(\w+)))*$/},get PATTERN_PATH_FACET_VARIABLE(){return/(^((\w[\-\w]+\w)|(\w+))(#((\w[\-\w]+\w)|(\w+)))*(\.){3}$)|(^\.{3}$)/},get location(){var e;return SiteMap.history.size<=0?window.location.hash||"#":(e=Array.from(SiteMap.history))[e.length-1]},set location(e){if(SiteMap.history.has(e))for(var t=Array.from(SiteMap.history.values());SiteMap.history.has(e)&&t.includes(e);){var o=t.pop();if(o===e)return;SiteMap.history.delete(o)}else SiteMap.history.add(e)}},Object.defineProperty(SiteMap,"paths",{value:new Map}),Object.defineProperty(SiteMap,"facets",{value:new Map}),Object.defineProperty(SiteMap,"variables",{value:new Set}),Object.defineProperty(SiteMap,"acceptors",{value:new Set}),Object.defineProperty(SiteMap,"history",{value:new Set}),SiteMap.permit=function(e){for(var t of SiteMap.acceptors)if((!t.pattern||t.pattern.test(e))&&!0!==(t=t.action.call(null,e)))return t="string"==typeof t?Path.normalize(t):t;return!0},SiteMap.locate=function(t){t=t||"";var o=e=>{var t=[SiteMap.location,e];return e.match(/(^#[^#].*$)|(^#$)/)&&t.shift(),t};try{t=Path.normalize(...o(t))}catch(e){for(;;){t=t.replace(/(^[^#]+$)|(#[^#]*$)/,"");try{t=Path.normalize(...o(t))}catch(e){continue}break}}if(t.match(Path.PATTERN_PATH_FUNCTIONAL))return t;let e=Array.from(SiteMap.paths.keys());for(e=e.concat(Array.from(SiteMap.facets.keys()));e&&1<t.length;){for(const r of SiteMap.variables)if((t+"#").startsWith(r+"#"))return t;if(e.includes(t))return t;t=Path.normalize(t+"##")}return"#"},SiteMap.navigate=function(e){Composite.asynchron(e=>{window.location.hash=e},SiteMap.locate(e)),SiteMap.locate(e)},SiteMap.forward=function(e){var t=new Event("hashchange",{bubbles:!1,cancelable:!0});t.newURL=e,window.dispatchEvent(t)},SiteMap.lookup=function(e){arguments.length<=0&&(e=SiteMap.location);var t,o;for(const r of SiteMap.variables)if((e+"#").startsWith(r+"#")){if(SiteMap.paths.has(r))return{path:e,face:r,facet:null,get data(){return e.substring(r.length)||null}};if(SiteMap.facets.has(r)){const a=SiteMap.facets.get(r);return{path:e,face:a.path,facet:a.facet,get data(){return e.substring(a.path.length+a.facet.length)||null}}}break}return SiteMap.paths.has(e)?{path:e,face:e,facet:null}:SiteMap.facets.has(e)?(t=SiteMap.facets.get(e),{path:(o=t).facet?o.path.endsWith("#")?o.path+o.facet:o.path+"#"+o.facet:o.path,face:t.path,facet:t.facet}):null},SiteMap.accept=function(e){if(!(e=(e||"").trim().toLowerCase()).match(/^#.*$/))return!1;e=e.replace(/(#.*?)#*$/,"$1");var t=SiteMap.lookup(Path.normalize(SiteMap.location));if(!t)return!1;e=SiteMap.lookup(e);if(!e)return!1;let o=e.path;return o.endsWith("#")||(o+="#"),!(e.facet&&t.face!==e.face&&!t.path.startsWith(o)||!t.path.startsWith(o)&&t.face!==e.face)},SiteMap.customize=function(...e){if(1<e.length&&e[0]instanceof RegExp){if("function"!=typeof e[1])throw new TypeError("Invalid acceptor: "+typeof e[1]);SiteMap.acceptors.add({pattern:e[0],action:e[1]})}else{if(e.length<1||"object"!=typeof e[0])throw new TypeError("Invalid map: "+typeof e[0]);const a=e[0];var t=new Set(SiteMap.acceptors);if(1<e.length){if("function"!=typeof e[1])throw new TypeError("Invalid permit: "+typeof e[1]);t.add({pattern:null,action:e[1]})}const n=new Map,i=(SiteMap.paths.forEach((e,t)=>{"string"==typeof t&&t.match(SiteMap.PATTERN_PATH_FACE)&&n.set(t,e)}),new Map);SiteMap.facets.forEach((e,t)=>{"string"==typeof t&&t.match(SiteMap.PATTERN_PATH_FACET)&&i.set(t,e)});let r=new Set;SiteMap.variables.forEach(e=>{"string"==typeof e&&e.match(SiteMap.PATTERN_PATH_FACE)&&r.add(e)}),Object.keys(a).forEach(o=>{var e;"string"!=typeof o||!o.match(SiteMap.PATTERN_PATH_FACE)||null!==(e=a[o])&&!Array.isArray(e)||(o=Path.normalize(o),n.has(o)||n.set(o,[]),(e=e||[]).forEach(e=>{if("string"!=typeof e)throw new TypeError("Invalid facet: "+typeof e);if(!(e=e.toLowerCase().trim()).match(SiteMap.PATTERN_PATH_FACET)&&!e.match(SiteMap.PATTERN_PATH_FACET_VARIABLE))throw new Error("Invalid facet"+(e?": "+e:""));if(e.match(SiteMap.PATTERN_PATH_FACET_VARIABLE)){var t=(e=e.replace(/\.+$/,""))?o.replace(/#+$/,"")+"#"+e:o;if(r.has(t)||r.add(t),!e)return}n.get(o).includes(e)||n.get(o).push(e),i.set(Path.normalize(o,e),{path:o,facet:e})}))}),SiteMap.acceptors.clear(),t.forEach(e=>{SiteMap.acceptors.add(e)}),SiteMap.paths.clear(),n.forEach((e,t)=>{SiteMap.paths.set(t,e)}),SiteMap.facets.clear(),i.forEach((e,t)=>{SiteMap.facets.set(t,e)}),SiteMap.variables.clear(),(r=Array.from(r)).sort((e,t)=>e.localeCompare(t)),r.forEach(e=>{SiteMap.variables.add(e)})}},Composite.customize(o=>{if(o instanceof Element&&o.hasAttribute(Composite.ATTRIBUTE_COMPOSITE)&&!o.hasAttribute("static")){let t="";for(let e=o;e;e=e.parentNode)if(e instanceof Element&&e.hasAttribute(Composite.ATTRIBUTE_COMPOSITE)){var r=(e.getAttribute(Composite.ATTRIBUTE_ID)||"").trim();if(!r.match(Composite.PATTERN_COMPOSITE_ID))throw new Error("Invalid composite id"+(r?": "+r:""));t="#"+r+t}let e=null;e=(e=o.hasAttribute(Composite.ATTRIBUTE_CONDITION)&&(e=o.getAttribute(Composite.ATTRIBUTE_CONDITION).trim()).match(Composite.PATTERN_EXPRESSION_CONTAINS)?e.replace(Composite.PATTERN_EXPRESSION_CONTAINS,e=>(e=e.substring(2,e.length-2).trim(),`{{SiteMap.accept("${t}") and (${e})}}`)):e)||`${e||""}{{SiteMap.accept("${t}")}}`,o.setAttribute(Composite.ATTRIBUTE_CONDITION,e)}}),Composite.customize("@ATTRIBUTES-STATICS","static"),window.addEventListener("load",()=>{document.body.addEventListener("click",e=>{var t;e.target&&e.target instanceof Element&&e.target.hasAttribute("href")&&(e=SiteMap.lookup(e.target.getAttribute("href")),t=SiteMap.lookup(Path.normalize(SiteMap.location)))&&e&&t.face===e.face&&t.facet===e.facet&&"function"==typeof e.focus&&e.focus()}),SiteMap.forward(window.location.hash||"#")}),window.addEventListener("hashchange",e=>{var r=SiteMap.history.size<=0;if(SiteMap.paths.size<=0)r&&Composite.render(document.body);else{let t=Path.normalize(SiteMap.location);e=(e.newURL||"").replace(Path.PATTERN_URL,"$1");let o=SiteMap.locate(e);if((o=o.match(Path.PATTERN_PATH_FUNCTIONAL)&&r?"#":o).match(Path.PATTERN_PATH_FUNCTIONAL))history.replaceState(null,document.title,SiteMap.location);else if(o!==window.location.hash||o!==SiteMap.location||r){e=SiteMap.permit(o);if(!0!==e)"string"==typeof e?SiteMap.forward(e):SiteMap.forward("#"!==o?o+"##":"#");else{SiteMap.location=o,t=SiteMap.lookup(t),o=SiteMap.lookup(o),(t=t.face).endsWith("#")||(t+="#"),(o=o.face).endsWith("#")||(o+="#");let e="#";t.startsWith(o)?e=o:o.startsWith(t)&&(e=t),(e=e.match(/((#[^#]+)|(^))#*$/))&&e[1]&&!r?Composite.render(e[1]):Composite.render(document.body),window.location.assign(SiteMap.location),window.location.hash=window.location.hash}}}})),"undefined"==typeof Test&&(window.Test={get PATTERN_EVENT(){return/^[a-z]+$/},get EVENT_FINISH(){return"finish"},get EVENT_INTERRUPT(){return"interrupt"},get EVENT_PERFORM(){return"perform"},get EVENT_RESPONSE(){return"response"},get EVENT_RESUME(){return"resume"},get EVENT_START(){return"start"},get EVENT_SUSPEND(){return"suspend"},get TIMESTAMP(){return(new Date).toUTCString()}},Test.activate=function(){void 0===Test.activate.lock&&(Object.defineProperty(Test.activate,"lock",{value:!0}),Object.defineProperty(Test,"stack",{value:new Set}),Object.defineProperty(Test,"listeners",{value:new Map}),Test.listen=function(e,t){if("string"!=typeof e)throw new TypeError("Invalid event: "+typeof e);if("function"!=typeof t&&null!=t)throw new TypeError("Invalid callback: "+typeof t);if(!e.match(Test.PATTERN_EVENT))throw new Error("Invalid event"+(e.trim()?": "+e:""));e=e.toLowerCase(),Test.listeners.has(e)||Array.isArray(Test.listeners.get(e))||Test.listeners.set(e,[]),Test.listeners.get(e).push(t)},Test.fire=function(e,t){"object"==typeof Test.worker&&(Test.worker.status=e);var o=(e,t,o)=>{if("object"==typeof e.Test.worker&&"object"==typeof e.Test.worker.monitor&&"function"==typeof e.Test.worker.monitor[t])try{e.Test.worker.monitor[t](o)}catch(e){console.error(e)}t=(t||"").trim(),e.Test.listeners.size<=0||!t||(e=e.Test.listeners.get(t.toLowerCase()),Array.isArray(e)&&e.forEach(e=>{e(t,o)}))};if(o(window,e,t),parent&&parent!==window)try{o(parent,e,t)}catch(e){}},Test.create=function(e){var t;"object"!=typeof e||"function"!=typeof e.test||void 0!==e.ignore&&!0===e.ignore||Test.stack.has(e)||(Test.stack.add(e),t=Array.from(Test.stack),Object.defineProperty(e,"serial",{value:Math.max(t.length,1<t.length?t[t.length-2].serial+1:1)}))},Test.start=function(e){if(void 0===Test.worker)if(e&&e.auto&&("loading"===document.readyState||"interactive"===document.readyState))void 0===Test.start.auto&&(Object.defineProperty(Test.start,"auto",{value:!0}),window.addEventListener("load",()=>{Test.start(e)}));else{const t=(e,t)=>e+" "+t+(1!==e?"s":"");Test.worker={},Test.worker.output=e?e.output:null,Test.worker.output=Test.worker.output||console,Test.worker.monitor=e?e.monitor:null,Test.worker.monitor=Test.worker.monitor||{start(e){Test.worker.output.log(Test.TIMESTAMP+" Test is started"+`, ${t(e.queue.size,"task")} in the queue`)},suspend(e){Test.worker.output.log(Test.TIMESTAMP+" Test is suspended"+`, ${t(e.queue.length,"task")} still outstanding`)},resume(e){Test.worker.output.log(Test.TIMESTAMP+" Test is continued"+`, ${t(e.queue.size,"task")} in the queue`)},interrupt(e){Test.worker.output.log(Test.TIMESTAMP+" Test is interrupted"+`
	${t(e.queue.size-e.queue.progress,"task")} still outstanding`+`
	${t(e.queue.faults,"fault")} were detected`+`
	total time ${(new Date).getTime()-e.queue.timing} ms`)},perform(e){},response(e){var t=(new Date).getTime()-e.task.timing;e.task.error?Test.worker.output.error(`${Test.TIMESTAMP} Test task ${e.task.title} `+e.task.error.message):Test.worker.output.log(`${Test.TIMESTAMP} Test task ${e.task.title} was successful (${t} ms)`)},finish(e){Test.worker.output.log(Test.TIMESTAMP+"Test is finished"+`
	${t(e.queue.size,"task")} were performed`+`
	${t(e.queue.faults,"fault")} were detected`+`
	total time ${(new Date).getTime()-e.queue.timing} ms`)}},Test.worker.queue=Test.worker.queue||{timing:!1,stack:[],size:0,lock:!1,progress:0,faults:0},Test.worker.queue.stack.length<=0&&(Test.worker.queue.stack=Array.from(Test.stack),Test.worker.queue.size=Test.worker.queue.stack.length,Test.worker.queue.timing=(new Date).getTime()),Test.worker.timeout=window.setInterval(()=>{var e;Test.worker.status!==Test.EVENT_SUSPEND&&void 0!==Test.worker.task&&Test.worker.task.running&&Test.worker.queue.lock&&(!(e=Test.worker.task).timeout||e.timeout>(new Date).getTime()||(e.duration=(new Date).getTime()-e.timing,e.error=new Error(`Timeout occurred, expected ${e.timeout} ms but was ${e.duration} ms`),Test.fire(Test.EVENT_RESPONSE,Test.status()),Test.worker.queue.faults++,Test.worker.queue.lock=!1))},25),Test.worker.interval=window.setInterval(()=>{if(Test.worker.status!==Test.EVENT_SUSPEND&&(!Test.worker.queue.lock&&Test.worker.queue.progress<=0&&Test.fire(Test.EVENT_START,Test.status()),!Test.worker.queue.lock))if(0<Test.worker.queue.stack.length){Test.worker.queue.lock=!0,Test.worker.queue.progress++;var t=Test.worker.queue.stack.shift();let e=!1;0<(t.timeout||0)&&(e=(new Date).getTime()+t.timeout),Test.worker.task={title:null,meta:t,running:!0,timing:(new Date).getTime(),timeout:e,duration:!1,error:null},Test.worker.task.title="#"+t.serial,"string"==typeof t.name&&0<t.name.trim().length&&(Test.worker.task.title+=" "+t.name.replace(/[\x00-\x20]+/g," ").trim()),Test.fire(Test.EVENT_PERFORM,Test.status()),void Composite.asynchron(()=>{var t=Test.worker.task;try{t.meta.test()}catch(e){t.error=e,t.error.message&&t.error.message.trim()||(t.error.message="failed")}finally{t.meta.expected&&(t.error?("function"==typeof t.meta.expected&&t.error instanceof t.meta.expected&&(t.error=null),"object"==typeof t.meta.expected&&t.meta.expected instanceof RegExp&&String(t.error).match(t.meta.expected)&&(t.error=null)):t.error=Error("Assert error expected failed")),t.running=!1,t.duration=(new Date).getTime()-t.timing,t.timeout&&t.timeout<(new Date).getTime()&&!t.error&&(t.error=new Error(`Timeout occurred, expected ${t.meta.timeout} ms but was ${t.duration} ms`),Test.fire(Test.EVENT_RESPONSE,Test.status()),Test.worker.queue.faults++),t.error&&String(t.error.message).match(/^Timeout occurred/)||(t.error&&Test.worker.queue.faults++,Test.fire(Test.EVENT_RESPONSE,Test.status())),Test.worker.queue.lock=!1}})}else window.clearTimeout(Test.worker.interval),window.clearTimeout(Test.worker.timeout),Test.fire(Test.EVENT_FINISH,Test.status()),delete Test.worker},25)}},Test.suspend=function(){if(void 0===Test.worker)throw new Error("Suspend is not available");Test.fire(Test.EVENT_SUSPEND,Test.status())},Test.resume=function(){if(void 0===Test.worker||Test.worker.status!==Test.EVENT_SUSPEND)throw new Error("Resume is not available");Test.fire(Test.EVENT_RESUME,Test.status())},Test.interrupt=function(){if(void 0===Test.worker)throw new Error("Interrupt is not available");window.clearTimeout(Test.worker.interval),window.clearTimeout(Test.worker.timeout),Test.fire(Test.EVENT_INTERRUPT,Test.status()),delete Test.worker},Test.status=function(){var e={};return"object"==typeof Test.worker&&"object"==typeof Test.worker.task&&(e.task={},Object.defineProperty(e.task,"title",{value:Test.worker.task.title,enumerable:!0}),Object.defineProperty(e.task,"meta",{value:Test.worker.task.meta,enumerable:!0}),Object.defineProperty(e.task,"running",{value:Test.worker.task.running,enumerable:!0}),Object.defineProperty(e.task,"timing",{value:Test.worker.task.timing,enumerable:!0}),Object.defineProperty(e.task,"timeout",{value:Test.worker.task.timeout,enumerable:!0}),Object.defineProperty(e.task,"duration",{value:Test.worker.task.duration,enumerable:!0}),Object.defineProperty(e.task,"error",{value:Test.worker.task.error,enumerable:!0})),"object"==typeof Test.worker&&"object"==typeof Test.worker.queue&&(e.queue={},Object.defineProperty(e.queue,"timing",{value:Test.worker.queue.timing,enumerable:!0}),Object.defineProperty(e.queue,"size",{value:Test.worker.queue.size,enumerable:!0}),Object.defineProperty(e.queue,"length",{value:Test.worker.queue.stack.length,enumerable:!0}),Object.defineProperty(e.queue,"progress",{value:Test.worker.queue.progress,enumerable:!0}),Object.defineProperty(e.queue,"lock",{value:Test.worker.queue.lock,enumerable:!0}),Object.defineProperty(e.queue,"faults",{value:Test.worker.queue.faults,enumerable:!0})),(void 0!==e.task||void 0!==e.queue)&&e},"undefined"==typeof Assert&&(window.Assert={},Assert.create=function(e,t){const r={message:null,values:[],error(...o){o.forEach((e,t,o)=>{o[t]=String(e).replace(/\{(\d+)\}/g,(e,t)=>t>r.values.length?"[null]":String(r.values[t]).replace(/\s*[\r\n]+\s*/g," "))});let e="expected {1} but was {2}";return e=(e="{0} failed, "+(e=null!==r.message&&(r.message=r.message.trim(),r.message)?r.message:e)).replace(/\{(\d+)\}/g,(e,t)=>t>o.length?"[null]":String(o[t]).replace(/\s*[\r\n]+\s*/g," ")),new Error(e)}};for((e=Array.from(e)).length>t&&(r.message=e.shift());0<e.length;)r.values.push(e.shift());return r},Assert.assertTrue=function(...e){e=Assert.create(e,1);if(!0!==e.values[0])throw e.error("Assert.assertTrue","true","{0}")},Assert.assertFalse=function(...e){e=Assert.create(e,1);if(!1!==e.values[0])throw e.error("Assert.assertFalse","false","{0}")},Assert.assertEquals=function(...e){e=Assert.create(e,2);if(e.values[0]!==e.values[1])throw e.error("Assert.assertEquals","{0}","{1}")},Assert.assertNotEquals=function(...e){e=Assert.create(e,2);if(e.values[0]===e.values[1])throw e.error("Assert.assertNotEquals","not {0}","{1}")},Assert.assertSame=function(...e){e=Assert.create([],e,2);if(e.values[0]!==e.values[1])throw e.error("Assert.assertSame","{0}","{1}")},Assert.assertNotSame=function(...e){e=Assert.create(e,2);if(e.values[0]===e.values[1])throw e.error("Assert.assertNotSame","not {0}","{1}")},Assert.assertUndefined=function(...e){e=Assert.create(e,1);if(void 0!==e.values[0])throw e.error("Assert.assertUndefined","undefined","{0}")},Assert.assertNotUndefined=function(...e){e=Assert.create(e,1);if(void 0===e.values[0])throw e.error("Assert.assertNotUndefined","not undefined","{0}")},Assert.assertNull=function(...e){e=Assert.create(e,1);if(null!==e.values[0])throw e.error("Assert.assertNull","null","{0}")},Assert.assertNotNull=function(...e){e=Assert.create(e,1);if(null===e.values[0])throw e.error("Assert.assertNotNull","not null","{0}")},Assert.fail=function(e){throw e="Assert.fail"+((e=e&&String(e).trim())?", "+e:""),new Error(e)}),console.output={log:"",warn:"",error:"",info:""},console.output.clear=function(){console.output.log="",console.output.warn="",console.output.error="",console.output.info=""},Object.defineProperty(console,"listeners",{value:new Set}),console.listen=function(e){console.listeners.add(e)},console.forward=function(t,o,e){console.output[t]+=Array.from(o).join(", "),e&&e(...o),console.listeners.forEach(e=>{e(t,...o)}),parent&&parent!==window&&parent.console&&"function"==typeof parent.console.forward&&parent.console.forward(...Array.from(arguments).slice(0,2))},console.log$origin=console.log,console.log=function(...e){console.forward("log",e,console.log$origin)},console.warn$origin=console.warn,console.warn=function(...e){console.forward("warn",e,console.warn$origin)},console.error$origin=console.error,console.error=function(...e){console.forward("error",e,console.error$origin)},console.info$origin=console.info,console.info=function(...e){console.forward("info",e,console.info$origin)},window.addEventListener("error",function(e){parent&&parent!==window&&console.forward("error",[e.message],null)}),void 0===Element.prototype.typeValue&&(Element.prototype.typeValue=function(e,t){this.focus(),!1!==t&&(this.value="");const o=this;(e=(e||"").split("")).forEach(e=>{o.trigger("keydown"),o.value=(o.value||"")+e,o.trigger("keyup")}),this.trigger("input")}),void 0===Node.prototype.toPlainString&&(Node.prototype.toPlainString=function(){return(new XMLSerializer).serializeToString(this)}),void 0===Element.prototype.toPlainString&&(Element.prototype.toPlainString=function(){return this.outerHTML}),void 0===Object.prototype.toPlainString&&(Object.prototype.toPlainString=function(){return null!==this&&"function"==typeof this[Symbol.iterator]?JSON.stringify([...this]):JSON.stringify(this)}),void 0===Element.prototype.trigger)&&(Element.prototype.trigger=function(e,t=!1,o=!0){this.dispatchEvent(new Event(e,{bubbles:t,cancelable:o}))})});